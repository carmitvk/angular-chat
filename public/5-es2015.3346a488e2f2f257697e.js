(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0vWp":function(e,t,n){"use strict";n.r(t),n.d(t,"MainViewModule",function(){return Pt});var i=n("ofXK"),s=n("tyNb"),r=n("XNiG"),o=n("fXoL"),a=n("2Vo4"),c=n("vkgz"),l=n("1G5W"),h=n("IzEk"),p=n("nYR2"),u=n("lJxs"),d=n("zp1y"),f=n("tk/3");let g=(()=>{class e{constructor(e){this.http=e}getRooms(){return this.http.get("api/room")}}return e.\u0275fac=function(t){return new(t||e)(o.ac(f.b))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n("HDdC"),b=n("jifJ"),y=n("AytR");let v=(()=>{class e{constructor(){this.socket=y.a.SOCKET_ENDPOINT?Object(b.io)(y.a.SOCKET_ENDPOINT):Object(b.io)()}joinRoom(e){console.log("join-to-room",e),this.socket.emit("join-to-room",e)}sendMessage(e){console.log("sendMessage",e),this.socket.emit("message",e)}sendTyping(e){this.socket.emit("user-typing",e)}getMessage(){return new m.a(e=>(this.socket.on("new-message",t=>{e.next(t)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}getUsers(){return new m.a(e=>(this.socket.on("users-in-room",t=>{e.next(t)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}getTypingUser(){return new m.a(e=>(this.socket.on("typer",t=>{e.next(t)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}disconnect(){console.log("disconect function"),this.socket.emit("disconnect")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=n("8tlj");let S=(()=>{class e{constructor(e,t,n){this.roomService=e,this.socketService=t,this.userDataService=n,this._roomList=new a.a([]),this._isLoading=new a.a(!1),this._usersInRoom=new a.a([]),this._typersInRoom=new a.a([]),this._selectedRoom=new a.a(void 0),this.subscription=new r.a,this.roomList$=this._roomList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedRoom$=this._selectedRoom.asObservable(),this.usersInRoom$=this._usersInRoom.asObservable(),this.typersInRoom$=this._typersInRoom.asObservable(),this.initListeners()}initListeners(){this.socketService.getUsers().pipe(Object(c.a)(e=>this._usersInRoom.next(e)),Object(c.a)(e=>console.log("users in room are: ",e)),Object(l.a)(this.subscription)).subscribe(),this.socketService.getTypingUser().pipe(Object(c.a)(e=>{let t=this._typersInRoom.value.filter(t=>t.id!==e.id);this._typersInRoom.next([...t,e])}),Object(c.a)(e=>setTimeout(()=>{let t=this._typersInRoom.value.filter(t=>t.id!==e.id);this._typersInRoom.next([...t])},3e3)),Object(c.a)(e=>console.log("typer is: ",e)),Object(l.a)(this.subscription)).subscribe()}updateData(){this._isLoading.next(!0),this.roomService.getRooms().pipe(Object(c.a)(e=>this._roomList.next(e)),Object(c.a)(e=>this.setSelectedRoom(e[0].roomId)),Object(h.a)(1),Object(p.a)(()=>this._isLoading.next(!1))).subscribe()}setSelectedRoom(e){var t;(null===(t=this._selectedRoom.value)||void 0===t?void 0:t.roomId)!==e&&(this._isLoading.next(!0),this._roomList.pipe(Object(u.a)(t=>t.find(t=>t.roomId===e)),Object(c.a)(e=>this._selectedRoom.next(e)),Object(d.a)(this.userDataService.user$),Object(c.a)(([t,n])=>this.socketService.joinRoom({roomId:e,user:n})),Object(h.a)(1),Object(p.a)(()=>this._isLoading.next(!1))).subscribe())}ngOnDestroy(){console.log("room data service destroy"),this.subscription.next(),this.subscription.complete(),this.socketService.disconnect()}}return e.\u0275fac=function(t){return new(t||e)(o.ac(g),o.ac(v),o.ac(C.a))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=n("itXk"),w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function _(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function k(e,t){for(var n=0,i=t.length,s=e.length;n<i;n++,s++)e[s]=t[n];return e}function E(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=E(e[n],t[n]));return e}var P=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,i))}},e}();function T(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var I=function(e){function t(n,i,s){var r=e.call(this,i)||this;return r.code=n,r.customData=s,r.name="FirebaseError",Object.setPrototypeOf(r,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,z.prototype.create),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),z=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0]||{},s=this.service+"/"+e,r=this.errors[e],o=r?M(r,i):"Error",a=this.serviceName+": "+o+" ("+s+").",c=new I(s,a,i);return c},e}();function M(e,t){return e.replace(R,function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){var n=new N(e,t);return n.subscribe.bind(n)}var N=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var i,s=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var s=i[n];if(s in e&&"function"==typeof e[s])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=j),void 0===i.error&&(i.error=j),void 0===i.complete&&(i.complete=j);var r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{s.finalError?i.error(s.finalError):i.complete()}catch(e){}}),this.observers.push(i),r},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function j(){}var F,L=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),U=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new P;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=_(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var r=A(s.value,2),o=r[1],a=this.normalizeInstanceIdentifier(r[0]);try{var c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch(l){}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(a){r=[6,a],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(k(k([],A(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),A(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(i,s){function r(e){try{a(n.next(e))}catch(t){s(t)}}function o(e){try{a(n.throw(e))}catch(t){s(t)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,o)}a((n=n.apply(e,[])).next())});var e,t,n},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e="[DEFAULT]"),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(this.name+"("+r+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:r,options:s});try{for(var a=_(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var l=A(c.value,2),h=l[1];r===this.normalizeInstanceIdentifier(l[0])&&h.resolve(o)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);var r=this.instances.get(i);return r&&e(r,i),function(){s.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var r=_(s),o=r.next();!o.done;o=r.next()){var a=o.value;try{a(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,i=e.options,s=void 0===i?{}:i,r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:s}),this.instances.set(n,r),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch(o){}return r||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e="[DEFAULT]"),this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),$=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new U(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function H(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i}var V,q=[],K=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),G={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},W=K.INFO,X=((F={})[K.DEBUG]="log",F[K.VERBOSE]="log",F[K.INFO]="info",F[K.WARN]="warn",F[K.ERROR]="error",F),Y=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[r].apply(console,H(["["+s+"]  "+e.name+":"],n))}},J=function(){function e(e){this.name=e,this._logLevel=W,this._logHandler=Y,this._userLogHandler=null,q.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in K))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?G[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,H([this,K.DEBUG],e)),this._logHandler.apply(this,H([this,K.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,H([this,K.VERBOSE],e)),this._logHandler.apply(this,H([this,K.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,H([this,K.INFO],e)),this._logHandler.apply(this,H([this,K.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,H([this,K.WARN],e)),this._logHandler.apply(this,H([this,K.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,H([this,K.ERROR],e)),this._logHandler.apply(this,H([this,K.ERROR],e))},e}();function Q(e){q.forEach(function(t){t.setLogLevel(e)})}var Z,ee=((V={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",V["bad-app-name"]="Illegal App name: '{$appName}",V["duplicate-app"]="Firebase App named '{$appName}' already exists",V["app-deleted"]="Firebase App named '{$appName}' already deleted",V["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",V["invalid-log-argument"]="First argument to `onLog` must be null or a function.",V),te=new z("app","Firebase",ee),ne=((Z={})["@firebase/app"]="fire-core",Z["@firebase/analytics"]="fire-analytics",Z["@firebase/app-check"]="fire-app-check",Z["@firebase/auth"]="fire-auth",Z["@firebase/database"]="fire-rtdb",Z["@firebase/functions"]="fire-fn",Z["@firebase/installations"]="fire-iid",Z["@firebase/messaging"]="fire-fcm",Z["@firebase/performance"]="fire-perf",Z["@firebase/remote-config"]="fire-rc",Z["@firebase/storage"]="fire-gcs",Z["@firebase/firestore"]="fire-fst",Z["fire-js"]="fire-js",Z["firebase-wrapper"]="fire-js-all",Z),ie=new J("@firebase/app"),se=function(){function e(e,t,n){var i=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=E(void 0,e),this.container=new $(t.name),this._addComponent(new L("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return i._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,t){var n;void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_();var i=this.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){ie.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw te.create("app-deleted",{appName:this.name_})},e}();se.prototype.name&&se.prototype.options||se.prototype.delete||console.log("dc");var re=function e(){var t=function(e){var t={},n=new Map,i={__esModule:!0,initializeApp:function(n,s){void 0===s&&(s={}),"object"==typeof s&&null!==s||(s={name:s});var r=s;void 0===r.name&&(r.name="[DEFAULT]");var o=r.name;if("string"!=typeof o||!o)throw te.create("bad-app-name",{appName:String(o)});if(B(t,o))throw te.create("duplicate-app",{appName:o});var a=new e(n,r,i);return t[o]=a,a},app:s,registerVersion:function(e,t,n){var i,s=null!==(i=ne[e])&&void 0!==i?i:e;n&&(s+="-"+n);var o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+s+'" with version "'+t+'":'];return o&&c.push('library name "'+s+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void ie.warn(c.join(" "))}r(new L(s+"-version",function(){return{library:s,version:t}},"VERSION"))},setLogLevel:Q,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw te.create("invalid-log-argument");!function(e,t){for(var n=function(n){var i=null;t&&t.level&&(i=G[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var s=[],r=2;r<arguments.length;r++)s[r-2]=arguments[r];var o=s.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:K[n].toLowerCase(),message:o,args:s,type:t.name})}},i=0,s=q;i<s.length;i++)n(s[i])}(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:r,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function s(e){if(!B(t,e=e||"[DEFAULT]"))throw te.create("no-app",{appName:e});return t[e]}function r(r){var o=r.name;if(n.has(o))return ie.debug("There were multiple attempts to register component "+o+"."),"PUBLIC"===r.type?i[o]:null;if(n.set(o,r),"PUBLIC"===r.type){var a=function(e){if(void 0===e&&(e=s()),"function"!=typeof e[o])throw te.create("invalid-app-argument",{appName:o});return e[o]()};void 0!==r.serviceProps&&E(a,r.serviceProps),i[o]=a,e.prototype[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,o).apply(this,r.multipleInstances?e:[])}}for(var c=0,l=Object.keys(t);c<l.length;c++)t[l[c]]._addComponent(r);return"PUBLIC"===r.type?i[o]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),s.App=e,i}(se);return t.INTERNAL=O(O({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){E(t,e)},createSubscribe:D,ErrorFactory:z,deepExtend:E}),t}(),oe=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null}).filter(function(e){return e}).join(" ")},e}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ae=self.firebase.SDK_VERSION;ae&&ae.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ce=re.initializeApp;re.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return T()&&ie.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ce.apply(void 0,e)};var le,he=re;(le=he).INTERNAL.registerComponent(new L("platform-logger",function(e){return new oe(e)},"PRIVATE")),le.registerVersion("@firebase/app","0.6.30",void 0),le.registerVersion("fire-js","");var pe=he;pe.registerVersion("firebase","8.10.0","app"),pe.SDK_VERSION="8.10.0";let ue=(()=>{class e{constructor(){this.initFireBaseApp()}initFireBaseApp(){pe.initializeApp({apiKey:"AIzaSyDwghdTsWkYjoe7s-hiVntkOEp8odtRq5Q",authDomain:"angular-chat-room-c5673.firebaseapp.com",projectId:"angular-chat-room-c5673",storageBucket:"angular-chat-room-c5673.appspot.com",messagingSenderId:"767651941036",appId:"1:767651941036:web:f35327895c7ce933afad09"})}loadHistory(){return this.historyTable=pe.database().ref("history"),new m.a(e=>{this.historyTable.on("value",t=>{const n=t.val();console.log(n),e.next(n)})})}saveChatToHistoryTable(e,t,n){const i={historyId:Date.now().toString(),user:t,messages:e,roomId:n,savedAt:Date.now()};pe.database().ref("history/"+i.historyId).set(i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),de=(()=>{class e{constructor(e){this.http=e}getChatMessages(e){return this.http.get(`api/chat-message/${e}`)}addChatMessage(e){return this.http.post("api/chat-message",e)}}return e.\u0275fac=function(t){return new(t||e)(o.ac(f.b))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fe=(()=>{class e{constructor(e,t,n){this.chatMessageService=e,this.socketService=t,this.roomDataService=n,this._messages=new a.a([]),this._isLoading=new a.a(!1),this.subscription=new r.a,this.messages$=this._messages.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.initSocketListener(),this.roomDataService.selectedRoom$.pipe(Object(c.a)(()=>this._messages.next([]))).subscribe()}initSocketListener(){this.socketService.getMessage().pipe(Object(c.a)(e=>console.log("addChatMessage",e)),Object(c.a)(e=>this._messages.next([...this._messages.value,e])),Object(l.a)(this.subscription)).subscribe()}updateData(e){this._isLoading.next(!0),this.chatMessageService.getChatMessages(e).pipe(Object(c.a)(e=>this._messages.next(e)),Object(h.a)(1),Object(p.a)(()=>this._isLoading.next(!1))).subscribe()}addChatMessage(e){console.log("addChatMessage"),this.socketService.sendMessage(e)}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.ac(de),o.ac(v),o.ac(S))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ge=(()=>{class e{constructor(e,t,n,i){this.fireBaseService=e,this.chatMessagesDataService=t,this.userDataService=n,this.roomDataService=i,this._historyList=new a.a([]),this._isLoading=new a.a(!1),this._selectedHistory=new a.a(void 0),this.historyList$=this._historyList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedHistory$=this._selectedHistory.asObservable()}loadHistory(){this.fireBaseService.loadHistory().pipe(Object(c.a)(e=>this._historyList.next(e))).subscribe()}setSelectedHistory(e){var t;(null===(t=this._selectedHistory.value)||void 0===t?void 0:t.historyId)!==e&&(this._isLoading.next(!0),this._historyList.pipe(Object(u.a)(t=>t.find(t=>t.historyId===e)),Object(c.a)(e=>this._selectedHistory.next(e)),Object(h.a)(1),Object(p.a)(()=>this._isLoading.next(!1))).subscribe())}saveChatToHistory(){Object(x.a)([this.chatMessagesDataService.messages$,this.userDataService.user$,this.roomDataService.selectedRoom$]).pipe(Object(h.a)(1),Object(c.a)(([e,t,n])=>this.fireBaseService.saveChatToHistoryTable(e,t,null==n?void 0:n.roomId))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.ac(ue),o.ac(fe),o.ac(C.a),o.ac(S))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var me=n("Kj3r");const be=["gutterEls"];function ye(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",2,3),o.dc("mousedown",function(t){o.vc(e);const n=o.gc().index;return o.gc().startDragging(t,2*n+1,n+1)})("touchstart",function(t){o.vc(e);const n=o.gc().index;return o.gc().startDragging(t,2*n+1,n+1)})("mouseup",function(t){o.vc(e);const n=o.gc().index;return o.gc().clickGutter(t,n+1)})("touchend",function(t){o.vc(e);const n=o.gc().index;return o.gc().clickGutter(t,n+1)}),o.Pb(2,"div",4),o.Sb()}if(2&e){const e=o.gc().index,t=o.gc();o.yc("flex-basis",t.gutterSize,"px")("order",2*e+1)}}function ve(e,t){1&e&&o.Bc(0,ye,3,4,"div",1),2&e&&o.mc("ngIf",!1===t.last)}const Ce=["*"];function Se(e){return void 0!==e.changedTouches&&e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0!==e.clientX&&void 0!==e.clientY?{x:e.clientX,y:e.clientY}:null}function xe(e,t){const n=e.nativeElement.getBoundingClientRect();return"horizontal"===t?n.width:n.height}function we(e){return"boolean"==typeof e?e:"false"!==e}function Oe(e,t){return null==e?t:(e=Number(e),!isNaN(e)&&e>=0?e:t)}function _e(e,t){if("percent"===e){const e=t.reduce((e,t)=>null!==t?e+t:e,0);return t.every(e=>null!==e)&&e>99.9&&e<100.1}if("pixel"===e)return 1===t.filter(e=>null===e).length}function Ae(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function ke(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function Ee(e,t,n,i){return t.reduce((t,n)=>{const s=function(e,t,n,i){return 0===n?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:t.sizePercentAtStart,pixelRemain:0}:0===t.sizePixelAtStart&&n<0?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:n}:"percent"===e?function(e,t,n){const i=(e.sizePixelAtStart+t)/n*100;if(t>0){if(null!==e.area.maxSize&&i>e.area.maxSize){const i=e.area.maxSize/100*n;return{areaSnapshot:e,pixelAbsorb:i,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+t-i}}return{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(t<0){if(null!==e.area.minSize&&i<e.area.minSize){const i=e.area.minSize/100*n;return{areaSnapshot:e,pixelAbsorb:i,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+t-i}}return i<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:i,pixelRemain:0}}}(t,n,i):"pixel"===e?function(e,t,n){const i=e.sizePixelAtStart+t;return t>0?null!==e.area.maxSize&&i>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:i-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:t<0?null!==e.area.minSize&&i<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+t-i,percentAfterAbsorption:-1,pixelRemain:i-e.area.minSize}:i<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(t,n):void 0}(e,n,t.remain,i);return t.list.push(s),t.remain=s.pixelRemain,t},{remain:n,list:[]})}function Pe(e,t){"percent"===e?t.areaSnapshot.area.size=t.percentAfterAbsorption:"pixel"===e&&null!==t.areaSnapshot.area.size&&(t.areaSnapshot.area.size=t.areaSnapshot.sizePixelAtStart+t.pixelAbsorb)}let Te=(()=>{class e{constructor(e,t,n,i){this.ngZone=e,this.elRef=t,this.cdRef=n,this.renderer=i,this._direction="horizontal",this._unit="percent",this._gutterSize=11,this._gutterStep=1,this._restrictMove=!1,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this._gutterDblClickDuration=0,this.dragStart=new o.n(!1),this.dragEnd=new o.n(!1),this.gutterClick=new o.n(!1),this.gutterDblClick=new o.n(!1),this.dragProgressSubject=new r.a,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction}set direction(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(e){this._gutterSize=Oe(e,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(e){this._gutterStep=Oe(e,1)}get gutterStep(){return this._gutterStep}set restrictMove(e){this._restrictMove=we(e)}get restrictMove(){return this._restrictMove}set useTransition(e){this._useTransition=we(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(e){this._disabled=we(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(e){this._gutterDblClickDuration=Oe(e,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new m.a(e=>this.transitionEndSubscriber=e).pipe(Object(me.a)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(e){const t={component:e,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===e.visible?(this.displayedAreas.push(t),this.build(!0,!0)):this.hiddenAreas.push(t)}removeArea(e){if(this.displayedAreas.some(t=>t.component===e)){const t=this.displayedAreas.find(t=>t.component===e);this.displayedAreas.splice(this.displayedAreas.indexOf(t),1),this.build(!0,!0)}else if(this.hiddenAreas.some(t=>t.component===e)){const t=this.hiddenAreas.find(t=>t.component===e);this.hiddenAreas.splice(this.hiddenAreas.indexOf(t),1)}}updateArea(e,t,n){!0===e.visible&&this.build(t,n)}showArea(e){const t=this.hiddenAreas.find(t=>t.component===e);if(void 0===t)return;const n=this.hiddenAreas.splice(this.hiddenAreas.indexOf(t),1);this.displayedAreas.push(...n),this.build(!0,!0)}hideArea(e){const t=this.displayedAreas.find(t=>t.component===e);if(void 0===t)return;const n=this.displayedAreas.splice(this.displayedAreas.indexOf(t),1);n.forEach(e=>{e.order=0,e.size=0}),this.hiddenAreas.push(...n),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(e=>null===e.size?"*":e.size)}setVisibleAreaSizes(e){if(e.length!==this.displayedAreas.length)return!1;const t=e.map(e=>Oe(e,null));return!1!==_e(this.unit,t)&&(this.displayedAreas.forEach((e,n)=>e.component._size=t[n]),this.build(!1,!0),!0)}build(e,t){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(e=>null!==e.component.order)&&this.displayedAreas.sort((e,t)=>e.component.order-t.component.order),this.displayedAreas.forEach((e,t)=>{e.order=2*t,e.component.setStyleOrder(e.order)})),!0===t){const e=_e(this.unit,this.displayedAreas.map(e=>e.component.size));switch(this.unit){case"percent":{const t=100/this.displayedAreas.length;this.displayedAreas.forEach(n=>{n.size=e?n.component.size:t,n.minSize=Ae(n),n.maxSize=ke(n)});break}case"pixel":if(e)this.displayedAreas.forEach(e=>{e.size=e.component.size,e.minSize=Ae(e),e.maxSize=ke(e)});else{const e=this.displayedAreas.filter(e=>null===e.component.size);if(0===e.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((e,t)=>{e.size=0===t?null:e.component.size,e.minSize=0===t?null:Ae(e),e.maxSize=0===t?null:ke(e)});else if(e.length>1){let e=!1;this.displayedAreas.forEach(t=>{null===t.component.size?!1===e?(t.size=null,t.minSize=null,t.maxSize=null,e=!0):(t.size=100,t.minSize=null,t.maxSize=null):(t.size=t.component.size,t.minSize=Ae(t),t.maxSize=ke(t))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(t=>{t.component.setStyleFlex(0,0,`calc( ${t.size}% - ${t.size/100*e}px )`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(e=>{null===e.size?e.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?e.component.setStyleFlex(0,0,"100%",!1,!1):e.component.setStyleFlex(0,0,`${e.size}px`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}clickGutter(e,t){const n=Se(e);!this.startPoint||this.startPoint.x!==n.x||this.startPoint.y!==n.y||this.isDragging&&!this.isWaitingInitialMove||(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",t),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",t),this.stopDragging()},this.gutterDblClickDuration))}startDragging(e,t,n){e.preventDefault(),e.stopPropagation(),this.startPoint=Se(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.snapshot={gutterNum:n,lastSteppedOffset:0,allAreasSizePixel:xe(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(e=>{const n={area:e,sizePixelAtStart:xe(e.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?e.size:-1};e.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[n]:this.snapshot.areasBeforeGutter.unshift(n):e.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[n]):this.snapshot.areasAfterGutter.push(n))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((e,t)=>e+t.sizePercentAtStart,0),0!==this.snapshot.areasBeforeGutter.length&&0!==this.snapshot.areasAfterGutter.length&&(this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.dragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.dragEvent.bind(this)))}),this.displayedAreas.forEach(e=>e.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0))}dragEvent(e){if(e.preventDefault(),e.stopPropagation(),null!==this._clickTimeout&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1===this.isDragging)return;if(this.endPoint=Se(e),null===this.endPoint)return;if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(t=-t);const n=Math.round(t/this.gutterStep)*this.gutterStep;if(n===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=n;let i=Ee(this.unit,this.snapshot.areasBeforeGutter,-n,this.snapshot.allAreasSizePixel),s=Ee(this.unit,this.snapshot.areasAfterGutter,n,this.snapshot.allAreasSizePixel);if(0!==i.remain&&0!==s.remain?Math.abs(i.remain)===Math.abs(s.remain)||(Math.abs(i.remain)>Math.abs(s.remain)?s=Ee(this.unit,this.snapshot.areasAfterGutter,n+i.remain,this.snapshot.allAreasSizePixel):i=Ee(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)):0!==i.remain?s=Ee(this.unit,this.snapshot.areasAfterGutter,n+i.remain,this.snapshot.allAreasSizePixel):0!==s.remain&&(i=Ee(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const e=[...i.list,...s.list],t=e.find(e=>0!==e.percentAfterAbsorption&&e.percentAfterAbsorption!==e.areaSnapshot.area.minSize&&e.percentAfterAbsorption!==e.areaSnapshot.area.maxSize);t&&(t.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-e.filter(e=>e!==t).reduce((e,t)=>e+t.percentAfterAbsorption,0))}i.list.forEach(e=>Pe(this.unit,e)),s.list.forEach(e=>Pe(this.unit,e)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(e){if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(e=>e.component.unlockEvents());this.dragListeners.length>0;){const e=this.dragListeners.pop();e&&e()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(e,t){const n=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:t,sizes:n}):"end"===e?this.dragEnd.emit({gutterNum:t,sizes:n}):"click"===e?this.gutterClick.emit({gutterNum:t,sizes:n}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:t,sizes:n}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(n)):"progress"===e&&this.dragProgressSubject.next({gutterNum:t,sizes:n})}ngOnDestroy(){this.stopDragging()}collapseArea(e,t,n){const i=this.displayedAreas.find(t=>t.component===e);if(void 0===i)return;const s="right"===n?1:-1;i.sizeBeforeCollapse||(i.sizeBeforeCollapse=i.size,i.gutterBeforeCollapse=s),i.size=t;const r=this.gutterEls.find(e=>e.nativeElement.style.order===`${i.order+s}`);r&&this.renderer.addClass(r.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}expandArea(e){const t=this.displayedAreas.find(t=>t.component===e);if(void 0===t)return;if(!t.sizeBeforeCollapse)return;t.size=t.sizeBeforeCollapse,t.sizeBeforeCollapse=null;const n=this.gutterEls.find(e=>e.nativeElement.style.order===`${t.order+t.gutterBeforeCollapse}`);n&&this.renderer.removeClass(n.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(o.A),o.Ob(o.l),o.Ob(o.h),o.Ob(o.F))},e.\u0275cmp=o.Ib({type:e,selectors:[["as-split"]],viewQuery:function(e,t){if(1&e&&o.Gc(be,1),2&e){let e;o.tc(e=o.ec())&&(t.gutterEls=e)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick",transitionEnd:"transitionEnd"},exportAs:["asSplit"],ngContentSelectors:Ce,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","as-split-gutter",3,"flex-basis","order","mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"as-split-gutter",3,"mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(e,t){1&e&&(o.lc(),o.kc(0),o.Bc(1,ve,1,1,"ng-template",0)),2&e&&(o.Bb(1),o.mc("ngForOf",t.displayedAreas))},directives:[i.l,i.m],styles:['[_nghost-%COMP%]{align-items:stretch;display:flex;flex-wrap:nowrap;height:100%;justify-content:flex-start;overflow:hidden;width:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{align-items:center;background-color:#eee;display:flex;flex-grow:0;flex-shrink:0;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;height:100%;width:100%}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:col-resize;flex-direction:row;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==")}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:row-resize;flex-direction:column;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC")}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area, .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%]{transition:flex-basis .3s}'],changeDetection:0}),e})(),Ie=(()=>{class e{constructor(e,t,n,i){this.ngZone=e,this.elRef=t,this.renderer=n,this.split=i,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(e){this._order=Oe(e,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(e){this._size=Oe(e,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(e){this._minSize=Oe(e,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(e){this._maxSize=Oe(e,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(e){this._lockSize=we(e),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(e){this._visible=we(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",e=>{"flex-basis"===e.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}setStyleFlex(e,t,n,i,s){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",n),!0===i?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const e=this.lockListeners.pop();e&&e()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(e=0,t="right"){this.split.collapseArea(this,e,t)}expand(){this.split.expandArea(this)}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(o.A),o.Ob(o.l),o.Ob(o.F),o.Ob(Te))},e.\u0275dir=o.Jb({type:e,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),e})(),ze=(()=>{class e{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({imports:[[i.c]]}),e})();function Me(e,t){1&e&&o.Pb(0,"div",3)}function Re(e,t){1&e&&(o.Tb(0,"span"),o.Dc(1),o.Sb()),2&e&&(o.Bb(1),o.Fc(" ",", "," "))}function Be(e,t){if(1&e&&(o.Rb(0),o.Tb(1,"span",3),o.Dc(2),o.Sb(),o.Bc(3,Re,2,1,"span",2),o.Tb(4,"span"),o.Dc(5,"typing..."),o.Sb(),o.Qb()),2&e){const e=t.$implicit,n=t.last;o.Bb(2),o.Fc(" ",e.nickName," "),o.Bb(1),o.mc("ngIf",!n)}}function De(e,t){if(1&e&&(o.Rb(0),o.Bc(1,Be,6,2,"ng-container",6),o.Qb()),2&e){const e=o.gc().$implicit,t=o.gc();o.Bb(1),o.mc("ngForOf",e)("ngForTrackBy",t.identify)}}function Ne(e,t){1&e&&(o.Tb(0,"span"),o.Dc(1),o.Sb()),2&e&&(o.Bb(1),o.Fc(" ",", "," "))}function je(e,t){if(1&e&&(o.Rb(0,9),o.Tb(1,"span",10),o.Dc(2),o.Sb(),o.Bc(3,Ne,2,1,"span",2),o.Qb()),2&e){const e=t.$implicit,n=t.last;o.Bb(2),o.Fc(" ",e.nickName," "),o.Bb(1),o.mc("ngIf",!n)}}function Fe(e,t){if(1&e&&(o.Rb(0),o.Bc(1,je,4,2,"ng-container",8),o.Qb()),2&e){const e=o.gc().$implicit,t=o.gc(3);o.Bb(1),o.mc("ngForOf",e)("ngForTrackBy",t.identify)}}function Le(e,t){if(1&e&&(o.Rb(0),o.Bc(1,Fe,2,2,"ng-container",2),o.Qb()),2&e){const e=t.$implicit;o.Bb(1),o.mc("ngIf",e.length)}}function Ue(e,t){if(1&e&&(o.Tb(0,"div",7),o.Bc(1,Le,2,1,"ng-container",2),o.hc(2,"async"),o.Sb()),2&e){const e=o.gc(2);o.Bb(1),o.mc("ngIf",o.ic(2,1,e.roomDataService.usersInRoom$))}}function $e(e,t){if(1&e&&(o.Rb(0),o.Bc(1,De,2,2,"ng-container",4),o.Bc(2,Ue,3,3,"ng-template",null,5,o.Cc),o.Qb()),2&e){const e=t.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",e.length)("ngIfElse",n)}}let He=(()=>{class e{constructor(e){this.roomDataService=e}ngOnInit(){}identify(e,t){return t.id}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(S))},e.\u0275cmp=o.Ib({type:e,selectors:[["user-list"]],decls:5,vars:6,consts:[[1,"user-list"],["class","typers",4,"ngIf"],[4,"ngIf"],[1,"typers"],[4,"ngIf","ngIfElse"],["noTypers",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room-container"],["class","users-in-room",4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room"],[1,"users"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Bc(1,Me,1,0,"div",1),o.hc(2,"async"),o.Bc(3,$e,4,2,"ng-container",2),o.hc(4,"async"),o.Sb()),2&e&&(o.Bb(1),o.mc("ngIf",o.ic(2,2,t.roomDataService.typersInRoom$)),o.Bb(2),o.mc("ngIf",o.ic(4,4,t.roomDataService.typersInRoom$)))},directives:[i.m,i.l],pipes:[i.b],styles:[".user-list[_ngcontent-%COMP%]{font-size:14px;padding-left:5px}.user-list[_ngcontent-%COMP%]   .users-in-room[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),e})();var Ve=n("pLZG");const qe=function(e){return{reverse:e}};let Ke=(()=>{class e{constructor(e){this.userDataService=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(C.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["message-view"]],inputs:{data:"data"},decls:11,vars:11,consts:[[1,"message-view",3,"ngClass"],[1,"message-header"],[1,"user-name"],[1,"message-content"],[1,"message"],[1,"date"]],template:function(e,t){if(1&e&&(o.Tb(0,"div",0),o.hc(1,"async"),o.Tb(2,"div",1),o.Tb(3,"label",2),o.Dc(4),o.Sb(),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"label",4),o.Dc(7),o.Sb(),o.Tb(8,"label",5),o.Dc(9),o.hc(10,"date"),o.Sb(),o.Sb(),o.Sb()),2&e){let e=null;o.mc("ngClass",o.qc(9,qe,(null==(e=o.ic(1,4,t.userDataService.user$))?null:e.id)!==(null==t.data.fromUser?null:t.data.fromUser.id))),o.Bb(4),o.Ec(null==t.data||null==t.data.fromUser?null:t.data.fromUser.nickName),o.Bb(3),o.Ec(t.data.text),o.Bb(2),o.Ec(o.jc(10,6,t.data.createdAt,"H:mm:ss"))}},directives:[i.k],pipes:[i.b,i.e],styles:['.message-view[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;margin-bottom:10px}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{position:relative;border-radius:10px;max-width:70%;background-color:#6495ed;padding:5px 0 0;box-shadow:10px 10px 10px -6px #807c80;display:flex;flex-direction:column;margin:0 10px;word-break:break-word}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:0 20px;margin:0 0 2px}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{align-self:flex-end;color:#f0f8ff;font-size:10px;padding:0 5px;margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-9px;width:0;height:0;border-top:18px solid transparent;border-right:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}.reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:none}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:before{content:"";position:absolute;right:-9px;width:0;height:0;border-top:18px solid transparent;border-left:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}']}),e})();var Ge=n("Xa2L");function We(e,t){if(1&e&&(o.Tb(0,"div",8),o.Tb(1,"div",9),o.Dc(2),o.hc(3,"date"),o.Sb(),o.Sb()),2&e){const e=o.gc().$implicit;o.Bb(2),o.Ec(o.jc(3,1,e.createdAt,"dd/MM/yyyy"))}}function Xe(e,t){if(1&e&&(o.Rb(0),o.Bc(1,We,4,4,"div",6),o.hc(2,"date"),o.hc(3,"date"),o.Pb(4,"message-view",7),o.Qb()),2&e){const e=t.$implicit,n=t.index,i=o.gc(2).$implicit;o.Bb(1),o.mc("ngIf",0===n||o.jc(2,2,e.createdAt,"dd")!==o.jc(3,5,i[n-1].createdAt,"dd")),o.Bb(3),o.mc("data",e)}}function Ye(e,t){if(1&e&&(o.Rb(0),o.Bc(1,Xe,5,8,"ng-container",5),o.Qb()),2&e){const e=o.gc().$implicit,t=o.gc(2);o.Bb(1),o.mc("ngForOf",e)("ngForTrackBy",t.identify)}}function Je(e,t){1&e&&(o.Tb(0,"div",10),o.Dc(1," There are no messages yet "),o.Sb())}function Qe(e,t){if(1&e&&(o.Rb(0),o.Bc(1,Ye,2,2,"ng-container",3),o.Bc(2,Je,2,0,"ng-template",null,4,o.Cc),o.Qb()),2&e){const e=t.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",e.length)("ngIfElse",n)}}function Ze(e,t){if(1&e&&(o.Tb(0,"div",2),o.Bc(1,Qe,4,2,"ng-container",1),o.hc(2,"async"),o.Sb()),2&e){const e=o.gc();o.Bb(1),o.mc("ngIf",o.ic(2,1,e.chatMessagesDataService.messages$))}}function et(e,t){1&e&&(o.Rb(0),o.Tb(1,"div",11),o.Pb(2,"mat-spinner"),o.Sb(),o.Qb())}let tt=(()=>{class e{constructor(e,t){this.chatMessagesDataService=e,this.roomDateService=t,this.subscription=new r.a}ngOnInit(){}ngAfterViewInit(){this.chatMessagesDataService.messages$.pipe(Object(Ve.a)(e=>e.length>1),Object(c.a)(e=>{const t=this.messages.toArray()[e.length];t&&t.nativeElement.scrollIntoView({block:"nearest",behavior:"smooth"})}),Object(l.a)(this.subscription)).subscribe()}identify(e,t){return t.chatMessageId}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(fe),o.Ob(S))},e.\u0275cmp=o.Ib({type:e,selectors:[["messages-container"]],viewQuery:function(e,t){if(1&e&&o.Gc(Ke,1,o.l),2&e){let e;o.tc(e=o.ec())&&(t.messages=e)}},decls:4,vars:6,consts:[["class","messages-container",4,"ngIf"],[4,"ngIf"],[1,"messages-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],["class","divider-container",4,"ngIf"],[3,"data"],[1,"divider-container"],[1,"date"],[1,"data-empty"],[1,"data-loading"]],template:function(e,t){1&e&&(o.Bc(0,Ze,3,3,"div",0),o.hc(1,"async"),o.Bc(2,et,3,0,"ng-container",1),o.hc(3,"async")),2&e&&(o.mc("ngIf",!o.ic(1,2,t.roomDateService.isLoading$)),o.Bb(2),o.mc("ngIf",o.ic(3,4,t.roomDateService.isLoading$)))},directives:[i.m,i.l,Ke,Ge.b],pipes:[i.b,i.e],styles:[".messages-container[_ngcontent-%COMP%]{padding:10px 20px;position:relative}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]{position:sticky;top:10px;display:flex;justify-content:center}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding:0 15px;background-color:#fff8dc;border-radius:5px;font-size:13px;position:relative;top:7px}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%], .messages-container[_ngcontent-%COMP%]   .data-loading[_ngcontent-%COMP%]{position:absolute;top:150px;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%]{font-size:22px}.data-loading[_ngcontent-%COMP%]{position:absolute;top:60px;left:0;width:100%;height:100%;display:flex;align-items:flex-start;justify-content:center}"]}),e})();var nt=n("zP0r"),it=n("u47x"),st=n("kmnG"),rt=n("qFsG"),ot=n("3Pt+"),at=n("bTqV"),ct=n("NFeN");const lt=function(e){return{disabled:e}};let ht=(()=>{class e{constructor(e,t,n,i){this.chatMessageDataService=e,this.roomDataService=t,this.userDataService=n,this.socketService=i,this.subscription=new r.a,this.messageText="",this._typingActive=new a.a(!1),this.userDataService.user$.pipe(Object(c.a)(e=>this.user=e)).subscribe(),this._typingActive.pipe(Object(nt.a)(1),Object(me.a)(300),Object(c.a)(()=>this.socketService.sendTyping(this.user))).subscribe()}sendChatMessage(){this.roomDataService.selectedRoom$.pipe(Object(h.a)(1),Object(Ve.a)(e=>!!e),Object(u.a)(e=>({chatMessageId:Date.now().toString(),fromUser:this.user,createdAt:Date.now(),text:this.messageText,roomId:e.roomId})),Object(c.a)(e=>this.chatMessageDataService.addChatMessage(e)),Object(c.a)(()=>this.messageText=""),Object(l.a)(this.subscription)).subscribe()}sendTypingActive(){this._typingActive.next(!0)}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(fe),o.Ob(S),o.Ob(C.a),o.Ob(v))},e.\u0275cmp=o.Ib({type:e,selectors:[["typing-container"]],decls:6,vars:5,consts:[["cdkTrapFocus","",1,"typing-container"],["appearance","outline"],["matInput","","type","text","autocomplete","off",3,"ngModel","keyup","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"disabled","click"],[1,"send-text",3,"ngClass"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"mat-form-field",1),o.Tb(2,"input",2),o.dc("keyup",function(){return t.sendTypingActive()})("ngModelChange",function(e){return t.messageText=e})("keyup.enter",function(){return t.messageText?t.sendChatMessage():null}),o.Sb(),o.Tb(3,"button",3),o.dc("click",function(){return t.sendChatMessage()}),o.Tb(4,"mat-icon",4),o.Dc(5,"play_circle_filled"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.mc("ngModel",t.messageText),o.Bb(1),o.mc("disabled",!t.messageText),o.Bb(1),o.mc("ngClass",o.qc(3,lt,!t.messageText)))},directives:[it.d,st.c,rt.a,ot.a,ot.j,ot.m,at.b,st.g,ct.a,i.k],styles:[".typing-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding:5px;margin:5px;justify-content:space-around;align-items:center;border:1px solid #000;border-radius:43px;background-color:#f0f8ff}.typing-container[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.typing-container[_ngcontent-%COMP%]     .mat-form-field{width:80%}.typing-container[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.typing-container[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.typing-container[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:200px}.typing-container[_ngcontent-%COMP%]   .send-text[_ngcontent-%COMP%]{color:#405d77;font-size:26px!important}.typing-container[_ngcontent-%COMP%]   .send-text.disabled[_ngcontent-%COMP%]{opacity:.4}"]}),e})(),pt=(()=>{class e{constructor(e,t,n){this.roomDataService=e,this.historyDataService=t,this.chatMessagesDataService=n}saveChatToHistory(){this.historyDataService.saveChatToHistory()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(S),o.Ob(ge),o.Ob(fe))},e.\u0275cmp=o.Ib({type:e,selectors:[["chat-view"]],decls:9,vars:3,consts:[[1,"chat-view-container"],[1,"chat-messages-container"],[1,"chat-title"],[1,"user-list"]],template:function(e,t){if(1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"div"),o.Dc(4),o.hc(5,"async"),o.Sb(),o.Pb(6,"user-list",3),o.Sb(),o.Pb(7,"messages-container"),o.Pb(8,"typing-container"),o.Sb(),o.Sb()),2&e){let e=null;o.Bb(4),o.Fc("Chat Room",": "+((null==(e=o.ic(5,1,t.roomDataService.selectedRoom$))?null:e.roomName)||"")," ")}},directives:[He,tt,ht],pipes:[i.b],styles:[".chat-view-container[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;box-sizing:border-box;background-color:#b0c4de}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;align-self:center;padding:0 20px;position:absolute;top:-14px;background-color:#b0c4de;display:flex;flex-direction:column;align-items:center}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .save-history[_ngcontent-%COMP%]{height:40px;width:40px}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]{position:absolute;top:34px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]{border:2px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;position:relative;padding-top:25px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   messages-container[_ngcontent-%COMP%]{flex-grow:1;overflow:auto}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   typing-container[_ngcontent-%COMP%]{flex-grow:0}  .mat-button-wrapper{padding:0!important}"]}),e})();const ut=function(e){return{selected:e}};function dt(e,t){if(1&e){const e=o.Ub();o.Rb(0),o.Tb(1,"div",7),o.dc("click",function(){o.vc(e);const n=t.$implicit;return o.gc(4).roomSelected(n.roomId)}),o.hc(2,"async"),o.Dc(3),o.Sb(),o.Qb()}if(2&e){const e=t.$implicit,n=o.gc(4);let i=null;o.Bb(1),o.mc("ngClass",o.qc(4,ut,(null==(i=o.ic(2,2,n.roomDataService.selectedRoom$))?null:i.roomId)===e.roomId)),o.Bb(2),o.Fc(" ",e.roomName," ")}}function ft(e,t){if(1&e&&(o.Rb(0),o.Bc(1,dt,4,6,"ng-container",6),o.Qb()),2&e){const e=o.gc().$implicit,t=o.gc(2);o.Bb(1),o.mc("ngForOf",e)("ngForTrackBy",t.identify)}}function gt(e,t){1&e&&(o.Tb(0,"div",8),o.Dc(1," There are no rooms "),o.Sb())}function mt(e,t){if(1&e&&(o.Rb(0),o.Bc(1,ft,2,2,"ng-container",4),o.Bc(2,gt,2,0,"ng-template",null,5,o.Cc),o.Qb()),2&e){const e=t.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",e.length)("ngIfElse",n)}}function bt(e,t){if(1&e&&(o.Tb(0,"div",2),o.Tb(1,"div",3),o.Bc(2,mt,4,2,"ng-container",1),o.hc(3,"async"),o.Sb(),o.Sb()),2&e){const e=o.gc();o.Bb(2),o.mc("ngIf",o.ic(3,1,e.roomDataService.roomList$))}}function yt(e,t){1&e&&(o.Rb(0),o.Tb(1,"div",9),o.Pb(2,"mat-spinner"),o.Sb(),o.Qb())}let vt=(()=>{class e{constructor(e){this.roomDataService=e}ngOnInit(){}roomSelected(e){this.roomDataService.setSelectedRoom(e)}identify(e,t){return t.roomId}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(S))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-rooms"]],decls:4,vars:6,consts:[["class","rooms",4,"ngIf"],[4,"ngIf"],[1,"rooms"],[1,"rooms-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"room-data-container",3,"ngClass","click"],[1,"data-empty"],[1,"data-loading"]],template:function(e,t){1&e&&(o.Bc(0,bt,4,3,"div",0),o.hc(1,"async"),o.Bc(2,yt,3,0,"ng-container",1),o.hc(3,"async")),2&e&&(o.mc("ngIf",!o.ic(1,2,t.roomDataService.isLoading$)),o.Bb(2),o.mc("ngIf",o.ic(3,4,t.roomDataService.isLoading$)))},directives:[i.m,i.l,i.k,Ge.b],pipes:[i.b],styles:[".rooms[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;background-color:#bbc0c5}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]{border:1.5px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;padding-top:25px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]{margin:5px 10px;border:1px solid #f5f5f5;border-radius:10px;height:100%;padding:5px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#60819c;font-weight:600;border:1px solid grey}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]:hover{background-color:#b0c4de}"]}),e})(),Ct=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["chat-manager"]],decls:1,vars:0,template:function(e,t){1&e&&o.Pb(0,"app-rooms")},directives:[vt],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),e})();const St=[{path:"",component:(()=>{class e{constructor(e,t){this.roomDataService=e,this.historyDataService=t,this.subscription=new r.a}ngOnInit(){this.loadData("")}loadData(e){this.roomDataService.updateData()}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(S),o.Ob(ge))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-main-view"]],decls:7,vars:3,consts:[[2,"width","100%","height","100%"],["direction","horizontal",3,"gutterSize"],[3,"size"],[1,"chat-manager-container"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"as-split",1),o.Tb(2,"as-split-area",2),o.Pb(3,"chat-view"),o.Sb(),o.Tb(4,"as-split-area",2),o.Tb(5,"div",3),o.Pb(6,"chat-manager"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.mc("gutterSize",5),o.Bb(1),o.mc("size",70),o.Bb(2),o.mc("size",30))},directives:[Te,Ie,pt,Ct],styles:[".as-split-gutter{background-color:#6a85b7!important}.chat-manager-container[_ngcontent-%COMP%]{display:flex;height:100%}"]}),e})(),pathMatch:"full"}];let xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({imports:[[s.c.forChild(St)],s.c]}),e})();var wt=n("PCNd"),Ot=n("1kSV"),_t=n("GU7r"),At=n("+rOU"),kt=n("FKr1");n("R1ws"),n("quSY"),n("VRyK"),n("xgIS"),n("LRne"),n("PqYM"),n("R0Ic"),n("JX91"),n("/uUt"),n("8LU1"),n("nLfN"),n("FtGj"),n("cH1L"),n("vxfF");let Et=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({imports:[[i.c,kt.e,At.f,kt.i,_t.c,it.a],kt.e]}),e})(),Pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({imports:[[i.c,xt,ze,wt.a,Ot.a,Et]]}),e})()},"0z79":function(e,t,n){const i=n("AdPF"),s=n("CUme"),r=n("cpc2"),{pick:o}=n("Eexf"),a=n("2UHX"),c=n("NOtv")("engine.io-client:polling-xhr");function l(){}const h=null!=new i({xdomain:!1}).responseType;class p extends r{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=o(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new i(e);try{c("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(n){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{t.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=()=>{this.onLoad()},t.onerror=()=>{this.onError(t.responseText)}):t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():setTimeout(()=>{this.onError("number"==typeof t.status?t.status:0)},0))},c("xhr data %s",this.data),t.send(this.data)}catch(n){return void setTimeout(()=>{this.onError(n)},0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function u(){for(let e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}p.requestsCount=0,p.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",u):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",u,!1)),e.exports=class extends s{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}this.supportsBinary=h&&!(e&&e.forceBase64)}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",e=>{this.onError("xhr post error",e)})}doPoll(){c("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=e}},e.exports.Request=p},"2UHX":function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2pII":function(e,t,n){const i=n("akSB"),s=n("cpc2"),r=n("NOtv")("engine.io-client:socket"),o=n("KoVT"),a=n("Uxeu"),c=n("TypT");class l extends s{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){r('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=o.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return r("options: %j",n),new i[e](n)}open(){let e;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout(()=>{this.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return r("error while creating transport: %s",t),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){r("setting transport %s",e.name),this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){r('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;l.priorWebsocketSuccess=!1;const i=()=>{n||(r('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",i=>{if(!n)if("pong"===i.type&&"probe"===i.data){if(r('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,r('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||"closed"!==this.readyState&&(r("changing transport and sending upgrade packet"),p(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emit("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{r('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,this.emit("upgradeError",n)}}))};function s(){n||(n=!0,p(),t.close(),t=null)}const o=n=>{const i=new Error("probe error: "+n);i.transport=t.name,s(),r('probe transport "%s" failed because of error: %s',e,n),this.emit("upgradeError",i)};function a(){o("transport closed")}function c(){o("socket closed")}function h(e){t&&e.name!==t.name&&(r('"%s" works - aborting "%s"',e.name,t.name),s())}const p=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",h)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",h),t.open()}onOpen(){if(r("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){r("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emit("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),r("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.removeListener("upgrade",t),this.removeListener("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){r("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(r('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}l.priorWebsocketSuccess=!1,l.protocol=o.protocol,e.exports=l},"3JDX":function(e,t,n){e.exports=function(e){function t(e){let n,s=null;function r(...e){if(!r.enabled)return;const i=r,s=Number(new Date);i.diff=s-(n||s),i.prev=n,i.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";o++;const r=t.formatters[s];return"function"==typeof r&&(n=r.call(i,e[o]),e.splice(o,1),o--),n}),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=i,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>null===s?t.enabled(e):s,set:e=>{s=e}}),"function"==typeof t.init&&t.init(r),r}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),s=i.length;for(n=0;n<s;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},"4Trj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const i=n("cpc2");t.StrictEventEmitter=class extends i{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}},AdPF:function(e,t,n){const i=n("yeub"),s=n("2UHX");e.exports=function(e){const t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new(s[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}},Aplp:function(e,t,n){"use strict";var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},o=0,a=0;function c(e){var t="";do{t=s[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==i?(o=0,i=e):e+"."+c(o++)}for(;a<64;a++)r[s[a]]=a;l.encode=c,l.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+r[e.charAt(a)];return t},e.exports=l},Byvj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},C2QD:function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},CIKq:function(e,t,n){const i=n("Gbct"),s=n("KoVT"),r=n("TypT"),o=n("Aplp"),{pick:a}=n("Eexf"),{WebSocket:c,usingBrowserWebSocket:l,defaultBinaryType:h,nextTick:p}=n("X071"),u=n("NOtv")("engine.io-client:websocket"),d="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends i{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=d?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=l&&!d?t?new c(e,t):new c(e):new c(e,t,n)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||h,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;s.encodePacket(n,this.supportsBinary,e=>{const t={};!l&&(n.options&&(t.compress=n.options.compress),this.opts.perMessageDeflate)&&("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1);try{l?this.ws.send(e):this.ws.send(e,t)}catch(s){u("websocket closed before onclose event")}i&&p(()=>{this.writable=!0,this.emit("drain")})})}}onClose(){i.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=o()),this.supportsBinary||(e.b64=1),e=r.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!c||"__initialize"in c&&this.name===f.prototype.name)}}e.exports=f},CUme:function(e,t,n){const i=n("Gbct"),s=n("TypT"),r=n("KoVT"),o=n("Aplp"),a=n("NOtv")("engine.io-client:polling");e.exports=class extends i{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){a("pre-pause polling complete"),--e||t()})),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",function(){a("pre-pause writing complete"),--e||t()}))}else t()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){a("polling got data %s",e),r.decodePayload(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,r.encodePayload(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=o()),this.supportsBinary||e.sid||(e.b64=1),e=s.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},Cl5A:function(e,t,n){const i=n("CUme"),s=n("2UHX"),r=/\n/g,o=/\\n/g;let a;e.exports=class extends i{constructor(e){super(e),this.query=this.query||{},a||(a=s.___eio=s.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=e=>{this.onError("jsonp poll error",e)};const t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)}doWrite(e,t){let n;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function i(){s(),t()}this.form.action=this.uri();const s=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(e){this.onError("jsonp polling iframe removal error",e)}try{n=document.createElement('<iframe src="javascript:0" name="'+this.iframeId+'">')}catch(e){n=document.createElement("iframe"),n.name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};s(),e=e.replace(o,"\\\n"),this.area.value=e.replace(r,"\\n");try{this.form.submit()}catch(a){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&i()}:this.iframe.onload=i}}},Eexf:function(e,t){e.exports.pick=(e,...t)=>t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})},FGiv:function(e,t){var n=1e3,i=60*n,s=60*i,r=24*s;function o(e,t,n,i){var s=t>=1.5*n;return Math.round(e/n)+" "+i+(s?"s":"")}e.exports=function(e,t){t=t||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&isFinite(e))return t.long?(a=e,(c=Math.abs(a))>=r?o(a,c,r,"day"):c>=s?o(a,c,s,"hour"):c>=i?o(a,c,i,"minute"):c>=n?o(a,c,n,"second"):a+" ms"):function(e){var t=Math.abs(e);return t>=r?Math.round(e/r)+"d":t>=s?Math.round(e/s)+"h":t>=i?Math.round(e/i)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},Gbct:function(e,t,n){const i=n("KoVT"),s=n("cpc2"),r=n("NOtv")("engine.io-client:transport");e.exports=class extends s{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):r("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},KFhd:function(e,t,n){const{PACKET_TYPES:i}=n("gC2B"),s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,o=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=({type:e,data:t},n,a)=>{return s&&t instanceof Blob?n?a(t):o(t,a):r&&(t instanceof ArrayBuffer||(c=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?a(t instanceof ArrayBuffer?t:t.buffer):o(new Blob([t]),a):a(i[e]+(t||""));var c}},KoVT:function(e,t,n){const i=n("KFhd"),s=n("fP3r"),r=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:(e,t)=>{const n=e.length,s=new Array(n);let o=0;e.forEach((e,a)=>{i(e,!1,e=>{s[a]=e,++o===n&&t(s.join(r))})})},decodePacket:s,decodePayload:(e,t)=>{const n=e.split(r),i=[];for(let r=0;r<n.length;r++){const e=s(n[r],t);if(i.push(e),"error"===e.type)break}return i}}},NOtv:function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(s=i))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n("3JDX")(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},PVQj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const i=n("lKxJ"),s=n("eFEk"),r=n("ggWO"),o=n("Byvj"),a=n("C2QD"),c=n("4Trj"),l=n("NOtv")("socket.io-client:manager");t.Manager=class extends c.StrictEventEmitter{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||r;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(l("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=o.on(t,"open",function(){n.onopen(),e&&e()}),r=o.on(t,"error",t=>{l("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const e=this._timeout;l("connect attempt will timeout after %d",e),0===e&&s();const n=setTimeout(()=>{l("connect attempt timed out after %d",e),s(),t.close(),t.emit("error",new Error("timeout"))},e);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}return this.subs.push(s),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){l("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(o.on(e,"ping",this.onping.bind(this)),o.on(e,"data",this.ondata.bind(this)),o.on(e,"error",this.onerror.bind(this)),o.on(e,"close",this.onclose.bind(this)),o.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){l("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new s.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return void l("socket %s is still active, skipping close",n);this._close()}_packet(e){l("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){l("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){l("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){l("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=setTimeout(()=>{e.skipReconnect||(l("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(l("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(l("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}},TypT:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,s=n.length;i<s;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},Uxeu:function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t,s,r=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var c,l=n.exec(e||""),h={},p=14;p--;)h[i[p]]=l[p]||"";return-1!=o&&-1!=a&&(h.source=r,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=(s=(t=h.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=t.substr(0,1)&&0!==t.length||s.splice(0,1),"/"==t.substr(t.length-1,1)&&s.splice(s.length-1,1),s),h.queryKey=(c={},h.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(c[t]=n)}),c),h}},X071:function(e,t,n){const i=n("2UHX");e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:"function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):e=>setTimeout(e,0)}},akSB:function(e,t,n){const i=n("AdPF"),s=n("0z79"),r=n("Cl5A"),o=n("CIKq");t.polling=function(e){let t,n=!1,o=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let i=location.port;i||(i=t?443:80),n=e.hostname!==location.hostname||i!==e.port,o=e.secure!==t}if(e.xdomain=n,e.xscheme=o,t=new i(e),"open"in t&&!e.forceJSONP)return new s(e);if(!a)throw new Error("JSONP disabled");return new r(e)},t.websocket=o},cpc2:function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<i.length;s++)if((n=i[s])===t||n.fn===t){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var s=(n=n.slice(0)).length;i<s;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},eFEk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const i=n("ggWO"),s=n("Byvj"),r=n("4Trj"),o=n("NOtv")("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});t.Socket=class extends r.StrictEventEmitter{constructor(e,t,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[s.on(e,"open",this.onopen.bind(this)),s.on(e,"packet",this.onpacket.bind(this)),s.on(e,"error",this.onerror.bind(this)),s.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(a.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:i.PacketType.EVENT,data:t,options:{}};return n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),!this.flags.volatile||this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):o("discard packet as the transport is not currently writable"),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){o("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this.packet({type:i.PacketType.CONNECT,data:e})}):this.packet({type:i.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){o("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case i.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case i.PacketType.EVENT:case i.PacketType.BINARY_EVENT:this.onevent(e);break;case i.PacketType.ACK:case i.PacketType.BINARY_ACK:this.onack(e);break;case i.PacketType.DISCONNECT:this.ondisconnect();break;case i.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];o("emitting event %j",t),null!=e.id&&(o("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,o("sending ack %j",s),t.packet({type:i.PacketType.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(o("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):o("bad ack %s",e.id)}onconnect(e){o("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:i.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},f7yz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const i=n("Uxeu"),s=n("NOtv")("socket.io-client:url");t.url=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),s("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}},fP3r:function(e,t,n){const{PACKET_TYPES_REVERSE:i,ERROR_PACKET:s}=n("gC2B");let r;"function"==typeof ArrayBuffer&&(r=n("g5Dd"));const o=(e,t)=>{if(r){const n=r.decode(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:o(e.substring(1),t)}:i[n]?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:s}},g5Dd:function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),s=i.length,r="";for(n=0;n<s;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(t){var n,i,s,r,o,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),p=new Uint8Array(h);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),s=e.indexOf(t[n+1]),r=e.indexOf(t[n+2]),o=e.indexOf(t[n+3]),p[l++]=i<<2|s>>4,p[l++]=(15&s)<<4|r>>2,p[l++]=(3&r)<<6|63&o;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},gC2B:function(e,t){const n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";const i=Object.create(null);Object.keys(n).forEach(e=>{i[n[e]]=e}),e.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},ggWO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const i=n("cpc2"),s=n("qKib"),r=n("ymUC"),o=n("NOtv")("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={})),t.Encoder=class{encode(e){return o("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!r.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),o("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=s.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}};class c extends i{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new l(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!r.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(i,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(t));if(!c.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return o("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=c;class l{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},jifJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;const i=n("f7yz"),s=n("PVQj"),r=n("NOtv")("socket.io-client");e.exports=t=a;const o=t.managers={};function a(e,t){"object"==typeof e&&(t=e,e=void 0);const n=i.url(e,(t=t||{}).path||"/socket.io"),a=n.source,c=n.id;let l;return t.forceNew||t["force new connection"]||!1===t.multiplex||o[c]&&n.path in o[c].nsps?(r("ignoring socket cache for %s",a),l=new s.Manager(a,t)):(o[c]||(r("new io instance for %s",a),o[c]=new s.Manager(a,t)),l=o[c]),n.query&&!t.query&&(t.query=n.queryKey),l.socket(n.path,t)}t.io=a;var c=n("ggWO");Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=a;var l=n("PVQj");Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return l.Manager}});var h=n("eFEk");Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return h.Socket}}),t.default=a},lKxJ:function(e,t,n){const i=n("2pII");e.exports=(e,t)=>new i(e,t),e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n("Gbct"),e.exports.transports=n("akSB"),e.exports.parser=n("KoVT")},qKib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const i=n("ymUC");function s(e,t){if(!e)return e;if(i.isBinary(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=s(e[i],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const i in e)e.hasOwnProperty(i)&&(n[i]=s(e[i],t));return n}return e}function r(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=r(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=r(e[n],t));return e}t.deconstructPacket=function(e){const t=[],n=e;return n.data=s(e.data,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=r(e.data,t),e.attachments=void 0,e}},yeub:function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},ymUC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const i="function"==typeof ArrayBuffer,s=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function a(e){return i&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||r&&e instanceof Blob||o&&e instanceof File}t.isBinary=a,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1}if(a(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return!0;return!1}}}]);