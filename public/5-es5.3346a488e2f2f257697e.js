!function(){function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(t,n,i||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(c){a=!0,r=c}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0vWp":function(e,t,n){"use strict";n.r(t),n.d(t,"MainViewModule",function(){return en});var i,r,o,s=n("ofXK"),u=n("tyNb"),l=n("XNiG"),p=n("fXoL"),d=n("2Vo4"),g=n("vkgz"),v=n("1G5W"),m=n("IzEk"),y=n("nYR2"),b=n("lJxs"),k=n("zp1y"),C=n("tk/3"),w=((i=function(){function e(t){h(this,e),this.http=t}return f(e,[{key:"getRooms",value:function(){return this.http.get("api/room")}}]),e}()).\u0275fac=function(e){return new(e||i)(p.ac(C.b))},i.\u0275prov=p.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),S=n("HDdC"),O=n("jifJ"),_=n("AytR"),x=((r=function(){function e(){h(this,e),this.socket=_.a.SOCKET_ENDPOINT?Object(O.io)(_.a.SOCKET_ENDPOINT):Object(O.io)()}return f(e,[{key:"joinRoom",value:function(e){console.log("join-to-room",e),this.socket.emit("join-to-room",e)}},{key:"sendMessage",value:function(e){console.log("sendMessage",e),this.socket.emit("message",e)}},{key:"sendTyping",value:function(e){this.socket.emit("user-typing",e)}},{key:"getMessage",value:function(){var e=this;return new S.a(function(t){return e.socket.on("new-message",function(e){t.next(e)}),function(){console.log("disconect function"),e.socket.disconnect()}})}},{key:"getUsers",value:function(){var e=this;return new S.a(function(t){return e.socket.on("users-in-room",function(e){t.next(e)}),function(){console.log("disconect function"),e.socket.disconnect()}})}},{key:"getTypingUser",value:function(){var e=this;return new S.a(function(t){return e.socket.on("typer",function(e){t.next(e)}),function(){console.log("disconect function"),e.socket.disconnect()}})}},{key:"disconnect",value:function(){console.log("disconect function"),this.socket.emit("disconnect")}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275prov=p.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),A=n("8tlj"),E=((o=function(){function e(t,n,i){h(this,e),this.roomService=t,this.socketService=n,this.userDataService=i,this._roomList=new d.a([]),this._isLoading=new d.a(!1),this._usersInRoom=new d.a([]),this._typersInRoom=new d.a([]),this._selectedRoom=new d.a(void 0),this.subscription=new l.a,this.roomList$=this._roomList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedRoom$=this._selectedRoom.asObservable(),this.usersInRoom$=this._usersInRoom.asObservable(),this.typersInRoom$=this._typersInRoom.asObservable(),this.initListeners()}return f(e,[{key:"initListeners",value:function(){var e=this;this.socketService.getUsers().pipe(Object(g.a)(function(t){return e._usersInRoom.next(t)}),Object(g.a)(function(e){return console.log("users in room are: ",e)}),Object(v.a)(this.subscription)).subscribe(),this.socketService.getTypingUser().pipe(Object(g.a)(function(t){var n=e._typersInRoom.value.filter(function(e){return e.id!==t.id});e._typersInRoom.next([].concat(c(n),[t]))}),Object(g.a)(function(t){return setTimeout(function(){var n=e._typersInRoom.value.filter(function(e){return e.id!==t.id});e._typersInRoom.next(c(n))},3e3)}),Object(g.a)(function(e){return console.log("typer is: ",e)}),Object(v.a)(this.subscription)).subscribe()}},{key:"updateData",value:function(){var e=this;this._isLoading.next(!0),this.roomService.getRooms().pipe(Object(g.a)(function(t){return e._roomList.next(t)}),Object(g.a)(function(t){return e.setSelectedRoom(t[0].roomId)}),Object(m.a)(1),Object(y.a)(function(){return e._isLoading.next(!1)})).subscribe()}},{key:"setSelectedRoom",value:function(e){var t,n=this;(null===(t=this._selectedRoom.value)||void 0===t?void 0:t.roomId)!==e&&(this._isLoading.next(!0),this._roomList.pipe(Object(b.a)(function(t){return t.find(function(t){return t.roomId===e})}),Object(g.a)(function(e){return n._selectedRoom.next(e)}),Object(k.a)(this.userDataService.user$),Object(g.a)(function(t){var i=a(t,2),r=(i[0],i[1]);return n.socketService.joinRoom({roomId:e,user:r})}),Object(m.a)(1),Object(y.a)(function(){return n._isLoading.next(!1)})).subscribe())}},{key:"ngOnDestroy",value:function(){console.log("room data service destroy"),this.subscription.next(),this.subscription.complete(),this.socketService.disconnect()}}]),e}()).\u0275fac=function(e){return new(e||o)(p.ac(w),p.ac(x),p.ac(A.a))},o.\u0275prov=p.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),P=n("itXk"),T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},I=function(){return(I=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function R(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function z(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}function B(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=B(e[n],t[n]));return e}var D=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,i))}},e}();function j(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var N=function(e){function t(n,i,r){var o=e.call(this,i)||this;return o.code=n,o.customData=r,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,F.prototype.create),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),F=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0]||{},r=this.service+"/"+e,o=this.errors[e],s=o?L(o,i):"Error",a=this.serviceName+": "+s+" ("+r+").",c=new N(r,a,i);return c},e}();function L(e,t){return e.replace(U,function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"})}var U=/\{\$([^}]+)}/g;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function H(e,t){var n=new V(e,t);return n.subscribe.bind(n)}var V=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in e&&"function"==typeof e[r])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=q),void 0===i.error&&(i.error=q),void 0===i.complete&&(i.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}}),this.observers.push(i),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function q(){}var K,G=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),W=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new D;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(u){}try{for(var i=R(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var o=M(r.value,2),s=o[1],a=this.normalizeInstanceIdentifier(o[0]);try{var c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch(u){}}}catch(l){t={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,n=function(){var e;return function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(z(z([],M(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),M(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(i,r){function o(e){try{a(n.next(e))}catch(t){r(t)}}function s(e){try{a(n.throw(e))}catch(t){r(t)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e="[DEFAULT]"),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,r=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:r});try{for(var a=R(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var u=M(c.value,2),l=u[1];o===this.normalizeInstanceIdentifier(u[0])&&l.resolve(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);var o=this.instances.get(i);return o&&e(o,i),function(){r.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,r=this.onInitCallbacks.get(t);if(r)try{for(var o=R(r),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(e,t)}catch(c){}}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,i=e.options,r=void 0===i?{}:i,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:r}),this.instances.set(n,o),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e="[DEFAULT]"),this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),X=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new W(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function Y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var J,Q=[],Z=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),ee={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},te=Z.INFO,ne=((K={})[Z.DEBUG]="log",K[Z.VERBOSE]="log",K[Z.INFO]="info",K[Z.WARN]="warn",K[Z.ERROR]="error",K),ie=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var r=(new Date).toISOString(),o=ne[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,Y(["["+r+"]  "+e.name+":"],n))}},re=function(){function e(e){this.name=e,this._logLevel=te,this._logHandler=ie,this._userLogHandler=null,Q.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Z))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?ee[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Y([this,Z.DEBUG],e)),this._logHandler.apply(this,Y([this,Z.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Y([this,Z.VERBOSE],e)),this._logHandler.apply(this,Y([this,Z.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Y([this,Z.INFO],e)),this._logHandler.apply(this,Y([this,Z.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Y([this,Z.WARN],e)),this._logHandler.apply(this,Y([this,Z.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Y([this,Z.ERROR],e)),this._logHandler.apply(this,Y([this,Z.ERROR],e))},e}();function oe(e){Q.forEach(function(t){t.setLogLevel(e)})}var se,ae=((J={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",J["bad-app-name"]="Illegal App name: '{$appName}",J["duplicate-app"]="Firebase App named '{$appName}' already exists",J["app-deleted"]="Firebase App named '{$appName}' already deleted",J["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",J["invalid-log-argument"]="First argument to `onLog` must be null or a function.",J),ce=new F("app","Firebase",ae),ue=((se={})["@firebase/app"]="fire-core",se["@firebase/analytics"]="fire-analytics",se["@firebase/app-check"]="fire-app-check",se["@firebase/auth"]="fire-auth",se["@firebase/database"]="fire-rtdb",se["@firebase/functions"]="fire-fn",se["@firebase/installations"]="fire-iid",se["@firebase/messaging"]="fire-fcm",se["@firebase/performance"]="fire-perf",se["@firebase/remote-config"]="fire-rc",se["@firebase/storage"]="fire-gcs",se["@firebase/firestore"]="fire-fst",se["fire-js"]="fire-js",se["firebase-wrapper"]="fire-js-all",se),le=new re("@firebase/app"),he=function(){function e(e,t,n){var i=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=B(void 0,e),this.container=new X(t.name),this._addComponent(new G("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return i._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,t){var n;void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_();var i=this.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){le.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ce.create("app-deleted",{appName:this.name_})},e}();he.prototype.name&&he.prototype.options||he.prototype.delete||console.log("dc");var pe=function e(){var t=function(e){var t={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw ce.create("bad-app-name",{appName:String(s)});if($(t,s))throw ce.create("duplicate-app",{appName:s});var a=new e(n,o,i);return t[s]=a,a},app:r,registerVersion:function(e,t,n){var i,r=null!==(i=ue[e])&&void 0!==i?i:e;n&&(r+="-"+n);var s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){var c=['Unable to register library "'+r+'" with version "'+t+'":'];return s&&c.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),s&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void le.warn(c.join(" "))}o(new G(r+"-version",function(){return{library:r,version:t}},"VERSION"))},setLogLevel:oe,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw ce.create("invalid-log-argument");!function(e,t){for(var n=function(n){var i=null;t&&t.level&&(i=ee[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var s=r.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:Z[n].toLowerCase(),message:s,args:r,type:t.name})}},i=0,r=Q;i<r.length;i++)n(r[i])}(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function r(e){if(!$(t,e=e||"[DEFAULT]"))throw ce.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return le.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?i[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(e){if(void 0===e&&(e=r()),"function"!=typeof e[s])throw ce.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&B(a,o.serviceProps),i[s]=a,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,u=Object.keys(t);c<u.length;c++)t[u[c]]._addComponent(o);return"PUBLIC"===o.type?i[s]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),r.App=e,i}(he);return t.INTERNAL=I(I({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){B(t,e)},createSubscribe:H,ErrorFactory:F,deepExtend:B}),t}(),fe=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null}).filter(function(e){return e}).join(" ")},e}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ge=pe.initializeApp;pe.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return j()&&le.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ge.apply(void 0,e)};var ve,me=pe;(ve=me).INTERNAL.registerComponent(new G("platform-logger",function(e){return new fe(e)},"PRIVATE")),ve.registerVersion("@firebase/app","0.6.30",void 0),ve.registerVersion("fire-js","");var ye=me;ye.registerVersion("firebase","8.10.0","app"),ye.SDK_VERSION="8.10.0";var be,ke,Ce,we,Se=((we=function(){function e(){h(this,e),this.initFireBaseApp()}return f(e,[{key:"initFireBaseApp",value:function(){ye.initializeApp({apiKey:"AIzaSyDwghdTsWkYjoe7s-hiVntkOEp8odtRq5Q",authDomain:"angular-chat-room-c5673.firebaseapp.com",projectId:"angular-chat-room-c5673",storageBucket:"angular-chat-room-c5673.appspot.com",messagingSenderId:"767651941036",appId:"1:767651941036:web:f35327895c7ce933afad09"})}},{key:"loadHistory",value:function(){var e=this;return this.historyTable=ye.database().ref("history"),new S.a(function(t){e.historyTable.on("value",function(e){var n=e.val();console.log(n),t.next(n)})})}},{key:"saveChatToHistoryTable",value:function(e,t,n){var i={historyId:Date.now().toString(),user:t,messages:e,roomId:n,savedAt:Date.now()};ye.database().ref("history/"+i.historyId).set(i)}}]),e}()).\u0275fac=function(e){return new(e||we)},we.\u0275prov=p.Kb({token:we,factory:we.\u0275fac,providedIn:"root"}),we),Oe=((Ce=function(){function e(t){h(this,e),this.http=t}return f(e,[{key:"getChatMessages",value:function(e){return this.http.get("api/chat-message/".concat(e))}},{key:"addChatMessage",value:function(e){return this.http.post("api/chat-message",e)}}]),e}()).\u0275fac=function(e){return new(e||Ce)(p.ac(C.b))},Ce.\u0275prov=p.Kb({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce),_e=((ke=function(){function e(t,n,i){var r=this;h(this,e),this.chatMessageService=t,this.socketService=n,this.roomDataService=i,this._messages=new d.a([]),this._isLoading=new d.a(!1),this.subscription=new l.a,this.messages$=this._messages.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.initSocketListener(),this.roomDataService.selectedRoom$.pipe(Object(g.a)(function(){return r._messages.next([])})).subscribe()}return f(e,[{key:"initSocketListener",value:function(){var e=this;this.socketService.getMessage().pipe(Object(g.a)(function(e){return console.log("addChatMessage",e)}),Object(g.a)(function(t){return e._messages.next([].concat(c(e._messages.value),[t]))}),Object(v.a)(this.subscription)).subscribe()}},{key:"updateData",value:function(e){var t=this;this._isLoading.next(!0),this.chatMessageService.getChatMessages(e).pipe(Object(g.a)(function(e){return t._messages.next(e)}),Object(m.a)(1),Object(y.a)(function(){return t._isLoading.next(!1)})).subscribe()}},{key:"addChatMessage",value:function(e){console.log("addChatMessage"),this.socketService.sendMessage(e)}},{key:"ngOnDestroy",value:function(){this.subscription.next(),this.subscription.complete()}}]),e}()).\u0275fac=function(e){return new(e||ke)(p.ac(Oe),p.ac(x),p.ac(E))},ke.\u0275prov=p.Kb({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke),xe=((be=function(){function e(t,n,i,r){h(this,e),this.fireBaseService=t,this.chatMessagesDataService=n,this.userDataService=i,this.roomDataService=r,this._historyList=new d.a([]),this._isLoading=new d.a(!1),this._selectedHistory=new d.a(void 0),this.historyList$=this._historyList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedHistory$=this._selectedHistory.asObservable()}return f(e,[{key:"loadHistory",value:function(){var e=this;this.fireBaseService.loadHistory().pipe(Object(g.a)(function(t){return e._historyList.next(t)})).subscribe()}},{key:"setSelectedHistory",value:function(e){var t,n=this;(null===(t=this._selectedHistory.value)||void 0===t?void 0:t.historyId)!==e&&(this._isLoading.next(!0),this._historyList.pipe(Object(b.a)(function(t){return t.find(function(t){return t.historyId===e})}),Object(g.a)(function(e){return n._selectedHistory.next(e)}),Object(m.a)(1),Object(y.a)(function(){return n._isLoading.next(!1)})).subscribe())}},{key:"saveChatToHistory",value:function(){var e=this;Object(P.a)([this.chatMessagesDataService.messages$,this.userDataService.user$,this.roomDataService.selectedRoom$]).pipe(Object(m.a)(1),Object(g.a)(function(t){var n=a(t,3),i=n[0],r=n[1],o=n[2];return e.fireBaseService.saveChatToHistoryTable(i,r,null==o?void 0:o.roomId)})).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||be)(p.ac(Se),p.ac(_e),p.ac(A.a),p.ac(E))},be.\u0275prov=p.Kb({token:be,factory:be.\u0275fac,providedIn:"root"}),be),Ae=n("Kj3r"),Ee=["gutterEls"];function Pe(e,t){if(1&e){var n=p.Ub();p.Tb(0,"div",2,3),p.dc("mousedown",function(e){p.vc(n);var t=p.gc().index;return p.gc().startDragging(e,2*t+1,t+1)})("touchstart",function(e){p.vc(n);var t=p.gc().index;return p.gc().startDragging(e,2*t+1,t+1)})("mouseup",function(e){p.vc(n);var t=p.gc().index;return p.gc().clickGutter(e,t+1)})("touchend",function(e){p.vc(n);var t=p.gc().index;return p.gc().clickGutter(e,t+1)}),p.Pb(2,"div",4),p.Sb()}if(2&e){var i=p.gc().index,r=p.gc();p.yc("flex-basis",r.gutterSize,"px")("order",2*i+1)}}function Te(e,t){1&e&&p.Bc(0,Pe,3,4,"div",1),2&e&&p.mc("ngIf",!1===t.last)}var Ie=["*"];function Re(e){return void 0!==e.changedTouches&&e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0!==e.clientX&&void 0!==e.clientY?{x:e.clientX,y:e.clientY}:null}function Me(e,t){var n=e.nativeElement.getBoundingClientRect();return"horizontal"===t?n.width:n.height}function ze(e){return"boolean"==typeof e?e:"false"!==e}function Be(e,t){return null==e?t:(e=Number(e),!isNaN(e)&&e>=0?e:t)}function De(e,t){if("percent"===e){var n=t.reduce(function(e,t){return null!==t?e+t:e},0);return t.every(function(e){return null!==e})&&n>99.9&&n<100.1}if("pixel"===e)return 1===t.filter(function(e){return null===e}).length}function je(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function Ne(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function Fe(e,t,n,i){return t.reduce(function(t,n){var r=function(e,t,n,i){return 0===n?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:t.sizePercentAtStart,pixelRemain:0}:0===t.sizePixelAtStart&&n<0?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:n}:"percent"===e?function(e,t,n){var i=(e.sizePixelAtStart+t)/n*100;if(t>0){if(null!==e.area.maxSize&&i>e.area.maxSize){var r=e.area.maxSize/100*n;return{areaSnapshot:e,pixelAbsorb:r,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+t-r}}return{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(t<0){if(null!==e.area.minSize&&i<e.area.minSize){var o=e.area.minSize/100*n;return{areaSnapshot:e,pixelAbsorb:o,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+t-o}}return i<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:i,pixelRemain:0}}}(t,n,i):"pixel"===e?function(e,t,n){var i=e.sizePixelAtStart+t;return t>0?null!==e.area.maxSize&&i>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:i-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:t<0?null!==e.area.minSize&&i<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+t-i,percentAfterAbsorption:-1,pixelRemain:i-e.area.minSize}:i<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(t,n):void 0}(e,n,t.remain,i);return t.list.push(r),t.remain=r.pixelRemain,t},{remain:n,list:[]})}function Le(e,t){"percent"===e?t.areaSnapshot.area.size=t.percentAfterAbsorption:"pixel"===e&&null!==t.areaSnapshot.area.size&&(t.areaSnapshot.area.size=t.areaSnapshot.sizePixelAtStart+t.pixelAbsorb)}var Ue,$e,He,Ve=((He=function(){function e(t,n,i,r){h(this,e),this.ngZone=t,this.elRef=n,this.cdRef=i,this.renderer=r,this._direction="horizontal",this._unit="percent",this._gutterSize=11,this._gutterStep=1,this._restrictMove=!1,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this._gutterDblClickDuration=0,this.dragStart=new p.n(!1),this.dragEnd=new p.n(!1),this.gutterClick=new p.n(!1),this.gutterDblClick=new p.n(!1),this.dragProgressSubject=new l.a,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction}return f(e,[{key:"direction",get:function(){return this._direction},set:function(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,"as-".concat(this._direction)),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,"as-".concat(this._unit)),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}},{key:"gutterSize",get:function(){return this._gutterSize},set:function(e){this._gutterSize=Be(e,11),this.build(!1,!1)}},{key:"gutterStep",get:function(){return this._gutterStep},set:function(e){this._gutterStep=Be(e,1)}},{key:"restrictMove",get:function(){return this._restrictMove},set:function(e){this._restrictMove=ze(e)}},{key:"useTransition",get:function(){return this._useTransition},set:function(e){this._useTransition=ze(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=ze(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}},{key:"dir",get:function(){return this._dir},set:function(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}},{key:"gutterDblClickDuration",get:function(){return this._gutterDblClickDuration},set:function(e){this._gutterDblClickDuration=Be(e,0)}},{key:"transitionEnd",get:function(){var e=this;return new S.a(function(t){return e.transitionEndSubscriber=t}).pipe(Object(Ae.a)(20))}},{key:"ngAfterViewInit",value:function(){var e=this;this.ngZone.runOutsideAngular(function(){setTimeout(function(){return e.renderer.addClass(e.elRef.nativeElement,"as-init")})})}},{key:"getNbGutters",value:function(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}},{key:"addArea",value:function(e){var t={component:e,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===e.visible?(this.displayedAreas.push(t),this.build(!0,!0)):this.hiddenAreas.push(t)}},{key:"removeArea",value:function(e){if(this.displayedAreas.some(function(t){return t.component===e})){var t=this.displayedAreas.find(function(t){return t.component===e});this.displayedAreas.splice(this.displayedAreas.indexOf(t),1),this.build(!0,!0)}else if(this.hiddenAreas.some(function(t){return t.component===e})){var n=this.hiddenAreas.find(function(t){return t.component===e});this.hiddenAreas.splice(this.hiddenAreas.indexOf(n),1)}}},{key:"updateArea",value:function(e,t,n){!0===e.visible&&this.build(t,n)}},{key:"showArea",value:function(e){var t,n=this.hiddenAreas.find(function(t){return t.component===e});if(void 0!==n){var i=this.hiddenAreas.splice(this.hiddenAreas.indexOf(n),1);(t=this.displayedAreas).push.apply(t,c(i)),this.build(!0,!0)}}},{key:"hideArea",value:function(e){var t,n=this.displayedAreas.find(function(t){return t.component===e});if(void 0!==n){var i=this.displayedAreas.splice(this.displayedAreas.indexOf(n),1);i.forEach(function(e){e.order=0,e.size=0}),(t=this.hiddenAreas).push.apply(t,c(i)),this.build(!0,!0)}}},{key:"getVisibleAreaSizes",value:function(){return this.displayedAreas.map(function(e){return null===e.size?"*":e.size})}},{key:"setVisibleAreaSizes",value:function(e){if(e.length!==this.displayedAreas.length)return!1;var t=e.map(function(e){return Be(e,null)});return!1!==De(this.unit,t)&&(this.displayedAreas.forEach(function(e,n){return e.component._size=t[n]}),this.build(!1,!0),!0)}},{key:"build",value:function(e,t){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(function(e){return null!==e.component.order})&&this.displayedAreas.sort(function(e,t){return e.component.order-t.component.order}),this.displayedAreas.forEach(function(e,t){e.order=2*t,e.component.setStyleOrder(e.order)})),!0===t){var n=De(this.unit,this.displayedAreas.map(function(e){return e.component.size}));switch(this.unit){case"percent":var i=100/this.displayedAreas.length;this.displayedAreas.forEach(function(e){e.size=n?e.component.size:i,e.minSize=je(e),e.maxSize=Ne(e)});break;case"pixel":if(n)this.displayedAreas.forEach(function(e){e.size=e.component.size,e.minSize=je(e),e.maxSize=Ne(e)});else{var r=this.displayedAreas.filter(function(e){return null===e.component.size});if(0===r.length&&this.displayedAreas.length>0)this.displayedAreas.forEach(function(e,t){e.size=0===t?null:e.component.size,e.minSize=0===t?null:je(e),e.maxSize=0===t?null:Ne(e)});else if(r.length>1){var o=!1;this.displayedAreas.forEach(function(e){null===e.component.size?!1===o?(e.size=null,e.minSize=null,e.maxSize=null,o=!0):(e.size=100,e.minSize=null,e.maxSize=null):(e.size=e.component.size,e.minSize=je(e),e.maxSize=Ne(e))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}},{key:"refreshStyleSizes",value:function(){var e=this;if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{var t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(function(e){e.component.setStyleFlex(0,0,"calc( ".concat(e.size,"% - ").concat(e.size/100*t,"px )"),null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(function(t){null===t.size?t.component.setStyleFlex(1,1,1===e.displayedAreas.length?"100%":"auto",!1,!1):1===e.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,"".concat(t.size,"px"),null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}},{key:"clickGutter",value:function(e,t){var n=this,i=Re(e);!this.startPoint||this.startPoint.x!==i.x||this.startPoint.y!==i.y||this.isDragging&&!this.isWaitingInitialMove||(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",t),this.stopDragging()):this._clickTimeout=window.setTimeout(function(){n._clickTimeout=null,n.notify("click",t),n.stopDragging()},this.gutterDblClickDuration))}},{key:"startDragging",value:function(e,t,n){var i=this;e.preventDefault(),e.stopPropagation(),this.startPoint=Re(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.snapshot={gutterNum:n,lastSteppedOffset:0,allAreasSizePixel:Me(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(function(e){var n={area:e,sizePixelAtStart:Me(e.component.elRef,i.direction),sizePercentAtStart:"percent"===i.unit?e.size:-1};e.order<t?!0===i.restrictMove?i.snapshot.areasBeforeGutter=[n]:i.snapshot.areasBeforeGutter.unshift(n):e.order>t&&(!0===i.restrictMove?0===i.snapshot.areasAfterGutter.length&&(i.snapshot.areasAfterGutter=[n]):i.snapshot.areasAfterGutter.push(n))}),this.snapshot.allInvolvedAreasSizePercent=[].concat(c(this.snapshot.areasBeforeGutter),c(this.snapshot.areasAfterGutter)).reduce(function(e,t){return e+t.sizePercentAtStart},0),0!==this.snapshot.areasBeforeGutter.length&&0!==this.snapshot.areasAfterGutter.length&&(this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(function(){i.dragListeners.push(i.renderer.listen("document","mousemove",i.dragEvent.bind(i))),i.dragListeners.push(i.renderer.listen("document","touchmove",i.dragEvent.bind(i)))}),this.displayedAreas.forEach(function(e){return e.component.lockEvents()}),this.isDragging=!0,this.isWaitingInitialMove=!0))}},{key:"dragEvent",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),null!==this._clickTimeout&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Re(e),null!==this.endPoint)){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(function(){t.isWaitingInitialMove=!1,t.renderer.addClass(t.elRef.nativeElement,"as-dragging"),t.renderer.addClass(t.gutterEls.toArray()[t.snapshot.gutterNum-1].nativeElement,"as-dragged"),t.notify("start",t.snapshot.gutterNum)})}var n="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(n=-n);var i=Math.round(n/this.gutterStep)*this.gutterStep;if(i!==this.snapshot.lastSteppedOffset){this.snapshot.lastSteppedOffset=i;var r=Fe(this.unit,this.snapshot.areasBeforeGutter,-i,this.snapshot.allAreasSizePixel),o=Fe(this.unit,this.snapshot.areasAfterGutter,i,this.snapshot.allAreasSizePixel);if(0!==r.remain&&0!==o.remain?Math.abs(r.remain)===Math.abs(o.remain)||(Math.abs(r.remain)>Math.abs(o.remain)?o=Fe(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):r=Fe(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)):0!==r.remain?o=Fe(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(r=Fe(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){var s=[].concat(c(r.list),c(o.list)),a=s.find(function(e){return 0!==e.percentAfterAbsorption&&e.percentAfterAbsorption!==e.areaSnapshot.area.minSize&&e.percentAfterAbsorption!==e.areaSnapshot.area.maxSize});a&&(a.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-s.filter(function(e){return e!==a}).reduce(function(e,t){return e+t.percentAfterAbsorption},0))}r.list.forEach(function(e){return Le(t.unit,e)}),o.list.forEach(function(e){return Le(t.unit,e)}),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}}}},{key:"stopDragging",value:function(e){var t=this;if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(function(e){return e.component.unlockEvents()});this.dragListeners.length>0;){var n=this.dragListeners.pop();n&&n()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(function(){setTimeout(function(){t.startPoint=null,t.endPoint=null,t.isWaitingClear=!1})})}}},{key:"notify",value:function(e,t){var n=this,i=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:t,sizes:i}):"end"===e?this.dragEnd.emit({gutterNum:t,sizes:i}):"click"===e?this.gutterClick.emit({gutterNum:t,sizes:i}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:t,sizes:i}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(function(){return n.transitionEndSubscriber.next(i)}):"progress"===e&&this.dragProgressSubject.next({gutterNum:t,sizes:i})}},{key:"ngOnDestroy",value:function(){this.stopDragging()}},{key:"collapseArea",value:function(e,t,n){var i=this.displayedAreas.find(function(t){return t.component===e});if(void 0!==i){var r="right"===n?1:-1;i.sizeBeforeCollapse||(i.sizeBeforeCollapse=i.size,i.gutterBeforeCollapse=r),i.size=t;var o=this.gutterEls.find(function(e){return e.nativeElement.style.order==="".concat(i.order+r)});o&&this.renderer.addClass(o.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}}},{key:"expandArea",value:function(e){var t=this.displayedAreas.find(function(t){return t.component===e});if(void 0!==t&&t.sizeBeforeCollapse){t.size=t.sizeBeforeCollapse,t.sizeBeforeCollapse=null;var n=this.gutterEls.find(function(e){return e.nativeElement.style.order==="".concat(t.order+t.gutterBeforeCollapse)});n&&this.renderer.removeClass(n.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}}}]),e}()).\u0275fac=function(e){return new(e||He)(p.Ob(p.A),p.Ob(p.l),p.Ob(p.h),p.Ob(p.F))},He.\u0275cmp=p.Ib({type:He,selectors:[["as-split"]],viewQuery:function(e,t){var n;1&e&&p.Gc(Ee,1),2&e&&p.tc(n=p.ec())&&(t.gutterEls=n)},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick",transitionEnd:"transitionEnd"},exportAs:["asSplit"],ngContentSelectors:Ie,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","as-split-gutter",3,"flex-basis","order","mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"as-split-gutter",3,"mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(e,t){1&e&&(p.lc(),p.kc(0),p.Bc(1,Te,1,1,"ng-template",0)),2&e&&(p.Bb(1),p.mc("ngForOf",t.displayedAreas))},directives:[s.l,s.m],styles:['[_nghost-%COMP%]{align-items:stretch;display:flex;flex-wrap:nowrap;height:100%;justify-content:flex-start;overflow:hidden;width:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{align-items:center;background-color:#eee;display:flex;flex-grow:0;flex-shrink:0;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;height:100%;width:100%}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:col-resize;flex-direction:row;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==")}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:row-resize;flex-direction:column;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC")}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area, .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%]{transition:flex-basis .3s}'],changeDetection:0}),He),qe=(($e=function(){function e(t,n,i,r){h(this,e),this.ngZone=t,this.elRef=n,this.renderer=i,this.split=r,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}return f(e,[{key:"order",get:function(){return this._order},set:function(e){this._order=Be(e,null),this.split.updateArea(this,!0,!1)}},{key:"size",get:function(){return this._size},set:function(e){this._size=Be(e,null),this.split.updateArea(this,!1,!0)}},{key:"minSize",get:function(){return this._minSize},set:function(e){this._minSize=Be(e,null),this.split.updateArea(this,!1,!0)}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Be(e,null),this.split.updateArea(this,!1,!0)}},{key:"lockSize",get:function(){return this._lockSize},set:function(e){this._lockSize=ze(e),this.split.updateArea(this,!1,!0)}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=ze(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}},{key:"ngOnInit",value:function(){var e=this;this.split.addArea(this),this.ngZone.runOutsideAngular(function(){e.transitionListener=e.renderer.listen(e.elRef.nativeElement,"transitionend",function(t){"flex-basis"===t.propertyName&&e.split.notify("transitionEnd",-1)})})}},{key:"setStyleOrder",value:function(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}},{key:"setStyleFlex",value:function(e,t,n,i,r){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",n),!0===i?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===r?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}},{key:"lockEvents",value:function(){var e=this;this.ngZone.runOutsideAngular(function(){e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"selectstart",function(){return!1})),e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"dragstart",function(){return!1}))})}},{key:"unlockEvents",value:function(){for(;this.lockListeners.length>0;){var e=this.lockListeners.pop();e&&e()}}},{key:"ngOnDestroy",value:function(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}},{key:"collapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";this.split.collapseArea(this,e,t)}},{key:"expand",value:function(){this.split.expandArea(this)}}]),e}()).\u0275fac=function(e){return new(e||$e)(p.Ob(p.A),p.Ob(p.l),p.Ob(p.F),p.Ob(Ve))},$e.\u0275dir=p.Jb({type:$e,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),$e),Ke=((Ue=function(){function e(){h(this,e)}return f(e,null,[{key:"forRoot",value:function(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}},{key:"forChild",value:function(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}}]),e}()).\u0275fac=function(e){return new(e||Ue)},Ue.\u0275mod=p.Mb({type:Ue}),Ue.\u0275inj=p.Lb({imports:[[s.c]]}),Ue);function Ge(e,t){1&e&&p.Pb(0,"div",3)}function We(e,t){1&e&&(p.Tb(0,"span"),p.Dc(1),p.Sb()),2&e&&(p.Bb(1),p.Fc(" ",", "," "))}function Xe(e,t){if(1&e&&(p.Rb(0),p.Tb(1,"span",3),p.Dc(2),p.Sb(),p.Bc(3,We,2,1,"span",2),p.Tb(4,"span"),p.Dc(5,"typing..."),p.Sb(),p.Qb()),2&e){var n=t.$implicit,i=t.last;p.Bb(2),p.Fc(" ",n.nickName," "),p.Bb(1),p.mc("ngIf",!i)}}function Ye(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Xe,6,2,"ng-container",6),p.Qb()),2&e){var n=p.gc().$implicit,i=p.gc();p.Bb(1),p.mc("ngForOf",n)("ngForTrackBy",i.identify)}}function Je(e,t){1&e&&(p.Tb(0,"span"),p.Dc(1),p.Sb()),2&e&&(p.Bb(1),p.Fc(" ",", "," "))}function Qe(e,t){if(1&e&&(p.Rb(0,9),p.Tb(1,"span",10),p.Dc(2),p.Sb(),p.Bc(3,Je,2,1,"span",2),p.Qb()),2&e){var n=t.$implicit,i=t.last;p.Bb(2),p.Fc(" ",n.nickName," "),p.Bb(1),p.mc("ngIf",!i)}}function Ze(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Qe,4,2,"ng-container",8),p.Qb()),2&e){var n=p.gc().$implicit,i=p.gc(3);p.Bb(1),p.mc("ngForOf",n)("ngForTrackBy",i.identify)}}function et(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Ze,2,2,"ng-container",2),p.Qb()),2&e){var n=t.$implicit;p.Bb(1),p.mc("ngIf",n.length)}}function tt(e,t){if(1&e&&(p.Tb(0,"div",7),p.Bc(1,et,2,1,"ng-container",2),p.hc(2,"async"),p.Sb()),2&e){var n=p.gc(2);p.Bb(1),p.mc("ngIf",p.ic(2,1,n.roomDataService.usersInRoom$))}}function nt(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Ye,2,2,"ng-container",4),p.Bc(2,tt,3,3,"ng-template",null,5,p.Cc),p.Qb()),2&e){var n=t.$implicit,i=p.uc(3);p.Bb(1),p.mc("ngIf",n.length)("ngIfElse",i)}}var it,rt,ot=((it=function(){function e(t){h(this,e),this.roomDataService=t}return f(e,[{key:"ngOnInit",value:function(){}},{key:"identify",value:function(e,t){return t.id}}]),e}()).\u0275fac=function(e){return new(e||it)(p.Ob(E))},it.\u0275cmp=p.Ib({type:it,selectors:[["user-list"]],decls:5,vars:6,consts:[[1,"user-list"],["class","typers",4,"ngIf"],[4,"ngIf"],[1,"typers"],[4,"ngIf","ngIfElse"],["noTypers",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room-container"],["class","users-in-room",4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room"],[1,"users"]],template:function(e,t){1&e&&(p.Tb(0,"div",0),p.Bc(1,Ge,1,0,"div",1),p.hc(2,"async"),p.Bc(3,nt,4,2,"ng-container",2),p.hc(4,"async"),p.Sb()),2&e&&(p.Bb(1),p.mc("ngIf",p.ic(2,2,t.roomDataService.typersInRoom$)),p.Bb(2),p.mc("ngIf",p.ic(4,4,t.roomDataService.typersInRoom$)))},directives:[s.m,s.l],pipes:[s.b],styles:[".user-list[_ngcontent-%COMP%]{font-size:14px;padding-left:5px}.user-list[_ngcontent-%COMP%]   .users-in-room[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),it),st=n("pLZG"),at=function(e){return{reverse:e}},ct=((rt=function(){function e(t){h(this,e),this.userDataService=t}return f(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||rt)(p.Ob(A.a))},rt.\u0275cmp=p.Ib({type:rt,selectors:[["message-view"]],inputs:{data:"data"},decls:11,vars:11,consts:[[1,"message-view",3,"ngClass"],[1,"message-header"],[1,"user-name"],[1,"message-content"],[1,"message"],[1,"date"]],template:function(e,t){var n;(1&e&&(p.Tb(0,"div",0),p.hc(1,"async"),p.Tb(2,"div",1),p.Tb(3,"label",2),p.Dc(4),p.Sb(),p.Sb(),p.Tb(5,"div",3),p.Tb(6,"label",4),p.Dc(7),p.Sb(),p.Tb(8,"label",5),p.Dc(9),p.hc(10,"date"),p.Sb(),p.Sb(),p.Sb()),2&e)&&(p.mc("ngClass",p.qc(9,at,(null==(n=p.ic(1,4,t.userDataService.user$))?null:n.id)!==(null==t.data.fromUser?null:t.data.fromUser.id))),p.Bb(4),p.Ec(null==t.data||null==t.data.fromUser?null:t.data.fromUser.nickName),p.Bb(3),p.Ec(t.data.text),p.Bb(2),p.Ec(p.jc(10,6,t.data.createdAt,"H:mm:ss")))},directives:[s.k],pipes:[s.b,s.e],styles:['.message-view[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;margin-bottom:10px}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{position:relative;border-radius:10px;max-width:70%;background-color:#6495ed;padding:5px 0 0;box-shadow:10px 10px 10px -6px #807c80;display:flex;flex-direction:column;margin:0 10px;word-break:break-word}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:0 20px;margin:0 0 2px}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{align-self:flex-end;color:#f0f8ff;font-size:10px;padding:0 5px;margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-9px;width:0;height:0;border-top:18px solid transparent;border-right:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}.reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:none}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:before{content:"";position:absolute;right:-9px;width:0;height:0;border-top:18px solid transparent;border-left:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}']}),rt),ut=n("Xa2L");function lt(e,t){if(1&e&&(p.Tb(0,"div",8),p.Tb(1,"div",9),p.Dc(2),p.hc(3,"date"),p.Sb(),p.Sb()),2&e){var n=p.gc().$implicit;p.Bb(2),p.Ec(p.jc(3,1,n.createdAt,"dd/MM/yyyy"))}}function ht(e,t){if(1&e&&(p.Rb(0),p.Bc(1,lt,4,4,"div",6),p.hc(2,"date"),p.hc(3,"date"),p.Pb(4,"message-view",7),p.Qb()),2&e){var n=t.$implicit,i=t.index,r=p.gc(2).$implicit;p.Bb(1),p.mc("ngIf",0===i||p.jc(2,2,n.createdAt,"dd")!==p.jc(3,5,r[i-1].createdAt,"dd")),p.Bb(3),p.mc("data",n)}}function pt(e,t){if(1&e&&(p.Rb(0),p.Bc(1,ht,5,8,"ng-container",5),p.Qb()),2&e){var n=p.gc().$implicit,i=p.gc(2);p.Bb(1),p.mc("ngForOf",n)("ngForTrackBy",i.identify)}}function ft(e,t){1&e&&(p.Tb(0,"div",10),p.Dc(1," There are no messages yet "),p.Sb())}function dt(e,t){if(1&e&&(p.Rb(0),p.Bc(1,pt,2,2,"ng-container",3),p.Bc(2,ft,2,0,"ng-template",null,4,p.Cc),p.Qb()),2&e){var n=t.$implicit,i=p.uc(3);p.Bb(1),p.mc("ngIf",n.length)("ngIfElse",i)}}function gt(e,t){if(1&e&&(p.Tb(0,"div",2),p.Bc(1,dt,4,2,"ng-container",1),p.hc(2,"async"),p.Sb()),2&e){var n=p.gc();p.Bb(1),p.mc("ngIf",p.ic(2,1,n.chatMessagesDataService.messages$))}}function vt(e,t){1&e&&(p.Rb(0),p.Tb(1,"div",11),p.Pb(2,"mat-spinner"),p.Sb(),p.Qb())}var mt,yt,bt,kt=((mt=function(){function e(t,n){h(this,e),this.chatMessagesDataService=t,this.roomDateService=n,this.subscription=new l.a}return f(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.chatMessagesDataService.messages$.pipe(Object(st.a)(function(e){return e.length>1}),Object(g.a)(function(t){var n=e.messages.toArray()[t.length];n&&n.nativeElement.scrollIntoView({block:"nearest",behavior:"smooth"})}),Object(v.a)(this.subscription)).subscribe()}},{key:"identify",value:function(e,t){return t.chatMessageId}},{key:"ngOnDestroy",value:function(){this.subscription.next(),this.subscription.complete()}}]),e}()).\u0275fac=function(e){return new(e||mt)(p.Ob(_e),p.Ob(E))},mt.\u0275cmp=p.Ib({type:mt,selectors:[["messages-container"]],viewQuery:function(e,t){var n;1&e&&p.Gc(ct,1,p.l),2&e&&p.tc(n=p.ec())&&(t.messages=n)},decls:4,vars:6,consts:[["class","messages-container",4,"ngIf"],[4,"ngIf"],[1,"messages-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],["class","divider-container",4,"ngIf"],[3,"data"],[1,"divider-container"],[1,"date"],[1,"data-empty"],[1,"data-loading"]],template:function(e,t){1&e&&(p.Bc(0,gt,3,3,"div",0),p.hc(1,"async"),p.Bc(2,vt,3,0,"ng-container",1),p.hc(3,"async")),2&e&&(p.mc("ngIf",!p.ic(1,2,t.roomDateService.isLoading$)),p.Bb(2),p.mc("ngIf",p.ic(3,4,t.roomDateService.isLoading$)))},directives:[s.m,s.l,ct,ut.b],pipes:[s.b,s.e],styles:[".messages-container[_ngcontent-%COMP%]{padding:10px 20px;position:relative}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]{position:sticky;top:10px;display:flex;justify-content:center}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding:0 15px;background-color:#fff8dc;border-radius:5px;font-size:13px;position:relative;top:7px}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%], .messages-container[_ngcontent-%COMP%]   .data-loading[_ngcontent-%COMP%]{position:absolute;top:150px;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%]{font-size:22px}.data-loading[_ngcontent-%COMP%]{position:absolute;top:60px;left:0;width:100%;height:100%;display:flex;align-items:flex-start;justify-content:center}"]}),mt),Ct=n("zP0r"),wt=n("u47x"),St=n("kmnG"),Ot=n("qFsG"),_t=n("3Pt+"),xt=n("bTqV"),At=n("NFeN"),Et=function(e){return{disabled:e}},Pt=((bt=function(){function e(t,n,i,r){var o=this;h(this,e),this.chatMessageDataService=t,this.roomDataService=n,this.userDataService=i,this.socketService=r,this.subscription=new l.a,this.messageText="",this._typingActive=new d.a(!1),this.userDataService.user$.pipe(Object(g.a)(function(e){return o.user=e})).subscribe(),this._typingActive.pipe(Object(Ct.a)(1),Object(Ae.a)(300),Object(g.a)(function(){return o.socketService.sendTyping(o.user)})).subscribe()}return f(e,[{key:"sendChatMessage",value:function(){var e=this;this.roomDataService.selectedRoom$.pipe(Object(m.a)(1),Object(st.a)(function(e){return!!e}),Object(b.a)(function(t){return{chatMessageId:Date.now().toString(),fromUser:e.user,createdAt:Date.now(),text:e.messageText,roomId:t.roomId}}),Object(g.a)(function(t){return e.chatMessageDataService.addChatMessage(t)}),Object(g.a)(function(){return e.messageText=""}),Object(v.a)(this.subscription)).subscribe()}},{key:"sendTypingActive",value:function(){this._typingActive.next(!0)}},{key:"ngOnDestroy",value:function(){this.subscription.next(),this.subscription.complete()}}]),e}()).\u0275fac=function(e){return new(e||bt)(p.Ob(_e),p.Ob(E),p.Ob(A.a),p.Ob(x))},bt.\u0275cmp=p.Ib({type:bt,selectors:[["typing-container"]],decls:6,vars:5,consts:[["cdkTrapFocus","",1,"typing-container"],["appearance","outline"],["matInput","","type","text","autocomplete","off",3,"ngModel","keyup","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"disabled","click"],[1,"send-text",3,"ngClass"]],template:function(e,t){1&e&&(p.Tb(0,"div",0),p.Tb(1,"mat-form-field",1),p.Tb(2,"input",2),p.dc("keyup",function(){return t.sendTypingActive()})("ngModelChange",function(e){return t.messageText=e})("keyup.enter",function(){return t.messageText?t.sendChatMessage():null}),p.Sb(),p.Tb(3,"button",3),p.dc("click",function(){return t.sendChatMessage()}),p.Tb(4,"mat-icon",4),p.Dc(5,"play_circle_filled"),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.Bb(2),p.mc("ngModel",t.messageText),p.Bb(1),p.mc("disabled",!t.messageText),p.Bb(1),p.mc("ngClass",p.qc(3,Et,!t.messageText)))},directives:[wt.d,St.c,Ot.a,_t.a,_t.j,_t.m,xt.b,St.g,At.a,s.k],styles:[".typing-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding:5px;margin:5px;justify-content:space-around;align-items:center;border:1px solid #000;border-radius:43px;background-color:#f0f8ff}.typing-container[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.typing-container[_ngcontent-%COMP%]     .mat-form-field{width:80%}.typing-container[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.typing-container[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.typing-container[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:200px}.typing-container[_ngcontent-%COMP%]   .send-text[_ngcontent-%COMP%]{color:#405d77;font-size:26px!important}.typing-container[_ngcontent-%COMP%]   .send-text.disabled[_ngcontent-%COMP%]{opacity:.4}"]}),bt),Tt=((yt=function(){function e(t,n,i){h(this,e),this.roomDataService=t,this.historyDataService=n,this.chatMessagesDataService=i}return f(e,[{key:"saveChatToHistory",value:function(){this.historyDataService.saveChatToHistory()}}]),e}()).\u0275fac=function(e){return new(e||yt)(p.Ob(E),p.Ob(xe),p.Ob(_e))},yt.\u0275cmp=p.Ib({type:yt,selectors:[["chat-view"]],decls:9,vars:3,consts:[[1,"chat-view-container"],[1,"chat-messages-container"],[1,"chat-title"],[1,"user-list"]],template:function(e,t){var n;(1&e&&(p.Tb(0,"div",0),p.Tb(1,"div",1),p.Tb(2,"div",2),p.Tb(3,"div"),p.Dc(4),p.hc(5,"async"),p.Sb(),p.Pb(6,"user-list",3),p.Sb(),p.Pb(7,"messages-container"),p.Pb(8,"typing-container"),p.Sb(),p.Sb()),2&e)&&(p.Bb(4),p.Fc("Chat Room",": "+((null==(n=p.ic(5,1,t.roomDataService.selectedRoom$))?null:n.roomName)||"")," "))},directives:[ot,kt,Pt],pipes:[s.b],styles:[".chat-view-container[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;box-sizing:border-box;background-color:#b0c4de}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;align-self:center;padding:0 20px;position:absolute;top:-14px;background-color:#b0c4de;display:flex;flex-direction:column;align-items:center}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .save-history[_ngcontent-%COMP%]{height:40px;width:40px}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]{position:absolute;top:34px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]{border:2px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;position:relative;padding-top:25px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   messages-container[_ngcontent-%COMP%]{flex-grow:1;overflow:auto}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   typing-container[_ngcontent-%COMP%]{flex-grow:0}  .mat-button-wrapper{padding:0!important}"]}),yt),It=function(e){return{selected:e}};function Rt(e,t){if(1&e){var n=p.Ub();p.Rb(0),p.Tb(1,"div",7),p.dc("click",function(){p.vc(n);var e=t.$implicit;return p.gc(4).roomSelected(e.roomId)}),p.hc(2,"async"),p.Dc(3),p.Sb(),p.Qb()}if(2&e){var i,r=t.$implicit,o=p.gc(4);p.Bb(1),p.mc("ngClass",p.qc(4,It,(null==(i=p.ic(2,2,o.roomDataService.selectedRoom$))?null:i.roomId)===r.roomId)),p.Bb(2),p.Fc(" ",r.roomName," ")}}function Mt(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Rt,4,6,"ng-container",6),p.Qb()),2&e){var n=p.gc().$implicit,i=p.gc(2);p.Bb(1),p.mc("ngForOf",n)("ngForTrackBy",i.identify)}}function zt(e,t){1&e&&(p.Tb(0,"div",8),p.Dc(1," There are no rooms "),p.Sb())}function Bt(e,t){if(1&e&&(p.Rb(0),p.Bc(1,Mt,2,2,"ng-container",4),p.Bc(2,zt,2,0,"ng-template",null,5,p.Cc),p.Qb()),2&e){var n=t.$implicit,i=p.uc(3);p.Bb(1),p.mc("ngIf",n.length)("ngIfElse",i)}}function Dt(e,t){if(1&e&&(p.Tb(0,"div",2),p.Tb(1,"div",3),p.Bc(2,Bt,4,2,"ng-container",1),p.hc(3,"async"),p.Sb(),p.Sb()),2&e){var n=p.gc();p.Bb(2),p.mc("ngIf",p.ic(3,1,n.roomDataService.roomList$))}}function jt(e,t){1&e&&(p.Rb(0),p.Tb(1,"div",9),p.Pb(2,"mat-spinner"),p.Sb(),p.Qb())}var Nt,Ft,Lt,Ut,$t=((Ft=function(){function e(t){h(this,e),this.roomDataService=t}return f(e,[{key:"ngOnInit",value:function(){}},{key:"roomSelected",value:function(e){this.roomDataService.setSelectedRoom(e)}},{key:"identify",value:function(e,t){return t.roomId}}]),e}()).\u0275fac=function(e){return new(e||Ft)(p.Ob(E))},Ft.\u0275cmp=p.Ib({type:Ft,selectors:[["app-rooms"]],decls:4,vars:6,consts:[["class","rooms",4,"ngIf"],[4,"ngIf"],[1,"rooms"],[1,"rooms-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"room-data-container",3,"ngClass","click"],[1,"data-empty"],[1,"data-loading"]],template:function(e,t){1&e&&(p.Bc(0,Dt,4,3,"div",0),p.hc(1,"async"),p.Bc(2,jt,3,0,"ng-container",1),p.hc(3,"async")),2&e&&(p.mc("ngIf",!p.ic(1,2,t.roomDataService.isLoading$)),p.Bb(2),p.mc("ngIf",p.ic(3,4,t.roomDataService.isLoading$)))},directives:[s.m,s.l,s.k,ut.b],pipes:[s.b],styles:[".rooms[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;background-color:#bbc0c5}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]{border:1.5px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;padding-top:25px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]{margin:5px 10px;border:1px solid #f5f5f5;border-radius:10px;height:100%;padding:5px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#60819c;font-weight:600;border:1px solid grey}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]:hover{background-color:#b0c4de}"]}),Ft),Ht=((Nt=function(){function e(){h(this,e)}return f(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Nt)},Nt.\u0275cmp=p.Ib({type:Nt,selectors:[["chat-manager"]],decls:1,vars:0,template:function(e,t){1&e&&p.Pb(0,"app-rooms")},directives:[$t],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),Nt),Vt=[{path:"",component:(Lt=function(){function e(t,n){h(this,e),this.roomDataService=t,this.historyDataService=n,this.subscription=new l.a}return f(e,[{key:"ngOnInit",value:function(){this.loadData("")}},{key:"loadData",value:function(e){this.roomDataService.updateData()}},{key:"ngOnDestroy",value:function(){this.subscription.next(),this.subscription.complete()}}]),e}(),Lt.\u0275fac=function(e){return new(e||Lt)(p.Ob(E),p.Ob(xe))},Lt.\u0275cmp=p.Ib({type:Lt,selectors:[["app-main-view"]],decls:7,vars:3,consts:[[2,"width","100%","height","100%"],["direction","horizontal",3,"gutterSize"],[3,"size"],[1,"chat-manager-container"]],template:function(e,t){1&e&&(p.Tb(0,"div",0),p.Tb(1,"as-split",1),p.Tb(2,"as-split-area",2),p.Pb(3,"chat-view"),p.Sb(),p.Tb(4,"as-split-area",2),p.Tb(5,"div",3),p.Pb(6,"chat-manager"),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.Bb(1),p.mc("gutterSize",5),p.Bb(1),p.mc("size",70),p.Bb(2),p.mc("size",30))},directives:[Ve,qe,Tt,Ht],styles:[".as-split-gutter{background-color:#6a85b7!important}.chat-manager-container[_ngcontent-%COMP%]{display:flex;height:100%}"]}),Lt),pathMatch:"full"}],qt=((Ut=function e(){h(this,e)}).\u0275fac=function(e){return new(e||Ut)},Ut.\u0275mod=p.Mb({type:Ut}),Ut.\u0275inj=p.Lb({imports:[[u.c.forChild(Vt)],u.c]}),Ut),Kt=n("PCNd"),Gt=n("1kSV"),Wt=n("GU7r"),Xt=n("+rOU"),Yt=n("FKr1");n("R1ws"),n("quSY"),n("VRyK"),n("xgIS"),n("LRne"),n("PqYM"),n("R0Ic"),n("JX91"),n("/uUt"),n("8LU1"),n("nLfN"),n("FtGj"),n("cH1L"),n("vxfF");var Jt,Qt,Zt=((Qt=function e(){h(this,e)}).\u0275fac=function(e){return new(e||Qt)},Qt.\u0275mod=p.Mb({type:Qt}),Qt.\u0275inj=p.Lb({imports:[[s.c,Yt.e,Xt.f,Yt.i,Wt.c,wt.a],Yt.e]}),Qt),en=((Jt=function e(){h(this,e)}).\u0275fac=function(e){return new(e||Jt)},Jt.\u0275mod=p.Mb({type:Jt}),Jt.\u0275inj=p.Lb({imports:[[s.c,qt,Ke,Kt.a,Gt.a,Zt]]}),Jt)},"0z79":function(e,n,o){var s=o("AdPF"),a=o("CUme"),c=o("cpc2"),u=o("Eexf").pick,l=o("2UHX"),p=o("NOtv")("engine.io-client:polling-xhr");function d(){}var g=null!=new s({xdomain:!1}).responseType,v=function(e){t(r,e);var n=i(r);function r(e,t){var i;return h(this,r),(i=n.call(this)).opts=t,i.method=t.method||"GET",i.uri=e,i.async=!1!==t.async,i.data=void 0!==t.data?t.data:null,i.create(),i}return f(r,[{key:"create",value:function(){var e=this,t=u(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var n=this.xhr=new s(t);try{p("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}catch(o){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{n.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),this.hasXDR()?(n.onload=function(){e.onLoad()},n.onerror=function(){e.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?e.onLoad():setTimeout(function(){e.onError("number"==typeof n.status?n.status:0)},0))},p("xhr data %s",this.data),n.send(this.data)}catch(o){return void setTimeout(function(){e.onError(o)},0)}"undefined"!=typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,e)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),r}(c);function m(){for(var e in v.requests)v.requests.hasOwnProperty(e)&&v.requests[e].abort()}v.requestsCount=0,v.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",m):"function"==typeof addEventListener&&addEventListener("onpagehide"in l?"pagehide":"unload",m,!1)),e.exports=function(e){t(o,e);var n=i(o);function o(e){var t;if(h(this,o),t=n.call(this,e),"undefined"!=typeof location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),t.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port,t.xs=e.secure!==i}return t.supportsBinary=g&&!(e&&e.forceBase64),r(t)}return f(o,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new v(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",function(e){n.onError("xhr post error",e)})}},{key:"doPoll",value:function(){var e=this;p("xhr poll");var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t}}]),o}(a),e.exports.Request=v},"2UHX":function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2pII":function(e,n,r){var o=r("akSB"),s=r("cpc2"),a=r("NOtv")("engine.io-client:socket"),c=r("KoVT"),u=r("Uxeu"),l=r("TypT"),p=function(e){t(r,e);var n=i(r);function r(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,r),t=n.call(this),e&&"object"==typeof e&&(i=e,e=null),e?(e=u(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=u(i.host).host),t.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=t.secure?"443":"80"),t.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),t.port=i.port||("undefined"!=typeof location&&location.port?location.port:t.secure?443:80),t.transports=i.transports||["polling","websocket"],t.readyState="",t.writeBuffer=[],t.prevBufferLen=0,t.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),t.opts.path=t.opts.path.replace(/\/$/,"")+"/","string"==typeof t.opts.query&&(t.opts.query=l.decode(t.opts.query)),t.id=null,t.upgrades=null,t.pingInterval=null,t.pingTimeout=null,t.pingTimeoutTimer=null,"function"==typeof addEventListener&&(t.opts.closeOnBeforeunload&&addEventListener("beforeunload",function(){t.transport&&(t.transport.removeAllListeners(),t.transport.close())},!1),"localhost"!==t.hostname&&(t.offlineEventListener=function(){t.onClose("transport close")},addEventListener("offline",t.offlineEventListener,!1))),t.open(),t}return f(r,[{key:"createTransport",value:function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return a("options: %j",n),new o[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout(function(){t.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return a("error while creating transport: %s",n),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;a("setting transport %s",e.name),this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(){t.onClose("transport close")})}},{key:"probe",value:function(e){var t=this;a('probing transport "%s"',e);var n=this.createTransport(e,{probe:1}),i=!1;r.priorWebsocketSuccess=!1;var o=function(){i||(a('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(o){if(!i)if("pong"===o.type&&"probe"===o.data){if(a('probe transport "%s" pong',e),t.upgrading=!0,t.emit("upgrading",n),!n)return;r.priorWebsocketSuccess="websocket"===n.name,a('pausing current transport "%s"',t.transport.name),t.transport.pause(function(){i||"closed"!==t.readyState&&(a("changing transport and sending upgrade packet"),p(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emit("upgrade",n),n=null,t.upgrading=!1,t.flush())})}else{a('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=n.name,t.emit("upgradeError",s)}}))};function s(){i||(i=!0,p(),n.close(),n=null)}var c=function(i){var r=new Error("probe error: "+i);r.transport=n.name,s(),a('probe transport "%s" failed because of error: %s',e,i),t.emit("upgradeError",r)};function u(){c("transport closed")}function l(){c("socket closed")}function h(e){n&&e.name!==n.name&&(a('"%s" works - aborting "%s"',e.name,n.name),s())}var p=function(){n.removeListener("open",o),n.removeListener("error",c),n.removeListener("close",u),t.removeListener("close",l),t.removeListener("upgrading",h)};n.once("open",o),n.once("error",c),n.once("close",u),this.once("close",l),this.once("upgrading",h),n.open()}},{key:"onOpen",value:function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(function(){e.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()},n=function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()},i=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){e.upgrading?i():t()}):this.upgrading?i():t()),this}},{key:"onError",value:function(e){a("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(a('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),r}(s);p.priorWebsocketSuccess=!1,p.protocol=c.protocol,e.exports=p},"3JDX":function(e,t,n){e.exports=function(e){function t(e){var n,r=null;function o(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];if(o.enabled){var s=o,a=Number(new Date);s.diff=a-(n||a),s.prev=n,s.curr=a,n=a,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return"%";c++;var r=t.formatters[n];return"function"==typeof r&&(e=r.call(s,i[c]),i.splice(c,1),c--),e}),t.formatArgs.call(s,i),(s.log||t.log).apply(s,i)}}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=i,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===r?t.enabled(e):r},set:function(e){r=e}}),"function"==typeof t.init&&t.init(o),o}function i(e,n){var i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(c(t.names.map(r)),c(t.skips.map(r).map(function(e){return"-"+e}))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n("FGiv"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(function(n){t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},"4Trj":function(n,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StrictEventEmitter=void 0;var a=o("cpc2");r.StrictEventEmitter=function(n){t(o,n);var r=i(o);function o(){return h(this,o),r.apply(this,arguments)}return f(o,[{key:"on",value:function(t,n){return e(s(o.prototype),"on",this).call(this,t,n),this}},{key:"once",value:function(t,n){return e(s(o.prototype),"once",this).call(this,t,n),this}},{key:"emit",value:function(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e(s(o.prototype),"emit",this)).call.apply(n,[this,t].concat(r)),this}},{key:"emitReserved",value:function(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e(s(o.prototype),"emit",this)).call.apply(n,[this,t].concat(r)),this}},{key:"listeners",value:function(t){return e(s(o.prototype),"listeners",this).call(this,t)}}]),o}(a)},AdPF:function(e,t,n){var i=n("yeub"),r=n("2UHX");e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(s){}if(!t)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}},Aplp:function(e,t,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function c(e){var t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==i?(s=0,i=e):e+"."+c(s++)}for(;a<64;a++)o[r[a]]=a;u.encode=c,u.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+o[e.charAt(a)];return t},e.exports=u},Byvj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},C2QD:function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},CIKq:function(e,n,r){var o=r("Gbct"),s=r("KoVT"),a=r("TypT"),c=r("Aplp"),u=r("Eexf").pick,l=r("X071"),p=l.WebSocket,d=l.usingBrowserWebSocket,g=l.defaultBinaryType,v=l.nextTick,m=r("NOtv")("engine.io-client:websocket"),y="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),b=function(e){t(r,e);var n=i(r);function r(e){var t;return h(this,r),(t=n.call(this,e)).supportsBinary=!e.forceBase64,t}return f(r,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=y?{}:u(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=d&&!y?t?new p(e,t):new p(e):new p(e,t,n)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||g,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var i=e[n],r=n===e.length-1;s.encodePacket(i,t.supportsBinary,function(e){var n={};!d&&(i.options&&(n.compress=i.options.compress),t.opts.perMessageDeflate)&&("string"==typeof e?Buffer.byteLength(e):e.length)<t.opts.perMessageDeflate.threshold&&(n.compress=!1);try{d?t.ws.send(e):t.ws.send(e,n)}catch(o){m("websocket closed before onclose event")}r&&v(function(){t.writable=!0,t.emit("drain")})})},i=0;i<e.length;i++)n(i)}},{key:"onClose",value:function(){o.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"check",value:function(){return!(!p||"__initialize"in p&&this.name===r.prototype.name)}}]),r}(o);e.exports=b},CUme:function(e,n,r){var o=r("Gbct"),s=r("TypT"),a=r("KoVT"),c=r("Aplp"),u=r("NOtv")("engine.io-client:polling");e.exports=function(e){t(r,e);var n=i(r);function r(){return h(this,r),n.apply(this,arguments)}return f(r,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){u("paused"),t.readyState="paused",e()};if(this.polling||!this.writable){var i=0;this.polling&&(u("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){u("pre-pause polling complete"),--i||n()})),this.writable||(u("we are currently writing - waiting to pause"),i++,this.once("drain",function(){u("pre-pause writing complete"),--i||n()}))}else n()}},{key:"poll",value:function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;u("polling got data %s",e),a.decodePayload(e,this.socket.binaryType).forEach(function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var e=this,t=function(){u("writing close packet"),e.write([{type:"close"}])};"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))}},{key:"write",value:function(e){var t=this;this.writable=!1,a.encodePayload(e,function(e){t.doWrite(e,function(){t.writable=!0,t.emit("drain")})})}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=s.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}]),r}(o)},Cl5A:function(n,r,a){var c,u=a("CUme"),l=a("2UHX"),p=/\n/g,d=/\\n/g;n.exports=function(n){t(a,n);var r=i(a);function a(e){var t;return h(this,a),(t=r.call(this,e)).query=t.query||{},c||(c=l.___eio=l.___eio||[]),t.index=c.length,c.push(t.onData.bind(o(t))),t.query.j=t.index,t}return f(a,[{key:"supportsBinary",get:function(){return!1}},{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),e(s(a.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)}},{key:"doWrite",value:function(e,t){var n,i=this;if(!this.form){var r=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o}function a(){c(),t()}this.form.action=this.uri();var c=function(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{n=document.createElement('<iframe src="javascript:0" name="'+i.iframeId+'">')}catch(e){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n};c(),e=e.replace(d,"\\\n"),this.area.value=e.replace(p,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&a()}:this.iframe.onload=a}}]),a}(u)},Eexf:function(e,t){e.exports.pick=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{})}},FGiv:function(e,t){var n=1e3,i=60*n,r=60*i,o=24*r;function s(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,t){t=t||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return t.long?(a=e,(c=Math.abs(a))>=o?s(a,c,o,"day"):c>=r?s(a,c,r,"hour"):c>=i?s(a,c,i,"minute"):c>=n?s(a,c,n,"second"):a+" ms"):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=r?Math.round(e/r)+"h":t>=i?Math.round(e/i)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},Gbct:function(e,n,r){var o=r("KoVT"),s=r("cpc2"),a=r("NOtv")("engine.io-client:transport");e.exports=function(e){t(r,e);var n=i(r);function r(e){var t;return h(this,r),(t=n.call(this)).opts=e,t.query=e.query,t.readyState="",t.socket=e.socket,t}return f(r,[{key:"onError",value:function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState?this.write(e):a("transport is not open, discarding packets")}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}]),r}(s)},KFhd:function(e,t,n){var i=n("gC2B").PACKET_TYPES,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=function(e,t,n){var a,c=e.type,u=e.data;return r&&u instanceof Blob?t?n(u):s(u,n):o&&(u instanceof ArrayBuffer||(a=u,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer))?t?n(u instanceof ArrayBuffer?u:u.buffer):s(new Blob([u]),n):n(i[c]+(u||""))}},KoVT:function(e,t,n){var i=n("KFhd"),r=n("fP3r"),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:function(e,t){var n=e.length,r=new Array(n),s=0;e.forEach(function(e,a){i(e,!1,function(e){r[a]=e,++s===n&&t(r.join(o))})})},decodePacket:r,decodePayload:function(e,t){for(var n=e.split(o),i=[],s=0;s<n.length;s++){var a=r(n[s],t);if(i.push(a),"error"===a.type)break}return i}}},NOtv:function(e,t,n){var i;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(i=!1,function(){i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=n("3JDX")(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},PVQj:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Manager=void 0;var o=r("lKxJ"),s=r("eFEk"),a=r("ggWO"),c=r("Byvj"),u=r("C2QD"),l=r("4Trj"),p=r("NOtv")("socket.io-client:manager");n.Manager=function(e){t(r,e);var n=i(r);function r(e,t){var i;h(this,r),(i=n.call(this)).nsps={},i.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",i.opts=t,i.reconnection(!1!==t.reconnection),i.reconnectionAttempts(t.reconnectionAttempts||1/0),i.reconnectionDelay(t.reconnectionDelay||1e3),i.reconnectionDelayMax(t.reconnectionDelayMax||5e3),i.randomizationFactor(t.randomizationFactor||.5),i.backoff=new u({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==t.timeout?2e4:t.timeout),i._readyState="closed",i.uri=e;var o=t.parser||a;return i.encoder=new o.Encoder,i.decoder=new o.Decoder,i._autoConnect=!1!==t.autoConnect,i._autoConnect&&i.open(),i}return f(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(p("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=o(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var r=c.on(n,"open",function(){i.onopen(),e&&e()}),s=c.on(n,"error",function(n){p("error"),i.cleanup(),i._readyState="closed",t.emitReserved("error",n),e?e(n):i.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;p("connect attempt will timeout after %d",a),0===a&&r();var u=setTimeout(function(){p("connect attempt timed out after %d",a),r(),n.close(),n.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&u.unref(),this.subs.push(function(){clearTimeout(u)})}return this.subs.push(r),this.subs.push(s),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){p("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(c.on(e,"ping",this.onping.bind(this)),c.on(e,"data",this.ondata.bind(this)),c.on(e,"error",this.onerror.bind(this)),c.on(e,"close",this.onclose.bind(this)),c.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){p("error",e),this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new s.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var i=n[t];if(this.nsps[i].active)return void p("socket %s is still active, skipping close",i)}this._close()}},{key:"_packet",value:function(e){p("writing packet %j",e);for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){p("cleanup"),this.subs.forEach(function(e){return e()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){p("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){p("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();p("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(p("attempting reconnect"),e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(function(n){n?(p("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):(p("reconnect success"),t.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(l.StrictEventEmitter)},TypT:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},Uxeu:function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t,r,o=e,s=e.indexOf("["),a=e.indexOf("]");-1!=s&&-1!=a&&(e=e.substring(0,s)+e.substring(s,a).replace(/:/g,";")+e.substring(a,e.length));for(var c,u=n.exec(e||""),l={},h=14;h--;)l[i[h]]=u[h]||"";return-1!=s&&-1!=a&&(l.source=o,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(r=(t=l.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1),"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1),r),l.queryKey=(c={},l.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(c[t]=n)}),c),l}},X071:function(e,t,n){var i=n("2UHX");e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:"function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e){return setTimeout(e,0)}}},akSB:function(e,t,n){var i=n("AdPF"),r=n("0z79"),o=n("Cl5A"),s=n("CIKq");t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},cpc2:function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},eFEk:function(n,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Socket=void 0;var a=o("ggWO"),c=o("Byvj"),l=o("4Trj"),p=o("NOtv")("socket.io-client:socket"),d=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});r.Socket=function(n){t(o,n);var r=i(o);function o(e,t,n){var i;return h(this,o),(i=r.call(this)).receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=t,i.ids=0,i.acks={},i.receiveBuffer=[],i.sendBuffer=[],i.connected=!1,i.disconnected=!0,i.flags={},n&&n.auth&&(i.auth=n.auth),i.io._autoConnect&&i.open(),i}return f(o,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[c.on(e,"open",this.onopen.bind(this)),c.on(e,"packet",this.onpacket.bind(this)),c.on(e,"error",this.onerror.bind(this)),c.on(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(d.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.unshift(e);var r={type:a.PacketType.EVENT,data:n,options:{}};return r.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(p("emitting packet with ack id %d",this.ids),this.acks[this.ids]=n.pop(),r.id=this.ids++),!this.flags.volatile||this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable&&this.connected?this.connected?this.packet(r):this.sendBuffer.push(r):p("discard packet as the transport is not currently writable"),this.flags={},this}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;p("transport is open - connecting"),"function"==typeof this.auth?this.auth(function(t){e.packet({type:a.PacketType.CONNECT,data:t})}):this.packet({type:a.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){p("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case a.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case a.PacketType.EVENT:case a.PacketType.BINARY_EVENT:this.onevent(e);break;case a.PacketType.ACK:case a.PacketType.BINARY_ACK:this.onack(e);break;case a.PacketType.DISCONNECT:this.ondisconnect();break;case a.PacketType.CONNECT_ERROR:var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];p("emitting event %j",t),null!=e.id&&(p("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var n,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(this._anyListeners.slice());try{for(i.s();!(n=i.n()).done;){n.value.apply(this,t)}}catch(r){i.e(r)}finally{i.f()}}e(s(o.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];n||(n=!0,p("sending ack %j",r),t.packet({type:a.PacketType.ACK,id:e,data:r}))}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t?(p("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):p("bad ack %s",e.id)}},{key:"onconnect",value:function(e){p("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach(function(t){return e.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){return e.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){p("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(e){return e()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&(p("performing disconnect (%s)",this.nsp),this.packet({type:a.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),o}(l.StrictEventEmitter)},f7yz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;var i=n("Uxeu"),r=n("NOtv")("socket.io-client:url");t.url=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),r("parse %s",e),o=i(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port+t,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}},fP3r:function(e,t,n){var i,r=n("gC2B"),o=r.PACKET_TYPES_REVERSE,s=r.ERROR_PACKET;"function"==typeof ArrayBuffer&&(i=n("g5Dd"));var a=function(e,t){if(i){var n=i.decode(e);return c(n,t)}return{base64:!0,data:e}},c=function(e,t){switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=function(e,t){if("string"!=typeof e)return{type:"message",data:c(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:a(e.substring(1),t)}:o[n]?e.length>1?{type:o[n],data:e.substring(1)}:{type:o[n]}:s}},g5Dd:function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,i,r,o,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),h=new Uint8Array(l);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),h[u++]=i<<2|r>>4,h[u++]=(15&r)<<4|o>>2,h[u++]=(3&o)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},gC2B:function(e,t){var n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";var i=Object.create(null);Object.keys(n).forEach(function(e){i[n[e]]=e}),e.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},ggWO:function(n,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Decoder=r.Encoder=r.PacketType=r.protocol=void 0;var a,c=o("cpc2"),u=o("qKib"),l=o("ymUC"),p=o("NOtv")("socket.io-parser");r.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=r.PacketType||(r.PacketType={})),r.Encoder=function(){function e(){h(this,e)}return f(e,[{key:"encode",value:function(e){return p("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!l.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),p("encoded %j as %s",e,t),t}},{key:"encodeAsBinary",value:function(e){var t=u.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}]),e}();var d=function(n){t(o,n);var r=i(o);function o(){return h(this,o),r.call(this)}return f(o,[{key:"add",value:function(t){var n;if("string"==typeof t)(n=this.decodeString(t)).type===a.BINARY_EVENT||n.type===a.BINARY_ACK?(this.reconstructor=new g(n),0===n.attachments&&e(s(o.prototype),"emit",this).call(this,"decoded",n)):e(s(o.prototype),"emit",this).call(this,"decoded",n);else{if(!l.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,e(s(o.prototype),"emit",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){for(var s=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(s,t)}else n.nsp="/";var c=e.charAt(t+1);if(""!==c&&Number(c)==c){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var h=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(t));if(!o.isPayloadValid(n.type,h))throw new Error("invalid payload");n.data=h}return p("decoded %s as %j",e,n),n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}}]),o}(c);r.Decoder=d;var g=function(){function e(t){h(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return f(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=u.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}()},jifJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;var i=n("f7yz"),r=n("PVQj"),o=n("NOtv")("socket.io-client");e.exports=t=a;var s=t.managers={};function a(e,t){"object"==typeof e&&(t=e,e=void 0);var n,a=i.url(e,(t=t||{}).path||"/socket.io"),c=a.source,u=a.id;return t.forceNew||t["force new connection"]||!1===t.multiplex||s[u]&&a.path in s[u].nsps?(o("ignoring socket cache for %s",c),n=new r.Manager(c,t)):(s[u]||(o("new io instance for %s",c),s[u]=new r.Manager(c,t)),n=s[u]),a.query&&!t.query&&(t.query=a.queryKey),n.socket(a.path,t)}t.io=a;var c=n("ggWO");Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=a;var u=n("PVQj");Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return u.Manager}});var l=n("eFEk");Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return l.Socket}}),t.default=a},lKxJ:function(e,t,n){var i=n("2pII");e.exports=function(e,t){return new i(e,t)},e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n("Gbct"),e.exports.transports=n("akSB"),e.exports.parser=n("KoVT")},qKib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;var i=n("ymUC");function r(e,t){if(!e)return e;if(i.isBinary(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var o=new Array(e.length),s=0;s<e.length;s++)o[s]=r(e[s],t);return o}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var c in e)e.hasOwnProperty(c)&&(a[c]=r(e[c],t));return a}return e}function o(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=o(e[n],t);else if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i],t));return e}t.deconstructPacket=function(e){var t=[],n=e;return n.data=r(e.data,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),e.attachments=void 0,e}},yeub:function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},ymUC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;var i="function"==typeof ArrayBuffer,r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function a(e){return i&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||o&&e instanceof Blob||s&&e instanceof File}t.isBinary=a,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)if(e(t[i]))return!0;return!1}if(a(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0;return!1}}}])}();