(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0vWp":function(t,e,n){"use strict";n.r(e),n.d(e,"MainViewModule",function(){return Fn});var i=n("ofXK"),s=n("tyNb"),r=n("XNiG"),o=n("fXoL"),a=n("2Vo4"),c=n("vkgz"),l=n("1G5W"),h=n("IzEk"),d=n("nYR2"),p=n("lJxs"),u=n("zp1y"),f=n("tk/3");let b=(()=>{class t{constructor(t){this.http=t}getRooms(){return this.http.get("api/room")}}return t.\u0275fac=function(e){return new(e||t)(o.ac(f.b))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=n("HDdC"),m=n("jifJ");let y=(()=>{class t{constructor(){this.url="http://localhost:3030",this.socket=Object(m.io)(this.url)}joinRoom(t){console.log("join-to-room",t),this.socket.emit("join-to-room",t)}sendMessage(t){console.log("sendMessage",t),this.socket.emit("message",t)}sendTyping(t){this.socket.emit("user-typing",t)}getMessage(){return new g.a(t=>(this.socket.on("new-message",e=>{t.next(e)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}getUsers(){return new g.a(t=>(this.socket.on("users-in-room",e=>{t.next(e)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}getTypingUser(){return new g.a(t=>(this.socket.on("typer",e=>{t.next(e)}),()=>{console.log("disconect function"),this.socket.disconnect()}))}disconnect(){console.log("disconect function"),this.socket.emit("disconnect")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=n("8tlj");let _=(()=>{class t{constructor(t,e,n){this.roomService=t,this.socketService=e,this.userDataService=n,this._roomList=new a.a([]),this._isLoading=new a.a(!1),this._usersInRoom=new a.a([]),this._typersInRoom=new a.a([]),this._selectedRoom=new a.a(void 0),this.subscription=new r.a,this.roomList$=this._roomList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedRoom$=this._selectedRoom.asObservable(),this.usersInRoom$=this._usersInRoom.asObservable(),this.typersInRoom$=this._typersInRoom.asObservable(),this.initListeners()}initListeners(){this.socketService.getUsers().pipe(Object(c.a)(t=>this._usersInRoom.next(t)),Object(c.a)(t=>console.log("users in room are: ",t)),Object(l.a)(this.subscription)).subscribe(),this.socketService.getTypingUser().pipe(Object(c.a)(t=>{let e=this._typersInRoom.value.filter(e=>e.id!==t.id);this._typersInRoom.next([...e,t])}),Object(c.a)(t=>setTimeout(()=>{let e=this._typersInRoom.value.filter(e=>e.id!==t.id);this._typersInRoom.next([...e])},3e3)),Object(c.a)(t=>console.log("typer is: ",t)),Object(l.a)(this.subscription)).subscribe()}updateData(){this._isLoading.next(!0),this.roomService.getRooms().pipe(Object(c.a)(t=>this._roomList.next(t)),Object(c.a)(t=>this.setSelectedRoom(t[0].roomId)),Object(h.a)(1),Object(d.a)(()=>this._isLoading.next(!1))).subscribe()}setSelectedRoom(t){var e;(null===(e=this._selectedRoom.value)||void 0===e?void 0:e.roomId)!==t&&(this._isLoading.next(!0),this._roomList.pipe(Object(p.a)(e=>e.find(e=>e.roomId===t)),Object(c.a)(t=>this._selectedRoom.next(t)),Object(u.a)(this.userDataService.user$),Object(c.a)(([e,n])=>this.socketService.joinRoom({roomId:t,user:n})),Object(h.a)(1),Object(d.a)(()=>this._isLoading.next(!1))).subscribe())}ngOnDestroy(){console.log("room data service destroy"),this.subscription.next(),this.subscription.complete(),this.socketService.disconnect()}}return t.\u0275fac=function(e){return new(e||t)(o.ac(b),o.ac(y),o.ac(v.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=n("itXk"),x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},S=function(){return(S=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function O(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,s,r=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function k(t,e){for(var n=0,i=e.length,s=t.length;n<i;n++,s++)t[s]=e[n];return t}function A(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=A(t[n],e[n]));return t}var P=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,i))}},t}();function E(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}var I=function(t){function e(n,i,s){var r=t.call(this,i)||this;return r.code=n,r.customData=s,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,T.prototype.create),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e[0]||{},s=this.service+"/"+t,r=this.errors[t],o=r?D(r,i):"Error",a=this.serviceName+": "+o+" ("+s+").",c=new I(s,a,i);return c},t}();function D(t,e){return t.replace(R,function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){var n=new z(t,e);return n.subscribe.bind(n)}var z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var i,s=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var s=i[n];if(s in t&&"function"==typeof t[s])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(i.next=L),void 0===i.error&&(i.error=L),void 0===i.complete&&(i.complete=L);var r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{s.finalError?i.error(s.finalError):i.complete()}catch(t){}}),this.observers.push(i),r},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function L(){}var j,F=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),N=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new P;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=O(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var r=w(s.value,2),o=r[1],a=this.normalizeInstanceIdentifier(r[0]);try{var c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,void 0,n=function(){var t;return function(t,e){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(a){r=[6,a],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(k(k([],w(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),w(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(i,s){function r(t){try{a(n.next(t))}catch(e){s(e)}}function o(t){try{a(n.throw(t))}catch(e){s(e)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,o)}a((n=n.apply(t,[])).next())});var t,e,n},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t="[DEFAULT]"),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(this.name+"("+r+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:r,options:s});try{for(var a=O(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var l=w(c.value,2),h=l[1];r===this.normalizeInstanceIdentifier(l[0])&&h.resolve(o)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},t.prototype.onInit=function(t,e){var n,i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);var r=this.instances.get(i);return r&&t(r,i),function(){s.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var r=O(s),o=r.next();!o.done;o=r.next()){var a=o.value;try{a(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,i=t.options,s=void 0===i?{}:i,r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:s}),this.instances.set(n,r),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch(o){}return r||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),H=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new N(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function $(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),s=0;for(e=0;e<n;e++)for(var r=arguments[e],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i}var U,W=[],V=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),G={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},q=V.INFO,K=((j={})[V.DEBUG]="log",j[V.VERBOSE]="log",j[V.INFO]="info",j[V.WARN]="warn",j[V.ERROR]="error",j),Y=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),r=K[e];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[r].apply(console,$(["["+s+"]  "+t.name+":"],n))}},Q=function(){function t(t){this.name=t,this._logLevel=q,this._logHandler=Y,this._userLogHandler=null,W.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in V))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?G[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$([this,V.DEBUG],t)),this._logHandler.apply(this,$([this,V.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$([this,V.VERBOSE],t)),this._logHandler.apply(this,$([this,V.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$([this,V.INFO],t)),this._logHandler.apply(this,$([this,V.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$([this,V.WARN],t)),this._logHandler.apply(this,$([this,V.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$([this,V.ERROR],t)),this._logHandler.apply(this,$([this,V.ERROR],t))},t}();function X(t){W.forEach(function(e){e.setLogLevel(t)})}var J,Z=((U={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",U["bad-app-name"]="Illegal App name: '{$appName}",U["duplicate-app"]="Firebase App named '{$appName}' already exists",U["app-deleted"]="Firebase App named '{$appName}' already deleted",U["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",U["invalid-log-argument"]="First argument to `onLog` must be null or a function.",U),tt=new T("app","Firebase",Z),et=((J={})["@firebase/app"]="fire-core",J["@firebase/analytics"]="fire-analytics",J["@firebase/app-check"]="fire-app-check",J["@firebase/auth"]="fire-auth",J["@firebase/database"]="fire-rtdb",J["@firebase/functions"]="fire-fn",J["@firebase/installations"]="fire-iid",J["@firebase/messaging"]="fire-fcm",J["@firebase/performance"]="fire-perf",J["@firebase/remote-config"]="fire-rc",J["@firebase/storage"]="fire-gcs",J["@firebase/firestore"]="fire-fst",J["fire-js"]="fire-js",J["firebase-wrapper"]="fire-js-all",J),nt=new Q("@firebase/app"),it=function(){function t(t,e,n){var i=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=A(void 0,t),this.container=new H(e.name),this._addComponent(new F("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return i._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var i=this.container.getProvider(t);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){nt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw tt.create("app-deleted",{appName:this.name_})},t}();it.prototype.name&&it.prototype.options||it.prototype.delete||console.log("dc");var st=function t(){var e=function(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,s){void 0===s&&(s={}),"object"==typeof s&&null!==s||(s={name:s});var r=s;void 0===r.name&&(r.name="[DEFAULT]");var o=r.name;if("string"!=typeof o||!o)throw tt.create("bad-app-name",{appName:String(o)});if(M(e,o))throw tt.create("duplicate-app",{appName:o});var a=new t(n,r,i);return e[o]=a,a},app:s,registerVersion:function(t,e,n){var i,s=null!==(i=et[t])&&void 0!==i?i:t;n&&(s+="-"+n);var o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var c=['Unable to register library "'+s+'" with version "'+e+'":'];return o&&c.push('library name "'+s+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void nt.warn(c.join(" "))}r(new F(s+"-version",function(){return{library:s,version:e}},"VERSION"))},setLogLevel:X,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw tt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=G[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var s=[],r=2;r<arguments.length;r++)s[r-2]=arguments[r];var o=s.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:V[n].toLowerCase(),message:o,args:s,type:e.name})}},i=0,s=W;i<s.length;i++)n(s[i])}(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:r,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function s(t){if(!M(e,t=t||"[DEFAULT]"))throw tt.create("no-app",{appName:t});return e[t]}function r(r){var o=r.name;if(n.has(o))return nt.debug("There were multiple attempts to register component "+o+"."),"PUBLIC"===r.type?i[o]:null;if(n.set(o,r),"PUBLIC"===r.type){var a=function(t){if(void 0===t&&(t=s()),"function"!=typeof t[o])throw tt.create("invalid-app-argument",{appName:o});return t[o]()};void 0!==r.serviceProps&&A(a,r.serviceProps),i[o]=a,t.prototype[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,o).apply(this,r.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++)e[l[c]]._addComponent(r);return"PUBLIC"===r.type?i[o]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),s.App=t,i}(it);return e.INTERNAL=S(S({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){A(e,t)},createSubscribe:B,ErrorFactory:T,deepExtend:A}),e}(),rt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){nt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&nt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var at=st.initializeApp;st.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E()&&nt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),at.apply(void 0,t)};var ct,lt=st;(ct=lt).INTERNAL.registerComponent(new F("platform-logger",function(t){return new rt(t)},"PRIVATE")),ct.registerVersion("@firebase/app","0.6.30",void 0),ct.registerVersion("fire-js","");var ht=lt;ht.registerVersion("firebase","8.10.0","app"),ht.SDK_VERSION="8.10.0";let dt=(()=>{class t{constructor(){this.initFireBaseApp()}initFireBaseApp(){ht.initializeApp({apiKey:"AIzaSyDwghdTsWkYjoe7s-hiVntkOEp8odtRq5Q",authDomain:"angular-chat-room-c5673.firebaseapp.com",databaseURL:"https://angular-chat-room-c5673-default-rtdb.firebaseio.com",projectId:"angular-chat-room-c5673",storageBucket:"angular-chat-room-c5673.appspot.com",messagingSenderId:"767651941036",appId:"1:767651941036:web:f35327895c7ce933afad09"})}loadHistory(){return new g.a(t=>{this.historyTable=ht.database().ref("history"),this.historyTable.on("value",e=>{const n=e.val();console.log(n),t.next(n)})})}saveChatToHistoryTable(t,e,n){const i={historyId:Date.now().toString(),user:e,messages:t,roomId:n,savedAt:Date.now()};ht.database().ref("history/"+i.historyId).set(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pt=(()=>{class t{constructor(t){this.http=t}getChatMessages(t){return this.http.get(`api/chat-message/${t}`)}addChatMessage(t){return this.http.post("api/chat-message",t)}}return t.\u0275fac=function(e){return new(e||t)(o.ac(f.b))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ut=(()=>{class t{constructor(t,e,n){this.chatMessageService=t,this.socketService=e,this.roomDataService=n,this._messages=new a.a([]),this._isLoading=new a.a(!1),this.subscription=new r.a,this.messages$=this._messages.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.initSocketListener(),this.roomDataService.selectedRoom$.pipe(Object(c.a)(()=>this._messages.next([]))).subscribe()}initSocketListener(){this.socketService.getMessage().pipe(Object(c.a)(t=>console.log("addChatMessage",t)),Object(c.a)(t=>this._messages.next([...this._messages.value,t])),Object(l.a)(this.subscription)).subscribe()}updateData(t){this._isLoading.next(!0),this.chatMessageService.getChatMessages(t).pipe(Object(c.a)(t=>this._messages.next(t)),Object(h.a)(1),Object(d.a)(()=>this._isLoading.next(!1))).subscribe()}addChatMessage(t){console.log("addChatMessage"),this.socketService.sendMessage(t)}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.ac(pt),o.ac(y),o.ac(_))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ft=(()=>{class t{constructor(t,e,n,i){this.fireBaseService=t,this.chatMessagesDataService=e,this.userDataService=n,this.roomDataService=i,this._historyList=new a.a([]),this._isLoading=new a.a(!1),this._selectedHistory=new a.a(void 0),this.historyList$=this._historyList.asObservable(),this.isLoading$=this._isLoading.asObservable(),this.selectedHistory$=this._selectedHistory.asObservable()}loadHistory(){this.fireBaseService.loadHistory().pipe(Object(c.a)(t=>this._historyList.next(t))).subscribe()}setSelectedHistory(t){var e;(null===(e=this._selectedHistory.value)||void 0===e?void 0:e.historyId)!==t&&(this._isLoading.next(!0),this._historyList.pipe(Object(p.a)(e=>e.find(e=>e.historyId===t)),Object(c.a)(t=>this._selectedHistory.next(t)),Object(h.a)(1),Object(d.a)(()=>this._isLoading.next(!1))).subscribe())}saveChatToHistory(){Object(C.a)([this.chatMessagesDataService.messages$,this.userDataService.user$,this.roomDataService.selectedRoom$]).pipe(Object(h.a)(1),Object(c.a)(([t,e,n])=>this.fireBaseService.saveChatToHistoryTable(t,e,null==n?void 0:n.roomId))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.ac(dt),o.ac(ut),o.ac(v.a),o.ac(_))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var bt=n("Kj3r");const gt=["gutterEls"];function mt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",2,3),o.dc("mousedown",function(e){o.vc(t);const n=o.gc().index;return o.gc().startDragging(e,2*n+1,n+1)})("touchstart",function(e){o.vc(t);const n=o.gc().index;return o.gc().startDragging(e,2*n+1,n+1)})("mouseup",function(e){o.vc(t);const n=o.gc().index;return o.gc().clickGutter(e,n+1)})("touchend",function(e){o.vc(t);const n=o.gc().index;return o.gc().clickGutter(e,n+1)}),o.Pb(2,"div",4),o.Sb()}if(2&t){const t=o.gc().index,e=o.gc();o.yc("flex-basis",e.gutterSize,"px")("order",2*t+1)}}function yt(t,e){1&t&&o.Bc(0,mt,3,4,"div",1),2&t&&o.mc("ngIf",!1===e.last)}const vt=["*"];function _t(t){return void 0!==t.changedTouches&&t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:void 0!==t.clientX&&void 0!==t.clientY?{x:t.clientX,y:t.clientY}:null}function Ct(t,e){const n=t.nativeElement.getBoundingClientRect();return"horizontal"===e?n.width:n.height}function xt(t){return"boolean"==typeof t?t:"false"!==t}function St(t,e){return null==t?e:(t=Number(t),!isNaN(t)&&t>=0?t:e)}function Ot(t,e){if("percent"===t){const t=e.reduce((t,e)=>null!==e?t+e:t,0);return e.every(t=>null!==t)&&t>99.9&&t<100.1}if("pixel"===t)return 1===e.filter(t=>null===t).length}function wt(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.minSize?null:t.component.minSize>t.size?t.size:t.component.minSize}function kt(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.maxSize?null:t.component.maxSize<t.size?t.size:t.component.maxSize}function At(t,e,n,i){return e.reduce((e,n)=>{const s=function(t,e,n,i){return 0===n?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:e.sizePercentAtStart,pixelRemain:0}:0===e.sizePixelAtStart&&n<0?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:n}:"percent"===t?function(t,e,n){const i=(t.sizePixelAtStart+e)/n*100;if(e>0){if(null!==t.area.maxSize&&i>t.area.maxSize){const i=t.area.maxSize/100*n;return{areaSnapshot:t,pixelAbsorb:i,percentAfterAbsorption:t.area.maxSize,pixelRemain:t.sizePixelAtStart+e-i}}return{areaSnapshot:t,pixelAbsorb:e,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(e<0){if(null!==t.area.minSize&&i<t.area.minSize){const i=t.area.minSize/100*n;return{areaSnapshot:t,pixelAbsorb:i,percentAfterAbsorption:t.area.minSize,pixelRemain:t.sizePixelAtStart+e-i}}return i<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:e+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:e,percentAfterAbsorption:i,pixelRemain:0}}}(e,n,i):"pixel"===t?function(t,e,n){const i=t.sizePixelAtStart+e;return e>0?null!==t.area.maxSize&&i>t.area.maxSize?{areaSnapshot:t,pixelAbsorb:t.area.maxSize-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:i-t.area.maxSize}:{areaSnapshot:t,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:e<0?null!==t.area.minSize&&i<t.area.minSize?{areaSnapshot:t,pixelAbsorb:t.area.minSize+e-i,percentAfterAbsorption:-1,pixelRemain:i-t.area.minSize}:i<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:e+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(e,n):void 0}(t,n,e.remain,i);return e.list.push(s),e.remain=s.pixelRemain,e},{remain:n,list:[]})}function Pt(t,e){"percent"===t?e.areaSnapshot.area.size=e.percentAfterAbsorption:"pixel"===t&&null!==e.areaSnapshot.area.size&&(e.areaSnapshot.area.size=e.areaSnapshot.sizePixelAtStart+e.pixelAbsorb)}let Et=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.elRef=e,this.cdRef=n,this.renderer=i,this._direction="horizontal",this._unit="percent",this._gutterSize=11,this._gutterStep=1,this._restrictMove=!1,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this._gutterDblClickDuration=0,this.dragStart=new o.n(!1),this.dragEnd=new o.n(!1),this.gutterClick=new o.n(!1),this.gutterDblClick=new o.n(!1),this.dragProgressSubject=new r.a,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction}set direction(t){this._direction="vertical"===t?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(t){this._unit="pixel"===t?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(t){this._gutterSize=St(t,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(t){this._gutterStep=St(t,1)}get gutterStep(){return this._gutterStep}set restrictMove(t){this._restrictMove=xt(t)}get restrictMove(){return this._restrictMove}set useTransition(t){this._useTransition=xt(t),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(t){this._disabled=xt(t),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(t){this._dir="rtl"===t?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(t){this._gutterDblClickDuration=St(t,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new g.a(t=>this.transitionEndSubscriber=t).pipe(Object(bt.a)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(t){const e={component:t,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===t.visible?(this.displayedAreas.push(e),this.build(!0,!0)):this.hiddenAreas.push(e)}removeArea(t){if(this.displayedAreas.some(e=>e.component===t)){const e=this.displayedAreas.find(e=>e.component===t);this.displayedAreas.splice(this.displayedAreas.indexOf(e),1),this.build(!0,!0)}else if(this.hiddenAreas.some(e=>e.component===t)){const e=this.hiddenAreas.find(e=>e.component===t);this.hiddenAreas.splice(this.hiddenAreas.indexOf(e),1)}}updateArea(t,e,n){!0===t.visible&&this.build(e,n)}showArea(t){const e=this.hiddenAreas.find(e=>e.component===t);if(void 0===e)return;const n=this.hiddenAreas.splice(this.hiddenAreas.indexOf(e),1);this.displayedAreas.push(...n),this.build(!0,!0)}hideArea(t){const e=this.displayedAreas.find(e=>e.component===t);if(void 0===e)return;const n=this.displayedAreas.splice(this.displayedAreas.indexOf(e),1);n.forEach(t=>{t.order=0,t.size=0}),this.hiddenAreas.push(...n),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(t=>null===t.size?"*":t.size)}setVisibleAreaSizes(t){if(t.length!==this.displayedAreas.length)return!1;const e=t.map(t=>St(t,null));return!1!==Ot(this.unit,e)&&(this.displayedAreas.forEach((t,n)=>t.component._size=e[n]),this.build(!1,!0),!0)}build(t,e){if(this.stopDragging(),!0===t&&(this.displayedAreas.every(t=>null!==t.component.order)&&this.displayedAreas.sort((t,e)=>t.component.order-e.component.order),this.displayedAreas.forEach((t,e)=>{t.order=2*e,t.component.setStyleOrder(t.order)})),!0===e){const t=Ot(this.unit,this.displayedAreas.map(t=>t.component.size));switch(this.unit){case"percent":{const e=100/this.displayedAreas.length;this.displayedAreas.forEach(n=>{n.size=t?n.component.size:e,n.minSize=wt(n),n.maxSize=kt(n)});break}case"pixel":if(t)this.displayedAreas.forEach(t=>{t.size=t.component.size,t.minSize=wt(t),t.maxSize=kt(t)});else{const t=this.displayedAreas.filter(t=>null===t.component.size);if(0===t.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((t,e)=>{t.size=0===e?null:t.component.size,t.minSize=0===e?null:wt(t),t.maxSize=0===e?null:kt(t)});else if(t.length>1){let t=!1;this.displayedAreas.forEach(e=>{null===e.component.size?!1===t?(e.size=null,e.minSize=null,e.maxSize=null,t=!0):(e.size=100,e.minSize=null,e.maxSize=null):(e.size=e.component.size,e.minSize=wt(e),e.maxSize=kt(e))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(e=>{e.component.setStyleFlex(0,0,`calc( ${e.size}% - ${e.size/100*t}px )`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(t=>{null===t.size?t.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,`${t.size}px`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}clickGutter(t,e){const n=_t(t);!this.startPoint||this.startPoint.x!==n.x||this.startPoint.y!==n.y||this.isDragging&&!this.isWaitingInitialMove||(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",e),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",e),this.stopDragging()},this.gutterDblClickDuration))}startDragging(t,e,n){t.preventDefault(),t.stopPropagation(),this.startPoint=_t(t),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.snapshot={gutterNum:n,lastSteppedOffset:0,allAreasSizePixel:Ct(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(t=>{const n={area:t,sizePixelAtStart:Ct(t.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?t.size:-1};t.order<e?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[n]:this.snapshot.areasBeforeGutter.unshift(n):t.order>e&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[n]):this.snapshot.areasAfterGutter.push(n))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((t,e)=>t+e.sizePercentAtStart,0),0!==this.snapshot.areasBeforeGutter.length&&0!==this.snapshot.areasAfterGutter.length&&(this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.dragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.dragEvent.bind(this)))}),this.displayedAreas.forEach(t=>t.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0))}dragEvent(t){if(t.preventDefault(),t.stopPropagation(),null!==this._clickTimeout&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1===this.isDragging)return;if(this.endPoint=_t(t),null===this.endPoint)return;if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let e="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(e=-e);const n=Math.round(e/this.gutterStep)*this.gutterStep;if(n===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=n;let i=At(this.unit,this.snapshot.areasBeforeGutter,-n,this.snapshot.allAreasSizePixel),s=At(this.unit,this.snapshot.areasAfterGutter,n,this.snapshot.allAreasSizePixel);if(0!==i.remain&&0!==s.remain?Math.abs(i.remain)===Math.abs(s.remain)||(Math.abs(i.remain)>Math.abs(s.remain)?s=At(this.unit,this.snapshot.areasAfterGutter,n+i.remain,this.snapshot.allAreasSizePixel):i=At(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)):0!==i.remain?s=At(this.unit,this.snapshot.areasAfterGutter,n+i.remain,this.snapshot.allAreasSizePixel):0!==s.remain&&(i=At(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const t=[...i.list,...s.list],e=t.find(t=>0!==t.percentAfterAbsorption&&t.percentAfterAbsorption!==t.areaSnapshot.area.minSize&&t.percentAfterAbsorption!==t.areaSnapshot.area.maxSize);e&&(e.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-t.filter(t=>t!==e).reduce((t,e)=>t+e.percentAfterAbsorption,0))}i.list.forEach(t=>Pt(this.unit,t)),s.list.forEach(t=>Pt(this.unit,t)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(t){if(t&&(t.preventDefault(),t.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(t=>t.component.unlockEvents());this.dragListeners.length>0;){const t=this.dragListeners.pop();t&&t()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(t,e){const n=this.getVisibleAreaSizes();"start"===t?this.dragStart.emit({gutterNum:e,sizes:n}):"end"===t?this.dragEnd.emit({gutterNum:e,sizes:n}):"click"===t?this.gutterClick.emit({gutterNum:e,sizes:n}):"dblclick"===t?this.gutterDblClick.emit({gutterNum:e,sizes:n}):"transitionEnd"===t?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(n)):"progress"===t&&this.dragProgressSubject.next({gutterNum:e,sizes:n})}ngOnDestroy(){this.stopDragging()}collapseArea(t,e,n){const i=this.displayedAreas.find(e=>e.component===t);if(void 0===i)return;const s="right"===n?1:-1;i.sizeBeforeCollapse||(i.sizeBeforeCollapse=i.size,i.gutterBeforeCollapse=s),i.size=e;const r=this.gutterEls.find(t=>t.nativeElement.style.order===`${i.order+s}`);r&&this.renderer.addClass(r.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}expandArea(t){const e=this.displayedAreas.find(e=>e.component===t);if(void 0===e)return;if(!e.sizeBeforeCollapse)return;e.size=e.sizeBeforeCollapse,e.sizeBeforeCollapse=null;const n=this.gutterEls.find(t=>t.nativeElement.style.order===`${e.order+e.gutterBeforeCollapse}`);n&&this.renderer.removeClass(n.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.A),o.Ob(o.l),o.Ob(o.h),o.Ob(o.F))},t.\u0275cmp=o.Ib({type:t,selectors:[["as-split"]],viewQuery:function(t,e){if(1&t&&o.Hc(gt,1),2&t){let t;o.tc(t=o.ec())&&(e.gutterEls=t)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick",transitionEnd:"transitionEnd"},exportAs:["asSplit"],ngContentSelectors:vt,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","as-split-gutter",3,"flex-basis","order","mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"as-split-gutter",3,"mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,e){1&t&&(o.lc(),o.kc(0),o.Bc(1,yt,1,1,"ng-template",0)),2&t&&(o.Bb(1),o.mc("ngForOf",e.displayedAreas))},directives:[i.l,i.m],styles:['[_nghost-%COMP%]{align-items:stretch;display:flex;flex-wrap:nowrap;height:100%;justify-content:flex-start;overflow:hidden;width:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{align-items:center;background-color:#eee;display:flex;flex-grow:0;flex-shrink:0;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;height:100%;width:100%}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:col-resize;flex-direction:row;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==")}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:row-resize;flex-direction:column;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC")}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area, .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%]{transition:flex-basis .3s}'],changeDetection:0}),t})(),It=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.elRef=e,this.renderer=n,this.split=i,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(t){this._order=St(t,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(t){this._size=St(t,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(t){this._minSize=St(t,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(t){this._maxSize=St(t,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(t){this._lockSize=xt(t),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(t){this._visible=xt(t),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",t=>{"flex-basis"===t.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(t){this.renderer.setStyle(this.elRef.nativeElement,"order",t)}setStyleFlex(t,e,n,i,s){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",n),!0===i?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const t=this.lockListeners.pop();t&&t()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(t=0,e="right"){this.split.collapseArea(this,t,e)}expand(){this.split.expandArea(this)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.A),o.Ob(o.l),o.Ob(o.F),o.Ob(Et))},t.\u0275dir=o.Jb({type:t,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),t})(),Tt=(()=>{class t{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[i.c]]}),t})();var Dt=n("bTqV"),Rt=n("NFeN");function Mt(t,e){1&t&&o.Pb(0,"div",3)}function Bt(t,e){1&t&&(o.Tb(0,"span"),o.Dc(1),o.Sb()),2&t&&(o.Bb(1),o.Fc(" ",", "," "))}function zt(t,e){if(1&t&&(o.Rb(0),o.Tb(1,"span",3),o.Dc(2),o.Sb(),o.Bc(3,Bt,2,1,"span",2),o.Tb(4,"span"),o.Dc(5,"typing..."),o.Sb(),o.Qb()),2&t){const t=e.$implicit,n=e.last;o.Bb(2),o.Fc(" ",t.nickName," "),o.Bb(1),o.mc("ngIf",!n)}}function Lt(t,e){if(1&t&&(o.Rb(0),o.Bc(1,zt,6,2,"ng-container",6),o.Qb()),2&t){const t=o.gc().$implicit,e=o.gc();o.Bb(1),o.mc("ngForOf",t)("ngForTrackBy",e.identify)}}function jt(t,e){1&t&&(o.Tb(0,"span"),o.Dc(1),o.Sb()),2&t&&(o.Bb(1),o.Fc(" ",", "," "))}function Ft(t,e){if(1&t&&(o.Rb(0,9),o.Tb(1,"span",10),o.Dc(2),o.Sb(),o.Bc(3,jt,2,1,"span",2),o.Qb()),2&t){const t=e.$implicit,n=e.last;o.Bb(2),o.Fc(" ",t.nickName," "),o.Bb(1),o.mc("ngIf",!n)}}function Nt(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Ft,4,2,"ng-container",8),o.Qb()),2&t){const t=o.gc().$implicit,e=o.gc(3);o.Bb(1),o.mc("ngForOf",t)("ngForTrackBy",e.identify)}}function Ht(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Nt,2,2,"ng-container",2),o.Qb()),2&t){const t=e.$implicit;o.Bb(1),o.mc("ngIf",t.length)}}function $t(t,e){if(1&t&&(o.Tb(0,"div",7),o.Bc(1,Ht,2,1,"ng-container",2),o.hc(2,"async"),o.Sb()),2&t){const t=o.gc(2);o.Bb(1),o.mc("ngIf",o.ic(2,1,t.roomDataService.usersInRoom$))}}function Ut(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Lt,2,2,"ng-container",4),o.Bc(2,$t,3,3,"ng-template",null,5,o.Cc),o.Qb()),2&t){const t=e.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",t.length)("ngIfElse",n)}}let Wt=(()=>{class t{constructor(t){this.roomDataService=t}ngOnInit(){}identify(t,e){return e.id}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(_))},t.\u0275cmp=o.Ib({type:t,selectors:[["user-list"]],decls:5,vars:6,consts:[[1,"user-list"],["class","typers",4,"ngIf"],[4,"ngIf"],[1,"typers"],[4,"ngIf","ngIfElse"],["noTypers",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room-container"],["class","users-in-room",4,"ngFor","ngForOf","ngForTrackBy"],[1,"users-in-room"],[1,"users"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Bc(1,Mt,1,0,"div",1),o.hc(2,"async"),o.Bc(3,Ut,4,2,"ng-container",2),o.hc(4,"async"),o.Sb()),2&t&&(o.Bb(1),o.mc("ngIf",o.ic(2,2,e.roomDataService.typersInRoom$)),o.Bb(2),o.mc("ngIf",o.ic(4,4,e.roomDataService.typersInRoom$)))},directives:[i.m,i.l],pipes:[i.b],styles:[".user-list[_ngcontent-%COMP%]{font-size:14px;padding-left:5px}.user-list[_ngcontent-%COMP%]   .users-in-room[_ngcontent-%COMP%]   .users[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),t})();var Vt=n("pLZG");const Gt=function(t){return{reverse:t}};let qt=(()=>{class t{constructor(t){this.userDataService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(v.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["message-view"]],inputs:{data:"data"},decls:11,vars:11,consts:[[1,"message-view",3,"ngClass"],[1,"message-header"],[1,"user-name"],[1,"message-content"],[1,"message"],[1,"date"]],template:function(t,e){if(1&t&&(o.Tb(0,"div",0),o.hc(1,"async"),o.Tb(2,"div",1),o.Tb(3,"label",2),o.Dc(4),o.Sb(),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"label",4),o.Dc(7),o.Sb(),o.Tb(8,"label",5),o.Dc(9),o.hc(10,"date"),o.Sb(),o.Sb(),o.Sb()),2&t){let t=null;o.mc("ngClass",o.qc(9,Gt,(null==(t=o.ic(1,4,e.userDataService.user$))?null:t.id)!==(null==e.data.fromUser?null:e.data.fromUser.id))),o.Bb(4),o.Ec(null==e.data||null==e.data.fromUser?null:e.data.fromUser.nickName),o.Bb(3),o.Ec(e.data.text),o.Bb(2),o.Ec(o.jc(10,6,e.data.createdAt,"H:mm:ss"))}},directives:[i.k],pipes:[i.b,i.e],styles:['.message-view[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;margin-bottom:10px}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-view[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{position:relative;border-radius:10px;max-width:70%;background-color:#6495ed;padding:5px 0 0;box-shadow:10px 10px 10px -6px #807c80;display:flex;flex-direction:column;margin:0 10px;word-break:break-word}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:0 20px;margin:0 0 2px}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{align-self:flex-end;color:#f0f8ff;font-size:10px;padding:0 5px;margin:0}.message-view[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-9px;width:0;height:0;border-top:18px solid transparent;border-right:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}.reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:after{content:none}.reverse[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]:before{content:"";position:absolute;right:-9px;width:0;height:0;border-top:18px solid transparent;border-left:18px solid #6495ed;border-bottom:4px solid transparent;clear:both}']}),t})();var Kt=n("Xa2L");function Yt(t,e){if(1&t&&(o.Tb(0,"div",8),o.Tb(1,"div",9),o.Dc(2),o.hc(3,"date"),o.Sb(),o.Sb()),2&t){const t=o.gc().$implicit;o.Bb(2),o.Ec(o.jc(3,1,t.createdAt,"dd/MM/yyyy"))}}function Qt(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Yt,4,4,"div",6),o.hc(2,"date"),o.hc(3,"date"),o.Pb(4,"message-view",7),o.Qb()),2&t){const t=e.$implicit,n=e.index,i=o.gc(2).$implicit;o.Bb(1),o.mc("ngIf",0===n||o.jc(2,2,t.createdAt,"dd")!==o.jc(3,5,i[n-1].createdAt,"dd")),o.Bb(3),o.mc("data",t)}}function Xt(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Qt,5,8,"ng-container",5),o.Qb()),2&t){const t=o.gc().$implicit,e=o.gc(2);o.Bb(1),o.mc("ngForOf",t)("ngForTrackBy",e.identify)}}function Jt(t,e){1&t&&(o.Tb(0,"div",10),o.Dc(1," There are no messages yet "),o.Sb())}function Zt(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Xt,2,2,"ng-container",3),o.Bc(2,Jt,2,0,"ng-template",null,4,o.Cc),o.Qb()),2&t){const t=e.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",t.length)("ngIfElse",n)}}function te(t,e){if(1&t&&(o.Tb(0,"div",2),o.Bc(1,Zt,4,2,"ng-container",1),o.hc(2,"async"),o.Sb()),2&t){const t=o.gc();o.Bb(1),o.mc("ngIf",o.ic(2,1,t.chatMessagesDataService.messages$))}}function ee(t,e){1&t&&(o.Rb(0),o.Tb(1,"div",11),o.Pb(2,"mat-spinner"),o.Sb(),o.Qb())}let ne=(()=>{class t{constructor(t,e){this.chatMessagesDataService=t,this.roomDateService=e,this.subscription=new r.a}ngOnInit(){}ngAfterViewInit(){this.chatMessagesDataService.messages$.pipe(Object(Vt.a)(t=>t.length>1),Object(c.a)(t=>{const e=this.messages.toArray()[t.length];e&&e.nativeElement.scrollIntoView({block:"nearest",behavior:"smooth"})}),Object(l.a)(this.subscription)).subscribe()}identify(t,e){return e.chatMessageId}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(ut),o.Ob(_))},t.\u0275cmp=o.Ib({type:t,selectors:[["messages-container"]],viewQuery:function(t,e){if(1&t&&o.Hc(qt,1,o.l),2&t){let t;o.tc(t=o.ec())&&(e.messages=t)}},decls:4,vars:6,consts:[["class","messages-container",4,"ngIf"],[4,"ngIf"],[1,"messages-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],["class","divider-container",4,"ngIf"],[3,"data"],[1,"divider-container"],[1,"date"],[1,"data-empty"],[1,"data-loading"]],template:function(t,e){1&t&&(o.Bc(0,te,3,3,"div",0),o.hc(1,"async"),o.Bc(2,ee,3,0,"ng-container",1),o.hc(3,"async")),2&t&&(o.mc("ngIf",!o.ic(1,2,e.roomDateService.isLoading$)),o.Bb(2),o.mc("ngIf",o.ic(3,4,e.roomDateService.isLoading$)))},directives:[i.m,i.l,qt,Kt.b],pipes:[i.b,i.e],styles:[".messages-container[_ngcontent-%COMP%]{padding:10px 20px;position:relative}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]{position:sticky;top:10px;display:flex;justify-content:center}.messages-container[_ngcontent-%COMP%]   .divider-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding:0 15px;background-color:#fff8dc;border-radius:5px;font-size:13px;position:relative;top:7px}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%], .messages-container[_ngcontent-%COMP%]   .data-loading[_ngcontent-%COMP%]{position:absolute;top:150px;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.messages-container[_ngcontent-%COMP%]   .data-empty[_ngcontent-%COMP%]{font-size:22px}.data-loading[_ngcontent-%COMP%]{position:absolute;top:60px;left:0;width:100%;height:100%;display:flex;align-items:flex-start;justify-content:center}"]}),t})();var ie=n("zP0r"),se=n("u47x"),re=n("kmnG"),oe=n("qFsG"),ae=n("3Pt+");const ce=function(t){return{disabled:t}};let le=(()=>{class t{constructor(t,e,n,i){this.chatMessageDataService=t,this.roomDataService=e,this.userDataService=n,this.socketService=i,this.subscription=new r.a,this.messageText="",this._typingActive=new a.a(!1),this.userDataService.user$.pipe(Object(c.a)(t=>this.user=t)).subscribe(),this._typingActive.pipe(Object(ie.a)(1),Object(bt.a)(300),Object(c.a)(()=>this.socketService.sendTyping(this.user))).subscribe()}sendChatMessage(){this.roomDataService.selectedRoom$.pipe(Object(h.a)(1),Object(Vt.a)(t=>!!t),Object(p.a)(t=>({chatMessageId:Date.now().toString(),fromUser:this.user,createdAt:Date.now(),text:this.messageText,roomId:t.roomId})),Object(c.a)(t=>this.chatMessageDataService.addChatMessage(t)),Object(c.a)(()=>this.messageText=""),Object(l.a)(this.subscription)).subscribe()}sendTypingActive(){this._typingActive.next(!0)}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(ut),o.Ob(_),o.Ob(v.a),o.Ob(y))},t.\u0275cmp=o.Ib({type:t,selectors:[["typing-container"]],decls:6,vars:5,consts:[["cdkTrapFocus","",1,"typing-container"],["appearance","outline"],["matInput","","type","text","autocomplete","off",3,"ngModel","keyup","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"disabled","click"],[1,"send-text",3,"ngClass"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"mat-form-field",1),o.Tb(2,"input",2),o.dc("keyup",function(){return e.sendTypingActive()})("ngModelChange",function(t){return e.messageText=t})("keyup.enter",function(){return e.messageText?e.sendChatMessage():null}),o.Sb(),o.Tb(3,"button",3),o.dc("click",function(){return e.sendChatMessage()}),o.Tb(4,"mat-icon",4),o.Dc(5,"play_circle_filled"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.mc("ngModel",e.messageText),o.Bb(1),o.mc("disabled",!e.messageText),o.Bb(1),o.mc("ngClass",o.qc(3,ce,!e.messageText)))},directives:[se.d,re.c,oe.a,ae.a,ae.j,ae.m,Dt.b,re.g,Rt.a,i.k],styles:[".typing-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding:5px;margin:5px;justify-content:space-around;align-items:center;border:1px solid #000;border-radius:43px;background-color:#f0f8ff}.typing-container[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.typing-container[_ngcontent-%COMP%]     .mat-form-field{width:80%}.typing-container[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.typing-container[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.typing-container[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:200px}.typing-container[_ngcontent-%COMP%]   .send-text[_ngcontent-%COMP%]{color:#405d77;font-size:26px!important}.typing-container[_ngcontent-%COMP%]   .send-text.disabled[_ngcontent-%COMP%]{opacity:.4}"]}),t})(),he=(()=>{class t{constructor(t,e,n){this.roomDataService=t,this.historyDataService=e,this.chatMessagesDataService=n}saveChatToHistory(){this.historyDataService.saveChatToHistory()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(_),o.Ob(ft),o.Ob(ut))},t.\u0275cmp=o.Ib({type:t,selectors:[["chat-view"]],decls:12,vars:3,consts:[[1,"chat-view-container"],[1,"chat-messages-container"],[1,"chat-title"],["title","save chat","mat-fab","","color","primary","aria-label","Example icon button with a bookmark icon",1,"save-history",3,"click"],[1,"user-list"]],template:function(t,e){if(1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"div"),o.Dc(4),o.hc(5,"async"),o.Tb(6,"button",3),o.dc("click",function(){return e.saveChatToHistory()}),o.Tb(7,"mat-icon"),o.Dc(8,"save"),o.Sb(),o.Sb(),o.Sb(),o.Pb(9,"user-list",4),o.Sb(),o.Pb(10,"messages-container"),o.Pb(11,"typing-container"),o.Sb(),o.Sb()),2&t){let t=null;o.Bb(4),o.Fc("Chat Room",": "+((null==(t=o.ic(5,1,e.roomDataService.selectedRoom$))?null:t.roomName)||"")," ")}},directives:[Dt.b,Rt.a,Wt,ne,le],pipes:[i.b],styles:[".chat-view-container[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;box-sizing:border-box;background-color:#b0c4de}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;align-self:center;padding:0 20px;position:absolute;top:-14px;background-color:#b0c4de;display:flex;flex-direction:column;align-items:center}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .save-history[_ngcontent-%COMP%]{height:40px;width:40px}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .save-history[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{padding:0!important}.chat-view-container[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]{position:absolute;top:34px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]{border:2px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;position:relative;padding-top:25px}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   messages-container[_ngcontent-%COMP%]{flex-grow:1;overflow:auto}.chat-view-container[_ngcontent-%COMP%]   .chat-messages-container[_ngcontent-%COMP%]   typing-container[_ngcontent-%COMP%]{flex-grow:0}"]}),t})();var de=n("GU7r"),pe=n("+rOU"),ue=n("FKr1"),fe=n("R1ws"),be=n("quSY"),ge=n("VRyK"),me=n("xgIS"),ye=n("LRne"),ve=n("PqYM"),_e=n("R0Ic"),Ce=n("JX91"),xe=n("/uUt"),Se=n("8LU1"),Oe=n("nLfN"),we=n("FtGj"),ke=n("cH1L"),Ae=n("vxfF");function Pe(t,e){1&t&&o.kc(0)}const Ee=["*"];function Ie(t,e){}const Te=function(t){return{animationDuration:t}},De=function(t,e){return{value:t,params:e}},Re=["tabBodyWrapper"],Me=["tabHeader"];function Be(t,e){}function ze(t,e){if(1&t&&o.Bc(0,Be,0,0,"ng-template",9),2&t){const t=o.gc().$implicit;o.mc("cdkPortalOutlet",t.templateLabel)}}function Le(t,e){if(1&t&&o.Dc(0),2&t){const t=o.gc().$implicit;o.Ec(t.textLabel)}}function je(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",6),o.dc("click",function(){o.vc(t);const n=e.$implicit,i=e.index,s=o.gc(),r=o.uc(1);return s._handleClick(n,r,i)})("cdkFocusChange",function(n){o.vc(t);const i=e.index;return o.gc()._tabFocusChanged(n,i)}),o.Tb(1,"div",7),o.Bc(2,ze,1,1,"ng-template",8),o.Bc(3,Le,1,1,"ng-template",8),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,n=e.index,i=o.gc();o.Gb("mat-tab-label-active",i.selectedIndex==n),o.mc("id",i._getTabLabelId(n))("disabled",t.disabled)("matRippleDisabled",t.disabled||i.disableRipple),o.Cb("tabIndex",i._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",i._tabs.length)("aria-controls",i._getTabContentId(n))("aria-selected",i.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),o.Bb(2),o.mc("ngIf",t.templateLabel),o.Bb(1),o.mc("ngIf",!t.templateLabel)}}function Fe(t,e){if(1&t){const t=o.Ub();o.Tb(0,"mat-tab-body",10),o.dc("_onCentered",function(){return o.vc(t),o.gc()._removeTabBodyWrapperHeight()})("_onCentering",function(e){return o.vc(t),o.gc()._setTabBodyWrapperHeight(e)}),o.Sb()}if(2&t){const t=e.$implicit,n=e.index,i=o.gc();o.Gb("mat-tab-body-active",i.selectedIndex==n),o.mc("id",i._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration),o.Cb("aria-labelledby",i._getTabLabelId(n))}}const Ne=["tabListContainer"],He=["tabList"],$e=["nextPaginator"],Ue=["previousPaginator"],We=new o.r("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let Ve=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=n,this._animationMode=i}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),n=this._elementRef.nativeElement;n.style.left=e.left,n.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.A),o.Ob(We),o.Ob(fe.a,8))},t.\u0275dir=o.Jb({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();const Ge=new o.r("MatTabContent"),qe=new o.r("MatTabLabel");class Ke{}const Ye=Object(ue.o)(Ke),Qe=new o.r("MAT_TAB_GROUP");let Xe=(()=>{class t extends Ye{constructor(t,e){super(),this._viewContainerRef=t,this._closestTabGroup=e,this.textLabel="",this._contentPortal=null,this._stateChanges=new r.a,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new pe.g(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&(this._templateLabel=t)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.Q),o.Ob(Qe))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-tab"]],contentQueries:function(t,e,n){if(1&t&&(o.Hb(n,qe,1),o.Hb(n,Ge,3,o.M)),2&t){let t;o.tc(t=o.ec())&&(e.templateLabel=t.first),o.tc(t=o.ec())&&(e._explicitContent=t.first)}},viewQuery:function(t,e){if(1&t&&o.Hc(o.M,3),2&t){let t;o.tc(t=o.ec())&&(e._implicitContent=t.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[o.yb,o.zb],ngContentSelectors:Ee,decls:1,vars:0,template:function(t,e){1&t&&(o.lc(),o.Bc(0,Pe,1,0,"ng-template"))},encapsulation:2}),t})();const Je={translateTab:Object(_e.l)("translateTab",[Object(_e.i)("center, void, left-origin-center, right-origin-center",Object(_e.j)({transform:"none"})),Object(_e.i)("left",Object(_e.j)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Object(_e.i)("right",Object(_e.j)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),Object(_e.k)("* => left, * => right, left => center, right => center",Object(_e.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Object(_e.k)("void => left-origin-center",[Object(_e.j)({transform:"translate3d(-100%, 0, 0)"}),Object(_e.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Object(_e.k)("void => right-origin-center",[Object(_e.j)({transform:"translate3d(100%, 0, 0)"}),Object(_e.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Ze=(()=>{class t extends pe.c{constructor(t,e,n,i){super(t,e,i),this._host=n,this._centeringSub=be.a.EMPTY,this._leavingSub=be.a.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Object(Ce.a)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.j),o.Ob(o.Q),o.Ob(Object(o.U)(()=>en)),o.Ob(i.d))},t.\u0275dir=o.Jb({type:t,selectors:[["","matTabBodyHost",""]],features:[o.yb]}),t})(),tn=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._dir=e,this._dirChangeSubscription=be.a.EMPTY,this._translateTabComplete=new r.a,this._onCentering=new o.n,this._beforeCentering=new o.n,this._afterLeavingCenter=new o.n,this._onCentered=new o.n(!0),this.animationDuration="500ms",e&&(this._dirChangeSubscription=e.change.subscribe(t=>{this._computePositionAnimationState(t),n.markForCheck()})),this._translateTabComplete.pipe(Object(xe.a)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const e=this._getLayoutDirection();return"ltr"==e&&t<=0||"rtl"==e&&t>0?"left-origin-center":"right-origin-center"}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(ke.b,8),o.Ob(o.h))},t.\u0275dir=o.Jb({type:t,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),t})(),en=(()=>{class t extends tn{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(ke.b,8),o.Ob(o.h))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-tab-body"]],viewQuery:function(t,e){if(1&t&&o.Hc(pe.c,1),2&t){let t;o.tc(t=o.ec())&&(e._portalHost=t.first)}},hostAttrs:[1,"mat-tab-body"],features:[o.yb],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,e){1&t&&(o.Tb(0,"div",0,1),o.dc("@translateTab.start",function(t){return e._onTranslateTabStarted(t)})("@translateTab.done",function(t){return e._translateTabComplete.next(t)}),o.Bc(2,Ie,0,0,"ng-template",2),o.Sb()),2&t&&o.mc("@translateTab",o.rc(3,De,e._position,o.qc(1,Te,e.animationDuration)))},directives:[Ze],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Je.translateTab]}}),t})();const nn=new o.r("MAT_TABS_CONFIG");let sn=0;class rn{}class on{constructor(t){this._elementRef=t}}const an=Object(ue.m)(Object(ue.n)(on),"primary");let cn=(()=>{class t extends an{constructor(t,e,n,i){super(t),this._changeDetectorRef=e,this._animationMode=i,this._tabs=new o.E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=be.a.EMPTY,this._tabLabelSubscription=be.a.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new o.n,this.focusChange=new o.n,this.animationDone=new o.n,this.selectedTabChange=new o.n(!0),this._groupId=sn++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination,this.dynamicHeight=!(!n||null==n.dynamicHeight)&&n.dynamicHeight}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Object(Se.b)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Object(Se.e)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement;e.classList.remove(`mat-background-${this.backgroundColor}`),t&&e.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const e=null==this._selectedIndex;if(!e){this.selectedTabChange.emit(this._createChangeEvent(t));const e=this._tabBodyWrapper.nativeElement;e.style.minHeight=e.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((e,n)=>e.isActive=n===t),e||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((e,n)=>{e.position=n-t,null==this._selectedIndex||0!=e.position||e.origin||(e.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const t=this._tabs.toArray();for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Object(Ce.a)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(t=>t._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const e=new rn;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Object(ge.a)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,e,n){t.disabled||(this.selectedIndex=e.focusIndex=n)}_getTabIndex(t,e){return t.disabled?null:this.selectedIndex===e?0:-1}_tabFocusChanged(t,e){t&&(this._tabHeader.focusIndex=e)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.h),o.Ob(nn,8),o.Ob(fe.a,8))},t.\u0275dir=o.Jb({type:t,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[o.yb]}),t})(),ln=(()=>{class t extends cn{constructor(t,e,n,i){super(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.h),o.Ob(nn,8),o.Ob(fe.a,8))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-tab-group"]],contentQueries:function(t,e,n){if(1&t&&o.Hb(n,Xe,1),2&t){let t;o.tc(t=o.ec())&&(e._allTabs=t)}},viewQuery:function(t,e){if(1&t&&(o.Hc(Re,1),o.Hc(Me,1)),2&t){let t;o.tc(t=o.ec())&&(e._tabBodyWrapper=t.first),o.tc(t=o.ec())&&(e._tabHeader=t.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,e){2&t&&o.Gb("mat-tab-group-dynamic-height",e.dynamicHeight)("mat-tab-group-inverted-header","below"===e.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[o.Ab([{provide:Qe,useExisting:t}]),o.yb],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,e){1&t&&(o.Tb(0,"mat-tab-header",0,1),o.dc("indexFocused",function(t){return e._focusChanged(t)})("selectFocusedIndex",function(t){return e.selectedIndex=t}),o.Bc(2,je,4,14,"div",2),o.Sb(),o.Tb(3,"div",3,4),o.Bc(5,Fe,1,8,"mat-tab-body",5),o.Sb()),2&t&&(o.mc("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),o.Bb(2),o.mc("ngForOf",e._tabs),o.Bb(1),o.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode),o.Bb(2),o.mc("ngForOf",e._tabs))},directives:function(){return[gn,i.l,pn,ue.h,se.c,i.m,pe.c,en]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),t})();class hn{}const dn=Object(ue.o)(hn);let pn=(()=>{class t extends dn{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l))},t.\u0275dir=o.Jb({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,e){2&t&&(o.Cb("aria-disabled",!!e.disabled),o.Gb("mat-tab-disabled",e.disabled))},inputs:{disabled:"disabled"},features:[o.yb]}),t})();const un=Object(Oe.f)({passive:!0});let fn=(()=>{class t{constructor(t,e,n,i,s,a,c){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=n,this._dir=i,this._ngZone=s,this._platform=a,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new r.a,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new r.a,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new o.n,this.indexFocused=new o.n,s.runOutsideAngular(()=>{Object(me.a)(t.nativeElement,"mouseleave").pipe(Object(l.a)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Object(Se.e)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Object(me.a)(this._previousPaginator.nativeElement,"touchstart",un).pipe(Object(l.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Object(me.a)(this._nextPaginator.nativeElement,"touchstart",un).pipe(Object(l.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:Object(ye.a)(null),e=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new se.e(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),Object(ge.a)(t,e,this._items.changes).pipe(Object(l.a)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(n)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Object(l.a)(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Object(we.o)(t))switch(t.keyCode){case we.d:case we.j:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,n=this._getLayoutDirection();e.scrollLeft="ltr"==n?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(e)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:s}=e.elementRef.nativeElement;let r,o;"ltr"==this._getLayoutDirection()?(r=i,o=r+s):(o=this._tabList.nativeElement.offsetWidth-i,r=o-s);const a=this.scrollDistance,c=this.scrollDistance+n;r<a?this.scrollDistance-=a-r+60:o>c&&(this.scrollDistance+=o-c+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),Object(ve.a)(650,100).pipe(Object(l.a)(Object(ge.a)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:n}=this._scrollHeader(t);(0===n||n>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.h),o.Ob(Ae.d),o.Ob(ke.b,8),o.Ob(o.A),o.Ob(Oe.a),o.Ob(fe.a,8))},t.\u0275dir=o.Jb({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),bn=(()=>{class t extends fn{constructor(t,e,n,i,s,r,o){super(t,e,n,i,s,r,o),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Object(Se.b)(t)}_itemSelected(t){t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.h),o.Ob(Ae.d),o.Ob(ke.b,8),o.Ob(o.A),o.Ob(Oe.a),o.Ob(fe.a,8))},t.\u0275dir=o.Jb({type:t,inputs:{disableRipple:"disableRipple"},features:[o.yb]}),t})(),gn=(()=>{class t extends bn{constructor(t,e,n,i,s,r,o){super(t,e,n,i,s,r,o)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(o.h),o.Ob(Ae.d),o.Ob(ke.b,8),o.Ob(o.A),o.Ob(Oe.a),o.Ob(fe.a,8))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-tab-header"]],contentQueries:function(t,e,n){if(1&t&&o.Hb(n,pn,0),2&t){let t;o.tc(t=o.ec())&&(e._items=t)}},viewQuery:function(t,e){if(1&t&&(o.Hc(Ve,3),o.Hc(Ne,3),o.Hc(He,3),o.Hc($e,1),o.Hc(Ue,1)),2&t){let t;o.tc(t=o.ec())&&(e._inkBar=t.first),o.tc(t=o.ec())&&(e._tabListContainer=t.first),o.tc(t=o.ec())&&(e._tabList=t.first),o.tc(t=o.ec())&&(e._nextPaginator=t.first),o.tc(t=o.ec())&&(e._previousPaginator=t.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,e){2&t&&o.Gb("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[o.yb],ngContentSelectors:Ee,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(o.lc(),o.Tb(0,"div",0,1),o.dc("click",function(){return e._handlePaginatorClick("before")})("mousedown",function(t){return e._handlePaginatorPress("before",t)})("touchend",function(){return e._stopInterval()}),o.Pb(2,"div",2),o.Sb(),o.Tb(3,"div",3,4),o.dc("keydown",function(t){return e._handleKeydown(t)}),o.Tb(5,"div",5,6),o.dc("cdkObserveContent",function(){return e._onContentChanges()}),o.Tb(7,"div",7),o.kc(8),o.Sb(),o.Pb(9,"mat-ink-bar"),o.Sb(),o.Sb(),o.Tb(10,"div",8,9),o.dc("mousedown",function(t){return e._handlePaginatorPress("after",t)})("click",function(){return e._handlePaginatorClick("after")})("touchend",function(){return e._stopInterval()}),o.Pb(12,"div",2),o.Sb()),2&t&&(o.Gb("mat-tab-header-pagination-disabled",e._disableScrollBefore),o.mc("matRippleDisabled",e._disableScrollBefore||e.disableRipple),o.Bb(5),o.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode),o.Bb(5),o.Gb("mat-tab-header-pagination-disabled",e._disableScrollAfter),o.mc("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[ue.h,de.a,Ve],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),t})(),mn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[i.c,ue.e,pe.f,ue.i,de.c,se.a],ue.e]}),t})();const yn=function(t){return{selected:t}};function vn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",7),o.dc("click",function(){o.vc(t);const n=e.$implicit;return o.gc(4).roomSelected(n.roomId)}),o.hc(2,"async"),o.Dc(3),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit,n=o.gc(4);let i=null;o.Bb(1),o.mc("ngClass",o.qc(4,yn,(null==(i=o.ic(2,2,n.roomDataService.selectedRoom$))?null:i.roomId)===t.roomId)),o.Bb(2),o.Fc(" ",t.roomName," ")}}function _n(t,e){if(1&t&&(o.Rb(0),o.Bc(1,vn,4,6,"ng-container",6),o.Qb()),2&t){const t=o.gc().$implicit,e=o.gc(2);o.Bb(1),o.mc("ngForOf",t)("ngForTrackBy",e.identify)}}function Cn(t,e){1&t&&(o.Tb(0,"div",8),o.Dc(1," There are no rooms "),o.Sb())}function xn(t,e){if(1&t&&(o.Rb(0),o.Bc(1,_n,2,2,"ng-container",4),o.Bc(2,Cn,2,0,"ng-template",null,5,o.Cc),o.Qb()),2&t){const t=e.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",t.length)("ngIfElse",n)}}function Sn(t,e){if(1&t&&(o.Tb(0,"div",2),o.Tb(1,"div",3),o.Bc(2,xn,4,2,"ng-container",1),o.hc(3,"async"),o.Sb(),o.Sb()),2&t){const t=o.gc();o.Bb(2),o.mc("ngIf",o.ic(3,1,t.roomDataService.roomList$))}}function On(t,e){1&t&&(o.Rb(0),o.Tb(1,"div",9),o.Pb(2,"mat-spinner"),o.Sb(),o.Qb())}let wn=(()=>{class t{constructor(t){this.roomDataService=t}ngOnInit(){}roomSelected(t){this.roomDataService.setSelectedRoom(t)}identify(t,e){return e.roomId}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(_))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-rooms"]],decls:4,vars:6,consts:[["class","rooms",4,"ngIf"],[4,"ngIf"],[1,"rooms"],[1,"rooms-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"room-data-container",3,"ngClass","click"],[1,"data-empty"],[1,"data-loading"]],template:function(t,e){1&t&&(o.Bc(0,Sn,4,3,"div",0),o.hc(1,"async"),o.Bc(2,On,3,0,"ng-container",1),o.hc(3,"async")),2&t&&(o.mc("ngIf",!o.ic(1,2,e.roomDataService.isLoading$)),o.Bb(2),o.mc("ngIf",o.ic(3,4,e.roomDataService.isLoading$)))},directives:[i.m,i.l,i.k,Kt.b],pipes:[i.b],styles:[".rooms[_ngcontent-%COMP%]{padding:20px 10px 15px;height:100%;background-color:#bbc0c5}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]{border:1.5px solid #000;border-radius:10px;height:100%;display:flex;flex-direction:column;padding-top:25px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]{margin:5px 10px;border:1px solid #f5f5f5;border-radius:10px;height:100%;padding:5px}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#60819c;font-weight:600;border:1px solid grey}.rooms[_ngcontent-%COMP%]   .rooms-container[_ngcontent-%COMP%]   .room-data-container[_ngcontent-%COMP%]:hover{background-color:#b0c4de}"]}),t})();const kn=function(t){return{selected:t}};function An(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",7),o.dc("click",function(){o.vc(t);const n=e.$implicit;return o.gc(4).historyDataService.setSelectedHistory(n.historyId)}),o.hc(2,"async"),o.Dc(3),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit,n=o.gc(4);let i=null;o.Bb(1),o.mc("ngClass",o.qc(5,kn,(null==(i=o.ic(2,3,n.historyDataService.selectedHistory$))?null:i.historyId)===t.historyId)),o.Bb(2),o.Gc(" ",t.savedAt," : ",t.roomId," ")}}function Pn(t,e){if(1&t&&(o.Rb(0),o.Bc(1,An,4,7,"ng-container",6),o.Qb()),2&t){const t=o.gc().$implicit,e=o.gc(2);o.Bb(1),o.mc("ngForOf",t)("ngForTrackBy",e.identify)}}function En(t,e){1&t&&(o.Tb(0,"div",8),o.Dc(1," There is no history Data "),o.Sb())}function In(t,e){if(1&t&&(o.Rb(0),o.Bc(1,Pn,2,2,"ng-container",4),o.Bc(2,En,2,0,"ng-template",null,5,o.Cc),o.Qb()),2&t){const t=e.$implicit,n=o.uc(3);o.Bb(1),o.mc("ngIf",t.length)("ngIfElse",n)}}function Tn(t,e){if(1&t&&(o.Tb(0,"div",2),o.Tb(1,"div",3),o.Bc(2,In,4,2,"ng-container",1),o.hc(3,"async"),o.Sb(),o.Sb()),2&t){const t=o.gc();o.Bb(2),o.mc("ngIf",o.ic(3,1,t.historyDataService.historyList$))}}function Dn(t,e){1&t&&(o.Rb(0),o.Tb(1,"div",9),o.Pb(2,"mat-spinner"),o.Sb(),o.Qb())}let Rn=(()=>{class t{constructor(t){this.historyDataService=t}identify(t,e){return e.historyId}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(ft))},t.\u0275cmp=o.Ib({type:t,selectors:[["history"]],decls:4,vars:6,consts:[["class","historyAll",4,"ngIf"],[4,"ngIf"],[1,"historyAll"],[1,"historyAll-container"],[4,"ngIf","ngIfElse"],["dataEmpty",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"history-container",3,"ngClass","click"],[1,"data-empty"],[1,"data-loading"]],template:function(t,e){1&t&&(o.Bc(0,Tn,4,3,"div",0),o.hc(1,"async"),o.Bc(2,Dn,3,0,"ng-container",1),o.hc(3,"async")),2&t&&(o.mc("ngIf",!o.ic(1,2,e.historyDataService.isLoading$)),o.Bb(2),o.mc("ngIf",o.ic(3,4,e.historyDataService.isLoading$)))},directives:[i.m,i.l,i.k,Kt.b],pipes:[i.b],styles:[""]}),t})(),Mn=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["chat-manager"]],decls:5,vars:0,consts:[["label","Rooms"],["label","History"]],template:function(t,e){1&t&&(o.Tb(0,"mat-tab-group"),o.Tb(1,"mat-tab",0),o.Pb(2,"app-rooms"),o.Sb(),o.Tb(3,"mat-tab",1),o.Pb(4,"history"),o.Sb(),o.Sb())},directives:[ln,Xe,wn,Rn],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),t})();const Bn=[{path:"",component:(()=>{class t{constructor(t,e){this.roomDataService=t,this.historyDataService=e,this.subscription=new r.a}ngOnInit(){this.loadData("")}loadData(t){this.roomDataService.updateData(),this.historyDataService.loadHistory()}ngOnDestroy(){this.subscription.next(),this.subscription.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(_),o.Ob(ft))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-main-view"]],decls:7,vars:3,consts:[[2,"width","100%","height","100%"],["direction","horizontal",3,"gutterSize"],[3,"size"],[1,"chat-manager-container"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"as-split",1),o.Tb(2,"as-split-area",2),o.Pb(3,"chat-view"),o.Sb(),o.Tb(4,"as-split-area",2),o.Tb(5,"div",3),o.Pb(6,"chat-manager"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(1),o.mc("gutterSize",5),o.Bb(1),o.mc("size",70),o.Bb(2),o.mc("size",30))},directives:[Et,It,he,Mn],styles:[".as-split-gutter{background-color:#6a85b7!important}.chat-manager-container[_ngcontent-%COMP%]{display:flex;height:100%}"]}),t})(),pathMatch:"full"}];let zn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[s.c.forChild(Bn)],s.c]}),t})();var Ln=n("PCNd"),jn=n("1kSV");let Fn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[i.c,zn,Tt,Ln.a,jn.a,mn]]}),t})()},"0z79":function(t,e,n){const i=n("AdPF"),s=n("CUme"),r=n("cpc2"),{pick:o}=n("Eexf"),a=n("2UHX"),c=n("NOtv")("engine.io-client:polling-xhr");function l(){}const h=null!=new i({xdomain:!1}).responseType;class d extends r{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=o(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new i(t);try{c("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(n){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{e.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=()=>{this.onLoad()},e.onerror=()=>{this.onError(e.responseText)}):e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():setTimeout(()=>{this.onError("number"==typeof e.status?e.status:0)},0))},c("xhr data %s",this.data),e.send(this.data)}catch(n){return void setTimeout(()=>{this.onError(n)},0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function p(){for(let t in d.requests)d.requests.hasOwnProperty(t)&&d.requests[t].abort()}d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",p):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",p,!1)),t.exports=class extends s{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}this.supportsBinary=h&&!(t&&t.forceBase64)}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new d(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",t=>{this.onError("xhr post error",t)})}doPoll(){c("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",t=>{this.onError("xhr poll error",t)}),this.pollXhr=t}},t.exports.Request=d},"2UHX":function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2pII":function(t,e,n){const i=n("akSB"),s=n("cpc2"),r=n("NOtv")("engine.io-client:socket"),o=n("KoVT"),a=n("Uxeu"),c=n("TypT");class l extends s{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){r('creating transport "%s"',t);const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=o.protocol,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return r("options: %j",n),new i[t](n)}open(){let t;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void setTimeout(()=>{this.emit("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(e){return r("error while creating transport: %s",e),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){r("setting transport %s",t.name),this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(t){r('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),n=!1;l.priorWebsocketSuccess=!1;const i=()=>{n||(r('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",i=>{if(!n)if("pong"===i.type&&"probe"===i.data){if(r('probe transport "%s" pong',t),this.upgrading=!0,this.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,r('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||"closed"!==this.readyState&&(r("changing transport and sending upgrade packet"),d(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emit("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{r('probe transport "%s" failed',t);const n=new Error("probe error");n.transport=e.name,this.emit("upgradeError",n)}}))};function s(){n||(n=!0,d(),e.close(),e=null)}const o=n=>{const i=new Error("probe error: "+n);i.transport=e.name,s(),r('probe transport "%s" failed because of error: %s',t,n),this.emit("upgradeError",i)};function a(){o("transport closed")}function c(){o("socket closed")}function h(t){e&&t.name!==e.name&&(r('"%s" works - aborting "%s"',t.name,e.name),s())}const d=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",h)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",h),e.open()}onOpen(){if(r("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){r("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else r('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:t,data:e,options:n};this.emit("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),r("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.removeListener("upgrade",e),this.removeListener("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){r("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(r('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const i=t.length;for(;n<i;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}l.priorWebsocketSuccess=!1,l.protocol=o.protocol,t.exports=l},"3JDX":function(t,e,n){t.exports=function(t){function e(t){let n,s=null;function r(...t){if(!r.enabled)return;const i=r,s=Number(new Date);i.diff=s-(n||s),i.prev=n,i.curr=s,n=s,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";o++;const r=e.formatters[s];return"function"==typeof r&&(n=r.call(i,t[o]),t.splice(o,1),o--),n}),e.formatArgs.call(i,t),(i.log||e.log).apply(i,t)}return r.namespace=t,r.useColors=e.useColors(),r.color=e.selectColor(t),r.extend=i,r.destroy=e.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>null===s?e.enabled(t):s,set:t=>{s=t}}),"function"==typeof e.init&&e.init(r),r}function i(t,n){const i=e(this.namespace+(void 0===n?":":n)+t);return i.log=this.log,i}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(s),...e.skips.map(s).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];const i=("string"==typeof t?t:"").split(/[\s,]+/),s=i.length;for(n=0;n<s;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n("FGiv"),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},"4Trj":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrictEventEmitter=void 0;const i=n("cpc2");e.StrictEventEmitter=class extends i{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e),this}emitReserved(t,...e){return super.emit(t,...e),this}listeners(t){return super.listeners(t)}}},AdPF:function(t,e,n){const i=n("yeub"),s=n("2UHX");t.exports=function(t){const e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!e)try{return new(s[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}},Aplp:function(t,e,n){"use strict";var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},o=0,a=0;function c(t){var e="";do{e=s[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function l(){var t=c(+new Date);return t!==i?(o=0,i=t):t+"."+c(o++)}for(;a<64;a++)r[s[a]]=a;l.encode=c,l.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+r[t.charAt(a)];return e},t.exports=l},Byvj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}},C2QD:function(t,e){function n(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},CIKq:function(t,e,n){const i=n("Gbct"),s=n("KoVT"),r=n("TypT"),o=n("Aplp"),{pick:a}=n("Eexf"),{WebSocket:c,usingBrowserWebSocket:l,defaultBinaryType:h,nextTick:d}=n("X071"),p=n("NOtv")("engine.io-client:websocket"),u="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends i{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=u?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=l&&!u?e?new c(t,e):new c(t):new c(t,e,n)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||h,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;s.encodePacket(n,this.supportsBinary,t=>{const e={};!l&&(n.options&&(e.compress=n.options.compress),this.opts.perMessageDeflate)&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1);try{l?this.ws.send(t):this.ws.send(t,e)}catch(s){p("websocket closed before onclose event")}i&&d(()=>{this.writable=!0,this.emit("drain")})})}}onClose(){i.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=o()),this.supportsBinary||(t.b64=1),t=r.encode(t),t.length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}check(){return!(!c||"__initialize"in c&&this.name===f.prototype.name)}}t.exports=f},CUme:function(t,e,n){const i=n("Gbct"),s=n("TypT"),r=n("KoVT"),o=n("Aplp"),a=n("NOtv")("engine.io-client:polling");t.exports=class extends i{get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{a("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(a("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){a("pre-pause polling complete"),--t||e()})),this.writable||(a("we are currently writing - waiting to pause"),t++,this.once("drain",function(){a("pre-pause writing complete"),--t||e()}))}else e()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){a("polling got data %s",t),r.decodePayload(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,r.encodePayload(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=o()),this.supportsBinary||t.sid||(t.b64=1),t=s.encode(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}}},Cl5A:function(t,e,n){const i=n("CUme"),s=n("2UHX"),r=/\n/g,o=/\\n/g;let a;t.exports=class extends i{constructor(t){super(t),this.query=this.query||{},a||(a=s.___eio=s.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=t=>{this.onError("jsonp poll error",t)};const e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(t,e):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)}doWrite(t,e){let n;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=n,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function i(){s(),e()}this.form.action=this.uri();const s=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(t){this.onError("jsonp polling iframe removal error",t)}try{n=document.createElement('<iframe src="javascript:0" name="'+this.iframeId+'">')}catch(t){n=document.createElement("iframe"),n.name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};s(),t=t.replace(o,"\\\n"),this.area.value=t.replace(r,"\\n");try{this.form.submit()}catch(a){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&i()}:this.iframe.onload=i}}},Eexf:function(t,e){t.exports.pick=(t,...e)=>e.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{})},FGiv:function(t,e){var n=1e3,i=60*n,s=60*i,r=24*s;function o(t,e,n,i){var s=e>=1.5*n;return Math.round(t/n)+" "+i+(s?"s":"")}t.exports=function(t,e){e=e||{};var a,c,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===l&&isFinite(t))return e.long?(a=t,(c=Math.abs(a))>=r?o(a,c,r,"day"):c>=s?o(a,c,s,"hour"):c>=i?o(a,c,i,"minute"):c>=n?o(a,c,n,"second"):a+" ms"):function(t){var e=Math.abs(t);return e>=r?Math.round(t/r)+"d":e>=s?Math.round(t/s)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},Gbct:function(t,e,n){const i=n("KoVT"),s=n("cpc2"),r=n("NOtv")("engine.io-client:transport");t.exports=class extends s{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):r("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}}},KFhd:function(t,e,n){const{PACKET_TYPES:i}=n("gC2B"),s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,o=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};t.exports=({type:t,data:e},n,a)=>{return s&&e instanceof Blob?n?a(e):o(e,a):r&&(e instanceof ArrayBuffer||(c=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?a(e instanceof ArrayBuffer?e:e.buffer):o(new Blob([e]),a):a(i[t]+(e||""));var c}},KoVT:function(t,e,n){const i=n("KFhd"),s=n("fP3r"),r=String.fromCharCode(30);t.exports={protocol:4,encodePacket:i,encodePayload:(t,e)=>{const n=t.length,s=new Array(n);let o=0;t.forEach((t,a)=>{i(t,!1,t=>{s[a]=t,++o===n&&e(s.join(r))})})},decodePacket:s,decodePayload:(t,e)=>{const n=t.split(r),i=[];for(let r=0;r<n.length;r++){const t=s(n[r],e);if(i.push(t),"error"===t.type)break}return i}}},NOtv:function(t,e,n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(s=i))}),e.splice(s,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n("3JDX")(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},PVQj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const i=n("lKxJ"),s=n("eFEk"),r=n("ggWO"),o=n("Byvj"),a=n("C2QD"),c=n("4Trj"),l=n("NOtv")("socket.io-client:manager");e.Manager=class extends c.StrictEventEmitter{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||r;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(l("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=o.on(e,"open",function(){n.onopen(),t&&t()}),r=o.on(e,"error",e=>{l("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const t=this._timeout;l("connect attempt will timeout after %d",t),0===t&&s();const n=setTimeout(()=>{l("connect attempt timed out after %d",t),s(),e.close(),e.emit("error",new Error("timeout"))},t);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}return this.subs.push(s),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){l("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(o.on(t,"ping",this.onping.bind(this)),o.on(t,"data",this.ondata.bind(this)),o.on(t,"error",this.onerror.bind(this)),o.on(t,"close",this.onclose.bind(this)),o.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){l("error",t),this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new s.Socket(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return void l("socket %s is still active, skipping close",n);this._close()}_packet(t){l("writing packet %j",t);const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){l("cleanup"),this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){l("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){l("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const n=setTimeout(()=>{t.skipReconnect||(l("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(l("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(l("reconnect success"),t.onreconnect())}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}},TypT:function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,s=n.length;i<s;i++){var r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},Uxeu:function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e,s,r=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));for(var c,l=n.exec(t||""),h={},d=14;d--;)h[i[d]]=l[d]||"";return-1!=o&&-1!=a&&(h.source=r,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=(s=(e=h.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1),"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1),s),h.queryKey=(c={},h.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,n){e&&(c[e]=n)}),c),h}},X071:function(t,e,n){const i=n("2UHX");t.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:"function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):t=>setTimeout(t,0)}},akSB:function(t,e,n){const i=n("AdPF"),s=n("0z79"),r=n("Cl5A"),o=n("CIKq");e.polling=function(t){let e,n=!1,o=!1;const a=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?443:80),n=t.hostname!==location.hostname||i!==t.port,o=t.secure!==e}if(t.xdomain=n,t.xscheme=o,e=new i(t),"open"in e&&!t.forceJSONP)return new s(t);if(!a)throw new Error("JSONP disabled");return new r(t)},e.websocket=o},cpc2:function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s=0;s<i.length;s++)if((n=i[s])===e||n.fn===e){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var s=(n=n.slice(0)).length;i<s;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},eFEk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const i=n("ggWO"),s=n("Byvj"),r=n("4Trj"),o=n("NOtv")("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});e.Socket=class extends r.StrictEventEmitter{constructor(t,e,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[s.on(t,"open",this.onopen.bind(this)),s.on(t,"packet",this.onpacket.bind(this)),s.on(t,"error",this.onerror.bind(this)),s.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(a.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const n={type:i.PacketType.EVENT,data:e,options:{}};return n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),!this.flags.volatile||this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):o("discard packet as the transport is not currently writable"),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){o("transport is open - connecting"),"function"==typeof this.auth?this.auth(t=>{this.packet({type:i.PacketType.CONNECT,data:t})}):this.packet({type:i.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){o("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case i.PacketType.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case i.PacketType.EVENT:case i.PacketType.BINARY_EVENT:this.onevent(t);break;case i.PacketType.ACK:case i.PacketType.BINARY_ACK:this.onack(t);break;case i.PacketType.DISCONNECT:this.ondisconnect();break;case i.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];o("emitting event %j",e),null!=t.id&&(o("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...s){n||(n=!0,o("sending ack %j",s),e.packet({type:i.PacketType.ACK,id:t,data:s}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(o("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):o("bad ack %s",t.id)}onconnect(t){o("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:i.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},f7yz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const i=n("Uxeu"),s=n("NOtv")("socket.io-client:url");e.url=function(t,e="",n){let r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),s("parse %s",t),r=i(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}},fP3r:function(t,e,n){const{PACKET_TYPES_REVERSE:i,ERROR_PACKET:s}=n("gC2B");let r;"function"==typeof ArrayBuffer&&(r=n("g5Dd"));const o=(t,e)=>{if(r){const n=r.decode(t);return a(n,e)}return{base64:!0,data:t}},a=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};t.exports=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const n=t.charAt(0);return"b"===n?{type:"message",data:o(t.substring(1),e)}:i[n]?t.length>1?{type:i[n],data:t.substring(1)}:{type:i[n]}:s}},g5Dd:function(t,e){!function(t){"use strict";e.encode=function(e){var n,i=new Uint8Array(e),s=i.length,r="";for(n=0;n<s;n+=3)r+=t[i[n]>>2],r+=t[(3&i[n])<<4|i[n+1]>>4],r+=t[(15&i[n+1])<<2|i[n+2]>>6],r+=t[63&i[n+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(e){var n,i,s,r,o,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),d=new Uint8Array(h);for(n=0;n<c;n+=4)i=t.indexOf(e[n]),s=t.indexOf(e[n+1]),r=t.indexOf(e[n+2]),o=t.indexOf(e[n+3]),d[l++]=i<<2|s>>4,d[l++]=(15&s)<<4|r>>2,d[l++]=(3&r)<<6|63&o;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},gC2B:function(t,e){const n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";const i=Object.create(null);Object.keys(n).forEach(t=>{i[n[t]]=t}),t.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},ggWO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const i=n("cpc2"),s=n("qKib"),r=n("ymUC"),o=n("NOtv")("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={})),e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!r.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=s.deconstructPacket(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}};class c extends i{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new l(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!r.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const i=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const s=t.substring(i,e);if(s!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===t.charAt(e+1)){const i=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(i,e)}else n.nsp="/";const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const i=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){const i=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(e));if(!c.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return o("decoded %s as %j",t,n),n}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=c;class l{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},jifJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Socket=e.Manager=e.protocol=void 0;const i=n("f7yz"),s=n("PVQj"),r=n("NOtv")("socket.io-client");t.exports=e=a;const o=e.managers={};function a(t,e){"object"==typeof t&&(e=t,t=void 0);const n=i.url(t,(e=e||{}).path||"/socket.io"),a=n.source,c=n.id;let l;return e.forceNew||e["force new connection"]||!1===e.multiplex||o[c]&&n.path in o[c].nsps?(r("ignoring socket cache for %s",a),l=new s.Manager(a,e)):(o[c]||(r("new io instance for %s",a),o[c]=new s.Manager(a,e)),l=o[c]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}e.io=a;var c=n("ggWO");Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return c.protocol}}),e.connect=a;var l=n("PVQj");Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return l.Manager}});var h=n("eFEk");Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return h.Socket}}),e.default=a},lKxJ:function(t,e,n){const i=n("2pII");t.exports=(t,e)=>new i(t,e),t.exports.Socket=i,t.exports.protocol=i.protocol,t.exports.Transport=n("Gbct"),t.exports.transports=n("akSB"),t.exports.parser=n("KoVT")},qKib:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const i=n("ymUC");function s(t,e){if(!t)return t;if(i.isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=s(t[i],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=s(t[i],e));return n}return t}function r(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=r(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=r(t[n],e));return t}e.deconstructPacket=function(t){const e=[],n=t;return n.data=s(t.data,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=r(t.data,e),t.attachments=void 0,t}},yeub:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},ymUC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const i="function"==typeof ArrayBuffer,s=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function a(t){return i&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||r&&t instanceof Blob||o&&t instanceof File}e.isBinary=a,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,i=e.length;n<i;n++)if(t(e[n]))return!0;return!1}if(a(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}}}]);